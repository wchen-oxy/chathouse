(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{223:function(e,t,a){},356:function(e,t,a){e.exports=a(829)},372:function(e,t,a){},373:function(e,t,a){},380:function(e,t,a){},381:function(e,t,a){},398:function(e,t,a){},399:function(e,t,a){},400:function(e,t,a){},401:function(e,t,a){},402:function(e,t,a){},403:function(e,t,a){},404:function(e,t,a){},421:function(e,t,a){},422:function(e,t,a){},423:function(e,t,a){},424:function(e,t,a){},6:function(e,t){e.exports={TEMP_PROFILE_PHOTO_URL:"https://qph.fs.quoracdn.net/main-qimg-2b21b9dd05c757fe30231fac65b504dd",returnUsernameURL:function(e){return"/u/"+e},returnUserImageURL:function(e){return"http://eumyth-bucket-1.s3.us-west-1.amazonaws.com/"+e},returnPostURL:function(e){return"/p/"+e},ROOT_URL:"/api",IMAGE_BASE_URL:"/api/image",MULTIPLE_IMAGES_URL:"/api/image/multiple",DISPLAY_PHOTO_URL:"/api/image/display-photo",COVER_PHOTO_URL:"/api/image/cover",DRAFT_BASE_URL:"/api/draft",DRAFT_TITLE_URL:"/api/draft/title",TINY_DISPLAY_PHOTO_URL:"/api/image/navbar-display-photo",COMPRESS_PHOTO_URL:"/api/image/compress",USER_BASE_URL:"/api/user",USER_BIO_URL:"/api/user/bio",USER_ACCOUNT_SETTINGS_INFO_URL:"/api/user/account-settings-info",USER_PRIVACY_URL:"/api/user/private",USER_PREVIEW_BASE_URL:"/api/user-preview",USER_PREVIEW_ID_URL:"/api/user-preview/id",USER_TEMPLATE_URL:"/api/user/template",RELATION_BASE_URL:"/api/relation",RELATION_STATUS_URL:"/api/relation/status",RELATION_INFO_URL:"/api/relation/info",RELATION_SET_FOLLOWER_URL:"/api/relation/set",POST_BASE_URL:"/api/post",PROJECT_BASE_URL:"/api/project",MULTIPLE_PROJECTS_URL:"/api/project/multiple",MULTIPLE_POSTS_URL:"/api/post/multiple",WITH_IMAGE_POST_URL:"/api/post/with-image",NO_IMAGE_POST_URL:"/api/post/no-image",SOCIAL_FEED_POSTS_URL:"/api/post/feed",POST_DISPLAY_PHOTO_URL:"/api/post/display-photo",SINGLE_POST_TEXT_DATA_URL:"/api/post/single",INDEX_BASE_URL:"/api/index-user",CHECK_USERNAME_URL:"/api/index-user/username",INDEX_USER_PURSUITS_URL:"/api/index-user/pursuits",COMMENT_BASE_URL:"/api/comment",ROOT_COMMENT_URL:"/api/comment/root",REPLY_COMMENT_URL:"/api/comment/reply",REFRESH_COMMENTS_URL:"/api/comment/refresh",VOTE_ON_COMMENT_URL:"/api/comment/vote"}},806:function(e,t,a){},807:function(e,t,a){},808:function(e,t,a){},809:function(e,t,a){},810:function(e,t,a){},811:function(e,t,a){},812:function(e,t,a){},813:function(e,t,a){},814:function(e,t,a){},815:function(e,t,a){},816:function(e,t,a){},817:function(e,t,a){},818:function(e,t,a){},819:function(e,t,a){},820:function(e,t,a){},821:function(e,t,a){},822:function(e,t,a){},823:function(e,t,a){},824:function(e,t,a){},825:function(e,t,a){},826:function(e,t,a){},827:function(e,t,a){},828:function(e,t,a){},829:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(34),o=a.n(i),r=a(40),s=a(36),c=a(69),u=a(21),d=a(10),m=a(11),h=a(3),p=a(14),g=a(13),v=a(208),f=a.n(v),b="INITIAL_STATE",y="POST",E="COLLAPSED",P="EXPANDED",S="NONE",C="SHORT",w="LONG",O=(a(372),function(e){return l.a.createElement("section",null,l.a.createElement("div",{id:"welcomeloginform-form-container"},l.a.createElement("form",{onSubmit:e.onLoginSubmit},l.a.createElement("div",{className:"welcomeloginform-text-input-container"},l.a.createElement("input",{type:"text",placeholder:"Email",name:"email",autoComplete:"off",onChange:e.onLoginEmailChange})),l.a.createElement("div",{className:"welcomeloginform-text-input-container"},l.a.createElement("input",{type:"password",placeholder:"Password",name:"password",autoComplete:"off",onChange:e.onLoginPasswordChange})),l.a.createElement("input",{id:"welcomeloginform-login-button",className:"welcomeloginform-button",type:"submit",value:"Log in"})),l.a.createElement("button",{id:"welcomelogin-forgot-button",value:"PASSWORD_STATE",onClick:e.onToggleLoginRegisterWindow},"Forget Password?")),l.a.createElement("p",null,"Don't Have An Account?"),l.a.createElement("button",{id:"welcomeloginform-switch-button",value:"REGISTER_STATE",onClick:e.onToggleLoginRegisterWindow},"Create Account"))}),k=a(12),I=(a(373),function(e){var t=Object(n.useState)(!0),a=Object(k.a)(t,2),i=a[0],o=a[1];return l.a.createElement("section",null,l.a.createElement("div",{id:"welcomeregisterform-form-container"},l.a.createElement("form",{onSubmit:e.onRegisterSubmit},l.a.createElement("div",{className:"welcomeregisterform-text-input-container"},l.a.createElement("input",{type:"text",placeholder:"Email",name:"email",autoComplete:"off",onChange:e.onRegisterEmailChange})),l.a.createElement("div",{className:"welcomeregisterform-text-input-container"},l.a.createElement("input",{type:"password",placeholder:"Password",name:"password",autoComplete:"off",onChange:function(t){t.target.value.length>=6?(o(!1),e.onRegisterPasswordChange(t)):o(!0)}})),l.a.createElement("p",null,i?"Password must be at least 6 characters":null),l.a.createElement("input",{id:"welcomeregisterform-button",type:"submit",value:"Sign Up",disabled:i}))),l.a.createElement("p",null,"Already Have An Account?"),l.a.createElement("button",{id:"welcomeregisterform-login",value:"LOGIN_STATE",onClick:e.onToggleLoginRegisterWindow},"Sign In"))}),T=l.a.createContext(null),D=function(e){return function(t){return l.a.createElement(T.Consumer,null,function(a){return l.a.createElement(e,Object.assign({},t,{firebase:a}))})}},x=T,j=a(165),R={apiKey:"AIzaSyC9sBHK-evjecmuWQsQHoE-iSJmHUcIBcE",authDomain:"eumyth-65330.firebaseapp.com",databaseURL:"https://eumyth-65330.firebaseio.com",projectId:"eumyth-65330",storageBucket:"eumyth-65330.appspot.com",messagingSenderId:"677080457179",appId:"1:677080457179:web:5e1e38f3f082f93427d1fe",measurementId:"G-GP77M3QKXG"},_=function(){function e(){Object(d.a)(this,e),j.a.initializeApp(R),this.auth=j.a.auth(),this.db=j.a.database(),this.doTest=this.doTest.bind(this),this.doCreateUser=this.doCreateUser.bind(this),this.doSignIn=this.doSignIn.bind(this),this.doSignOut=this.doSignOut.bind(this),this.doSendEmailVerification=this.doSendEmailVerification.bind(this),this.doPasswordReset=this.doPasswordReset.bind(this),this.doPasswordUpdate=this.doPasswordUpdate.bind(this),this.doIsEmailVerified=this.doIsEmailVerified.bind(this),this.checkIsExistingUser=this.checkIsExistingUser.bind(this),this.writeBasicUserData=this.writeBasicUserData.bind(this)}return Object(m.a)(e,[{key:"doTest",value:function(){return"FIREBASE"}},{key:"doCreateUser",value:function(e,t){return this.auth.createUserWithEmailAndPassword(e,t).then(function(e){e.user.sendEmailVerification()}).catch(function(e){var t=e.code,a=e.message;console.log(e),"auth/weak-password"===t?alert("The password is too weak."):alert(a)})}},{key:"doSignIn",value:function(e,t){return this.auth.signInWithEmailAndPassword(e,t).catch(function(e){var t=e.code,a=e.message;a&&alert(t+" "+a)})}},{key:"doSignOut",value:function(){return this.auth.signOut()}},{key:"doSendEmailVerification",value:function(){this.auth.currentUser.sendEmailVerification().catch(function(e){var t=e.code,a=e.message;"auth/weak-password"===t?alert("The password is too weak."):console.log(a),console.log(e)})}},{key:"doPasswordReset",value:function(e){return alert("EMAIL"),this.auth.sendPasswordResetEmail(e)}},{key:"doPasswordUpdate",value:function(e){return this.auth.currentUser.updatePassword(e)}},{key:"returnUsername",value:function(){return this.auth.currentUser.displayName}},{key:"doUsernameUpdate",value:function(e){return this.auth.currentUser.updateProfile({displayName:e}).then(function(){return 200})}},{key:"doIsEmailVerified",value:function(){if(this.auth.currentUser)return this.auth.currentUser.emailVerified}},{key:"checkIsExistingUser",value:function(){var e=this.auth.currentUser.uid;return this.db.ref("users/"+e).once("value").then(function(e){return e.val()})}},{key:"returnName",value:function(){var e=this.auth.currentUser.uid;return this.db.ref("users/"+e).once("value").then(function(e){return e.val()})}},{key:"writeBasicUserData",value:function(e,t,a){var n=this.auth.currentUser.uid;return this.db.ref("users/"+n).set({username:e,firstName:t,lastName:a}).then(function(){return 200})}}]),e}(),M=_,U=M,A={email:"",error:null},N=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state=Object(u.a)({},A),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.handleTextUpdate=n.handleTextUpdate.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.email;this.props.firebase.doPasswordReset(a).then(function(){t.setState(Object(u.a)({},A))}).catch(function(e){t.setState({error:e})})}},{key:"handleTextUpdate",value:function(e){this.setState(Object(c.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.error,n=""===t;return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("input",{name:"email",value:this.state.email,onChange:this.handleTextUpdate,type:"text",placeholder:"Email Address"}),l.a.createElement("button",{disabled:n,type:"submit"},"Reset My Password"),a&&l.a.createElement("p",null,a.message)),l.a.createElement("button",{onClick:this.props.onToggleLoginRegisterWindow,value:"LOGIN_STATE"},"Return"))}}]),a}(l.a.Component),L=function(e){return l.a.createElement("div",null,l.a.createElement("h4",null,"PasswordForget"),l.a.createElement(F,{onToggleLoginRegisterWindow:e.onToggleLoginRegisterWindow}))},F=D(N),B=(a(380),function(e){var t=Object(n.useState)(null),a=Object(k.a)(t,2),i=a[0],o=a[1];return l.a.createElement("div",{id:"verifyform-container"},i?l.a.createElement("p",null,"If you have verified your email, please refresh the page. "):l.a.createElement("p",null,"It looks like you haven't verified your account just yet. Please check your email's inbox or junk folder to verify your account. If you have already, return to login or refresh this page."),l.a.createElement("p",null,i),l.a.createElement("button",{id:"verifyform-resend-button",onClick:function(t){return o("Email has been sent! Once you verify \n                    your email, try refreshing the page."),e.onSendEmailVerification(t)}},"Resend Email"),l.a.createElement("div",{id:"verifyform-relogin-container"},l.a.createElement("button",{onClick:e.onSignOut},"Return to Login")))}),V=(a(381),{currentUser:"",email:"",password:"",test:"",error:null,window:"LOGIN_STATE",loggedIn:!1,verified:null,showRegisterSuccess:!1}),W=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state=Object(u.a)({},V),n.handleWindowToggle=n.handleWindowToggle.bind(Object(h.a)(n)),n.handleLoginSubmit=n.handleLoginSubmit.bind(Object(h.a)(n)),n.handleRegisterSubmit=n.handleRegisterSubmit.bind(Object(h.a)(n)),n.handleSendEmailVerication=n.handleSendEmailVerication.bind(Object(h.a)(n)),n.handleSignOut=n.handleSignOut.bind(Object(h.a)(n)),n.handleRegisterSuccess=n.handleRegisterSuccess.bind(Object(h.a)(n)),n.handleTextChange=n.handleTextChange.bind(Object(h.a)(n)),n.handleVerifiedState=n.handleVerifiedState.bind(Object(h.a)(n)),n.renderLoginRegister=n.renderLoginRegister.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this._isMounted&&this.props.firebase.auth.onAuthStateChanged(function(t){t?e.setState({currentUser:t,verified:t.emailVerified}):e.setState({currentUser:null,verified:!1})})}},{key:"handleTextChange",value:function(e){e.preventDefault(),this.setState(Object(c.a)({},e.target.name,e.target.value))}},{key:"handleRegisterSuccess",value:function(e){e.preventDefault(),this.setState(function(e){return{showRegisterSuccess:!e.showRegisterSuccess}})}},{key:"handleSignOut",value:function(e){e.preventDefault(),this.props.firebase.doSignOut().then(this.setState(Object(u.a)({},V)))}},{key:"handleSendEmailVerication",value:function(e){e.preventDefault(),console.log("sent"),this.props.firebase.doSendEmailVerification(),alert("Email has been sent! Once you verify \n      your email, try refreshing the page.")}},{key:"handleVerifiedState",value:function(e){this.state.currentUser&&this.setState({verified:e})}},{key:"handleWindowToggle",value:function(e){e.preventDefault(),console.log(e.target.value),this.setState({window:e.target.value})}},{key:"handleLoginSubmit",value:function(e){var t=this;if(e.preventDefault(),!f.a.validate(this.state.email))return alert("This is not a valid email!");this.props.firebase.doSignIn(this.state.email,this.state.password).then(function(e){e&&(console.log(e.user.emailVerified),e.user.emailVerified?t.props.history.push("/"):t.handleVerifiedState(e.user.emailVerified))})}},{key:"handleRegisterSubmit",value:function(e){var t=this;e.preventDefault(),f.a.validate(this.state.email)?this.state.password.length<6?alert("Password is too short!"):this.props.firebase.doCreateUser(this.state.email,this.state.password).then(function(){return t.setState({showRegisterSuccess:!0})}).catch(function(e){return console.log(e)}):alert("This is not a valid email!")}},{key:"renderLoginRegister",value:function(e){return this.state.currentUser&&!this.state.verified?l.a.createElement("div",{className:"welcome-hero-side-container"},l.a.createElement(B,{onToggleLoginRegisterWindow:this.handleWindowToggle,onSendEmailVerification:this.handleSendEmailVerication,onSignOut:this.handleSignOut})):"REGISTER_STATE"===e?l.a.createElement("div",{className:"welcome-hero-side-container"},l.a.createElement(I,{onToggleLoginRegisterWindow:this.handleWindowToggle,onRegisterEmailChange:this.handleTextChange,onRegisterPasswordChange:this.handleTextChange,onRegisterSubmit:this.handleRegisterSubmit})):"LOGIN_STATE"===e?l.a.createElement("div",{className:"welcome-hero-side-container"},l.a.createElement(O,{onToggleLoginRegisterWindow:this.handleWindowToggle,onLoginEmailChange:this.handleTextChange,onLoginPasswordChange:this.handleTextChange,onLoginSubmit:this.handleLoginSubmit})):"PASSWORD_STATE"===e?l.a.createElement("div",{className:"welcome-hero-side-container"},l.a.createElement(L,{onToggleLoginRegisterWindow:this.handleWindowToggle})):void 0}},{key:"render",value:function(){return l.a.createElement("section",{className:"welcome-login-register-section"},l.a.createElement("div",{className:"welcome-hero-hero-container"},l.a.createElement("p",null,"Welcome to interestHub! Login or sign up to get started!"),l.a.createElement("br",null),l.a.createElement("p",null,"(to try out this without signing up, use this test account)"),l.a.createElement("br",null),l.a.createElement("p",null,"(email: williamshengchen8@gmail.com, password: 123123)")),this.renderLoginRegister(this.state.window))}}]),a}(l.a.Component),H=a(17),G=a(38),K=a(355),J=a(22),z=[{value:"3D printing",label:"3D printing"},{value:"Acting",label:"Acting"},{value:"Aeromodeling",label:"Aeromodeling"},{value:"Air sports",label:"Air sports"},{value:"Airbrushing",label:"Airbrushing"},{value:"Aircraft Spotting",label:"Aircraft Spotting"},{value:"Airsoft",label:"Airsoft"},{value:"Airsofting",label:"Airsofting"},{value:"Amateur astronomy",label:"Amateur astronomy"},{value:"Amateur geology",label:"Amateur geology"},{value:"Amateur Radio",label:"Amateur Radio"},{value:"American football",label:"American football"},{value:"Animal fancy",label:"Animal fancy"},{value:"Animals/pets/dogs",label:"Animals/pets/dogs"},{value:"Antiquing",label:"Antiquing"},{value:"Antiquities",label:"Antiquities"},{value:"Aqua-lung",label:"Aqua-lung"},{value:"Aquarium (Freshwater & Saltwater)",label:"Aquarium (Freshwater & Saltwater)"},{value:"Archery",label:"Archery"},{value:"Art collecting",label:"Art collecting"},{value:"Arts",label:"Arts"},{value:"Association football",label:"Association football"},{value:"Astrology",label:"Astrology"},{value:"Astronomy",label:"Astronomy"},{value:"Audiophilia",label:"Audiophilia"},{value:"Australian rules football",label:"Australian rules football"},{value:"Auto audiophilia",label:"Auto audiophilia"},{value:"Auto racing",label:"Auto racing"},{value:"Backgammon",label:"Backgammon"},{value:"Backpacking",label:"Backpacking"},{value:"Badminton",label:"Badminton"},{value:"Base Jumping",label:"Base Jumping"},{value:"Baseball",label:"Baseball"},{value:"Basketball",label:"Basketball"},{value:"Baton Twirling",label:"Baton Twirling"},{value:"Beach Volleyball",label:"Beach Volleyball"},{value:"Beach/Sun tanning",label:"Beach/Sun tanning"},{value:"Beachcombing",label:"Beachcombing"},{value:"Beadwork",label:"Beadwork"},{value:"Beatboxing",label:"Beatboxing"},{value:"Becoming A Child Advocate",label:"Becoming A Child Advocate"},{value:"Beekeeping",label:"Beekeeping"},{value:"Bell Ringing",label:"Bell Ringing"},{value:"Belly Dancing",label:"Belly Dancing"},{value:"Bicycle Polo",label:"Bicycle Polo"},{value:"Bicycling",label:"Bicycling"},{value:"Billiards",label:"Billiards"},{value:"Bird watching",label:"Bird watching"},{value:"Birding",label:"Birding"},{value:"Birdwatching",label:"Birdwatching"},{value:"Blacksmithing",label:"Blacksmithing"},{value:"Blogging",label:"Blogging"},{value:"BMX",label:"BMX"},{value:"Board games",label:"Board games"},{value:"Board sports",label:"Board sports"},{value:"BoardGames",label:"BoardGames"},{value:"Boating",label:"Boating"},{value:"Body Building",label:"Body Building"},{value:"Bodybuilding",label:"Bodybuilding"},{value:"Bonsai Tree",label:"Bonsai Tree"},{value:"Book collecting",label:"Book collecting"},{value:"Bookbinding",label:"Bookbinding"},{value:"Boomerangs",label:"Boomerangs"},{value:"Bowling",label:"Bowling"},{value:"Boxing",label:"Boxing"},{value:"Brazilian jiu-jitsu",label:"Brazilian jiu-jitsu"},{value:"Breakdancing",label:"Breakdancing"},{value:"Brewing Beer",label:"Brewing Beer"},{value:"Bridge",label:"Bridge"},{value:"Bridge Building",label:"Bridge Building"},{value:"Bringing Food To The Disabled",label:"Bringing Food To The Disabled"},{value:"Building A House For Habitat For Humanity",label:"Building A House For Habitat For Humanity"},{value:"Building Dollhouses",label:"Building Dollhouses"},{value:"Bus spotting",label:"Bus spotting"},{value:"Butterfly Watching",label:"Butterfly Watching"},{value:"Button Collecting",label:"Button Collecting"},{value:"Cake Decorating",label:"Cake Decorating"},{value:"Calligraphy",label:"Calligraphy"},{value:"Camping",label:"Camping"},{value:"Candle making",label:"Candle making"},{value:"Canoeing",label:"Canoeing"},{value:"Car Racing",label:"Car Racing"},{value:"Card collecting",label:"Card collecting"},{value:"Cartooning",label:"Cartooning"},{value:"Casino Gambling",label:"Casino Gambling"},{value:"Cave Diving",label:"Cave Diving"},{value:"Ceramics",label:"Ceramics"},{value:"Cheerleading",label:"Cheerleading"},{value:"Chess",label:"Chess"},{value:"Church/church activities",label:"Church/church activities"},{value:"Cigar Smoking",label:"Cigar Smoking"},{value:"Climbing",label:"Climbing"},{value:"Cloud Watching",label:"Cloud Watching"},{value:"Coin Collecting",label:"Coin Collecting"},{value:"Collecting",label:"Collecting"},{value:"Collecting Antiques",label:"Collecting Antiques"},{value:"Collecting Artwork",label:"Collecting Artwork"},{value:"Collecting Hats",label:"Collecting Hats"},{value:"Collecting Music Albums",label:"Collecting Music Albums"},{value:"Collecting RPM Records",label:"Collecting RPM Records"},{value:"Collecting Sports Cards (Baseball, Football, Basketball, Hockey)",label:"Collecting Sports Cards (Baseball, Football, Basketball, Hockey)"},{value:"Collecting Swords",label:"Collecting Swords"},{value:"Color guard",label:"Color guard"},{value:"Coloring",label:"Coloring"},{value:"Comic book collecting",label:"Comic book collecting"},{value:"Compose Music",label:"Compose Music"},{value:"Computer activities",label:"Computer activities"},{value:"Computer programming",label:"Computer programming"},{value:"Conworlding",label:"Conworlding"},{value:"Cooking",label:"Cooking"},{value:"Cosplay",label:"Cosplay"},{value:"Cosplaying",label:"Cosplaying"},{value:"Couponing",label:"Couponing"},{value:"Crafts",label:"Crafts"},{value:"Crafts (unspecified)",label:"Crafts (unspecified)"},{value:"Creative writing",label:"Creative writing"},{value:"Cricket",label:"Cricket"},{value:"Crochet",label:"Crochet"},{value:"Crocheting",label:"Crocheting"},{value:"Cross-Stitch",label:"Cross-Stitch"},{value:"Crossword Puzzles",label:"Crossword Puzzles"},{value:"Cryptography",label:"Cryptography"},{value:"Curling",label:"Curling"},{value:"Cycling",label:"Cycling"},{value:"Dance",label:"Dance"},{value:"Dancing",label:"Dancing"},{value:"Darts",label:"Darts"},{value:"Debate",label:"Debate"},{value:"Deltiology (postcard collecting)",label:"Deltiology (postcard collecting)"},{value:"Diecast Collectibles",label:"Diecast Collectibles"},{value:"Digital arts",label:"Digital arts"},{value:"Digital Photography",label:"Digital Photography"},{value:"Disc golf",label:"Disc golf"},{value:"Do it yourself",label:"Do it yourself"},{value:"Dodgeball",label:"Dodgeball"},{value:"Dog sport",label:"Dog sport"},{value:"Dolls",label:"Dolls"},{value:"Dominoes",label:"Dominoes"},{value:"Dowsing",label:"Dowsing"},{value:"Drama",label:"Drama"},{value:"Drawing",label:"Drawing"},{value:"Driving",label:"Driving"},{value:"Dumpster Diving",label:"Dumpster Diving"},{value:"Eating out",label:"Eating out"},{value:"Educational Courses",label:"Educational Courses"},{value:"Electronics",label:"Electronics"},{value:"Element collecting",label:"Element collecting"},{value:"Embroidery",label:"Embroidery"},{value:"Entertaining",label:"Entertaining"},{value:"Equestrianism",label:"Equestrianism"},{value:"Exercise (aerobics, weights)",label:"Exercise (aerobics, weights)"},{value:"Exhibition drill",label:"Exhibition drill"},{value:"Falconry",label:"Falconry"},{value:"Fast cars",label:"Fast cars"},{value:"Felting",label:"Felting"},{value:"Fencing",label:"Fencing"},{value:"Field hockey",label:"Field hockey"},{value:"Figure skating",label:"Figure skating"},{value:"Fire Poi",label:"Fire Poi"},{value:"Fishing",label:"Fishing"},{value:"Fishkeeping",label:"Fishkeeping"},{value:"Flag Football",label:"Flag Football"},{value:"Floorball",label:"Floorball"},{value:"Floral Arrangements",label:"Floral Arrangements"},{value:"Flower arranging",label:"Flower arranging"},{value:"Flower collecting and pressing",label:"Flower collecting and pressing"},{value:"Fly Tying",label:"Fly Tying"},{value:"Flying",label:"Flying"},{value:"Footbag",label:"Footbag"},{value:"Football",label:"Football"},{value:"Foraging",label:"Foraging"},{value:"Foreign language learning",label:"Foreign language learning"},{value:"Fossil hunting",label:"Fossil hunting"},{value:"Four Wheeling",label:"Four Wheeling"},{value:"Freshwater Aquariums",label:"Freshwater Aquariums"},{value:"Frisbee Golf \u2013 Frolf",label:"Frisbee Golf \u2013 Frolf"},{value:"Gambling",label:"Gambling"},{value:"Games",label:"Games"},{value:"Gaming (tabletop games and role-playing games)",label:"Gaming (tabletop games and role-playing games)"},{value:"Garage Saleing",label:"Garage Saleing"},{value:"Gardening",label:"Gardening"},{value:"Genealogy",label:"Genealogy"},{value:"Geocaching",label:"Geocaching"},{value:"Ghost hunting",label:"Ghost hunting"},{value:"Glassblowing",label:"Glassblowing"},{value:"Glowsticking",label:"Glowsticking"},{value:"Gnoming",label:"Gnoming"},{value:"Go",label:"Go"},{value:"Go Kart Racing",label:"Go Kart Racing"},{value:"Going to movies",label:"Going to movies"},{value:"Golf",label:"Golf"},{value:"Golfing",label:"Golfing"},{value:"Gongoozling",label:"Gongoozling"},{value:"Graffiti",label:"Graffiti"},{value:"Grip Strength",label:"Grip Strength"},{value:"Guitar",label:"Guitar"},{value:"Gun Collecting",label:"Gun Collecting"},{value:"Gunsmithing",label:"Gunsmithing"},{value:"Gymnastics",label:"Gymnastics"},{value:"Gyotaku",label:"Gyotaku"},{value:"Handball",label:"Handball"},{value:"Handwriting Analysis",label:"Handwriting Analysis"},{value:"Hang gliding",label:"Hang gliding"},{value:"Herping",label:"Herping"},{value:"Hiking",label:"Hiking"},{value:"Home Brewing",label:"Home Brewing"},{value:"Home Repair",label:"Home Repair"},{value:"Home Theater",label:"Home Theater"},{value:"Homebrewing",label:"Homebrewing"},{value:"Hooping",label:"Hooping"},{value:"Horse riding",label:"Horse riding"},{value:"Hot air ballooning",label:"Hot air ballooning"},{value:"Hula Hooping",label:"Hula Hooping"},{value:"Hunting",label:"Hunting"},{value:"Ice hockey",label:"Ice hockey"},{value:"Ice skating",label:"Ice skating"},{value:"Iceskating",label:"Iceskating"},{value:"Illusion",label:"Illusion"},{value:"Impersonations",label:"Impersonations"},{value:"Inline skating",label:"Inline skating"},{value:"Insect collecting",label:"Insect collecting"},{value:"Internet",label:"Internet"},{value:"Inventing",label:"Inventing"},{value:"Jet Engines",label:"Jet Engines"},{value:"Jewelry Making",label:"Jewelry Making"},{value:"Jigsaw Puzzles",label:"Jigsaw Puzzles"},{value:"Jogging",label:"Jogging"},{value:"Judo",label:"Judo"},{value:"Juggling",label:"Juggling"},{value:"Jukskei",label:"Jukskei"},{value:"Jump Roping",label:"Jump Roping"},{value:"Kabaddi",label:"Kabaddi"},{value:"Kart racing",label:"Kart racing"},{value:"Kayaking",label:"Kayaking"},{value:"Keep A Journal",label:"Keep A Journal"},{value:"Kitchen Chemistry",label:"Kitchen Chemistry"},{value:"Kite Boarding",label:"Kite Boarding"},{value:"Kite flying",label:"Kite flying"},{value:"Kites",label:"Kites"},{value:"Kitesurfing",label:"Kitesurfing"},{value:"Knapping",label:"Knapping"},{value:"Knife making",label:"Knife making"},{value:"Knife throwing",label:"Knife throwing"},{value:"Knitting",label:"Knitting"},{value:"Knotting",label:"Knotting"},{value:"Lacemaking",label:"Lacemaking"},{value:"Lacrosse",label:"Lacrosse"},{value:"Lapidary",label:"Lapidary"},{value:"LARPing",label:"LARPing"},{value:"Laser tag",label:"Laser tag"},{value:"Lasers",label:"Lasers"},{value:"Lawn Darts",label:"Lawn Darts"},{value:"Learn to Play Poker",label:"Learn to Play Poker"},{value:"Learning A Foreign Language",label:"Learning A Foreign Language"},{value:"Learning An Instrument",label:"Learning An Instrument"},{value:"Learning To Pilot A Plane",label:"Learning To Pilot A Plane"},{value:"Leather crafting",label:"Leather crafting"},{value:"Leathercrafting",label:"Leathercrafting"},{value:"Lego building",label:"Lego building"},{value:"Legos",label:"Legos"},{value:"Letterboxing",label:"Letterboxing"},{value:"Listening to music",label:"Listening to music"},{value:"Locksport",label:"Locksport"},{value:"Machining",label:"Machining"},{value:"Macram\xe9",label:"Macram\xe9"},{value:"Macrame",label:"Macrame"},{value:"Magic",label:"Magic"},{value:"Mahjong",label:"Mahjong"},{value:"Making Model Cars",label:"Making Model Cars"},{value:"Marbles",label:"Marbles"},{value:"Marksmanship",label:"Marksmanship"},{value:"Martial arts",label:"Martial arts"},{value:"Matchstick Modeling",label:"Matchstick Modeling"},{value:"Meditation",label:"Meditation"},{value:"Metal detecting",label:"Metal detecting"},{value:"Meteorology",label:"Meteorology"},{value:"Microscopy",label:"Microscopy"},{value:"Mineral collecting",label:"Mineral collecting"},{value:"Model aircraft",label:"Model aircraft"},{value:"Model building",label:"Model building"},{value:"Model Railroading",label:"Model Railroading"},{value:"Model Rockets",label:"Model Rockets"},{value:"Modeling Ships",label:"Modeling Ships"},{value:"Models",label:"Models"},{value:"Motor sports",label:"Motor sports"},{value:"Motorcycles",label:"Motorcycles"},{value:"Mountain Biking",label:"Mountain Biking"},{value:"Mountain Climbing",label:"Mountain Climbing"},{value:"Mountaineering",label:"Mountaineering"},{value:"Movie and movie memorabilia collecting",label:"Movie and movie memorabilia collecting"},{value:"Mushroom hunting/Mycology",label:"Mushroom hunting/Mycology"},{value:"Musical Instruments",label:"Musical Instruments"},{value:"Nail Art",label:"Nail Art"},{value:"Needlepoint",label:"Needlepoint"},{value:"Netball",label:"Netball"},{value:"Nordic skating",label:"Nordic skating"},{value:"Orienteering",label:"Orienteering"},{value:"Origami",label:"Origami"},{value:"Owning An Antique Car",label:"Owning An Antique Car"},{value:"Paintball",label:"Paintball"},{value:"Painting",label:"Painting"},{value:"Papermache",label:"Papermache"},{value:"Papermaking",label:"Papermaking"},{value:"Parachuting",label:"Parachuting"},{value:"Paragliding or Power Paragliding",label:"Paragliding or Power Paragliding"},{value:"Parkour",label:"Parkour"},{value:"People Watching",label:"People Watching"},{value:"Photography",label:"Photography"},{value:"Piano",label:"Piano"},{value:"Pigeon racing",label:"Pigeon racing"},{value:"Pinochle",label:"Pinochle"},{value:"Pipe Smoking",label:"Pipe Smoking"},{value:"Planking",label:"Planking"},{value:"Playing music",label:"Playing music"},{value:"Playing musical instruments",label:"Playing musical instruments"},{value:"Playing team sports",label:"Playing team sports"},{value:"Poker",label:"Poker"},{value:"Pole Dancing",label:"Pole Dancing"},{value:"Polo",label:"Polo"},{value:"Pottery",label:"Pottery"},{value:"Powerboking",label:"Powerboking"},{value:"Protesting",label:"Protesting"},{value:"Puppetry",label:"Puppetry"},{value:"Puzzles",label:"Puzzles"},{value:"Pyrotechnics",label:"Pyrotechnics"},{value:"Quilting",label:"Quilting"},{value:"R/C Boats",label:"R/C Boats"},{value:"R/C Cars",label:"R/C Cars"},{value:"R/C Helicopters",label:"R/C Helicopters"},{value:"R/C Planes",label:"R/C Planes"},{value:"Racing Pigeons",label:"Racing Pigeons"},{value:"Racquetball",label:"Racquetball"},{value:"Radio-controlled car racing",label:"Radio-controlled car racing"},{value:"Rafting",label:"Rafting"},{value:"Railfans",label:"Railfans"},{value:"Rappelling",label:"Rappelling"},{value:"Rapping",label:"Rapping"},{value:"Reading",label:"Reading"},{value:"Reading To The Elderly",label:"Reading To The Elderly"},{value:"Record collecting",label:"Record collecting"},{value:"Relaxing",label:"Relaxing"},{value:"Renaissance Faire",label:"Renaissance Faire"},{value:"Renting movies",label:"Renting movies"},{value:"Rescuing Abused Or Abandoned Animals",label:"Rescuing Abused Or Abandoned Animals"},{value:"Robotics",label:"Robotics"},{value:"Rock balancing",label:"Rock balancing"},{value:"Rock climbing",label:"Rock climbing"},{value:"Rock Collecting",label:"Rock Collecting"},{value:"Rockets",label:"Rockets"},{value:"Rocking AIDS Babies",label:"Rocking AIDS Babies"},{value:"Roleplaying",label:"Roleplaying"},{value:"Roller derby",label:"Roller derby"},{value:"Roller skating",label:"Roller skating"},{value:"Rugby",label:"Rugby"},{value:"Rugby league football",label:"Rugby league football"},{value:"Running",label:"Running"},{value:"Sailing",label:"Sailing"},{value:"Saltwater Aquariums",label:"Saltwater Aquariums"},{value:"Sand art",label:"Sand art"},{value:"Sand Castles",label:"Sand Castles"},{value:"Scrapbooking",label:"Scrapbooking"},{value:"Scuba diving",label:"Scuba diving"},{value:"Sculling or Rowing",label:"Sculling or Rowing"},{value:"Sculpting",label:"Sculpting"},{value:"Sea glass collecting",label:"Sea glass collecting"},{value:"Seashell collecting",label:"Seashell collecting"},{value:"Self Defense",label:"Self Defense"},{value:"Sewing",label:"Sewing"},{value:"Shark Fishing",label:"Shark Fishing"},{value:"Shooting",label:"Shooting"},{value:"Shooting sport",label:"Shooting sport"},{value:"Shopping",label:"Shopping"},{value:"Shortwave listening",label:"Shortwave listening"},{value:"Singing",label:"Singing"},{value:"Singing In Choir",label:"Singing In Choir"},{value:"Skateboarding",label:"Skateboarding"},{value:"Skeet Shooting",label:"Skeet Shooting"},{value:"Sketching",label:"Sketching"},{value:"Skiing",label:"Skiing"},{value:"Skimboarding",label:"Skimboarding"},{value:"Sky Diving",label:"Sky Diving"},{value:"Skydiving",label:"Skydiving"},{value:"Slack Lining",label:"Slack Lining"},{value:"Slacklining",label:"Slacklining"},{value:"Sleeping",label:"Sleeping"},{value:"Slingshots",label:"Slingshots"},{value:"Slot car racing",label:"Slot car racing"},{value:"Snorkeling",label:"Snorkeling"},{value:"Snowboarding",label:"Snowboarding"},{value:"Soap Making",label:"Soap Making"},{value:"Soapmaking",label:"Soapmaking"},{value:"Soccer",label:"Soccer"},{value:"Socializing with friends/neighbors",label:"Socializing with friends/neighbors"},{value:"Speed Cubing (rubix cube)",label:"Speed Cubing (rubix cube)"},{value:"Speed skating",label:"Speed skating"},{value:"Spelunkering",label:"Spelunkering"},{value:"Spending time with family/kids",label:"Spending time with family/kids"},{value:"Sports",label:"Sports"},{value:"Squash",label:"Squash"},{value:"Stamp Collecting",label:"Stamp Collecting"},{value:"Stand-up comedy",label:"Stand-up comedy"},{value:"Stone collecting",label:"Stone collecting"},{value:"Stone skipping",label:"Stone skipping"},{value:"Storm Chasing",label:"Storm Chasing"},{value:"Storytelling",label:"Storytelling"},{value:"String Figures",label:"String Figures"},{value:"Sudoku",label:"Sudoku"},{value:"Surf Fishing",label:"Surf Fishing"},{value:"Surfing",label:"Surfing"},{value:"Survival",label:"Survival"},{value:"Swimming",label:"Swimming"},{value:"Table football",label:"Table football"},{value:"Table tennis",label:"Table tennis"},{value:"Taekwondo",label:"Taekwondo"},{value:"Tai chi",label:"Tai chi"},{value:"Tatting",label:"Tatting"},{value:"Taxidermy",label:"Taxidermy"},{value:"Tea Tasting",label:"Tea Tasting"},{value:"Tennis",label:"Tennis"},{value:"Tesla Coils",label:"Tesla Coils"},{value:"Tetris",label:"Tetris"},{value:"Textiles",label:"Textiles"},{value:"Texting",label:"Texting"},{value:"Tombstone Rubbing",label:"Tombstone Rubbing"},{value:"Tool Collecting",label:"Tool Collecting"},{value:"Tour skating",label:"Tour skating"},{value:"Toy Collecting",label:"Toy Collecting"},{value:"Train Collecting",label:"Train Collecting"},{value:"Train Spotting",label:"Train Spotting"},{value:"Trainspotting",label:"Trainspotting"},{value:"Traveling",label:"Traveling"},{value:"Treasure Hunting",label:"Treasure Hunting"},{value:"Trekkie",label:"Trekkie"},{value:"Triathlon",label:"Triathlon"},{value:"Tutoring Children",label:"Tutoring Children"},{value:"TV watching",label:"TV watching"},{value:"Ultimate Frisbee",label:"Ultimate Frisbee"},{value:"Urban exploration",label:"Urban exploration"},{value:"Vehicle restoration",label:"Vehicle restoration"},{value:"Video game collecting",label:"Video game collecting"},{value:"Video Games",label:"Video Games"},{value:"Video gaming",label:"Video gaming"},{value:"Videophilia",label:"Videophilia"},{value:"Vintage cars",label:"Vintage cars"},{value:"Violin",label:"Violin"},{value:"Volleyball",label:"Volleyball"},{value:"Volunteer",label:"Volunteer"},{value:"Walking",label:"Walking"},{value:"Warhammer",label:"Warhammer"},{value:"Watching movies",label:"Watching movies"},{value:"Watching sporting events",label:"Watching sporting events"},{value:"Water sports",label:"Water sports"},{value:"Weather Watcher",label:"Weather Watcher"},{value:"Web surfing",label:"Web surfing"},{value:"Weightlifting",label:"Weightlifting"},{value:"Windsurfing",label:"Windsurfing"},{value:"Wine Making",label:"Wine Making"},{value:"Wingsuit Flying",label:"Wingsuit Flying"},{value:"Wood carving",label:"Wood carving"},{value:"Woodworking",label:"Woodworking"},{value:"Working In A Food Pantry",label:"Working In A Food Pantry"},{value:"Working on cars",label:"Working on cars"},{value:"World Record Breaking",label:"World Record Breaking"},{value:"Worldbuilding",label:"Worldbuilding"},{value:"Wrestling",label:"Wrestling"},{value:"Writing",label:"Writing"},{value:"Writing Music",label:"Writing Music"},{value:"Writing Songs",label:"Writing Songs"},{value:"Yo-yoing",label:"Yo-yoing"},{value:"Yoga",label:"Yoga"},{value:"YoYo",label:"YoYo"},{value:"Ziplining",label:"Ziplining"},{value:"Zumba",label:"Zumba"}],Y=function(e){var t=e.getValue().length||0;return l.a.createElement(J.z.Menu,e,t<5?e.children:l.a.createElement("div",null,"Please just choose 5"))},q=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).isValidNewOption=function(e,t){return e.length>0&&t.length<5},e}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement(K.a,{components:{Menu:Y},isMulti:!0,onChange:this.props.onSelect,options:z,isValidNewOption:this.isValidNewOption})}}]),a}(n.Component),X=a(15),Q=a.n(X),Z=a(6),$=a.n(Z),ee=function(){function e(){Object(d.a)(this,e)}return Object(m.a)(e,null,[{key:"changeRelationStatus",value:function(e,t,a,n){return Q.a.put($.a.RELATION_SET_FOLLOWER_URL,{action:e,targetUsername:t,currentUsername:a,id:n})}},{key:"checkUsernameAvailable",value:function(e){return console.log($.a.CHECK_USERNAME_URL),Q.a.get($.a.CHECK_USERNAME_URL,{params:{username:e}})}},{key:"createPost",value:function(e){return Q.a.post($.a.POST_BASE_URL,e)}},{key:"createProject",value:function(e){return Q.a.post($.a.PROJECT_BASE_URL,e)}},{key:"createUserProfile",value:function(e){return Q.a.post($.a.USER_BASE_URL,e)}},{key:"deleteAccountPhoto",value:function(e,t){return Q.a.delete("COVER"===t?$.a.COVER_PHOTO_URL:$.a.DISPLAY_PHOTO_URL,{data:{username:e,contentType:t}})}},{key:"deletePhotoByKey",value:function(e){return Q.a.delete($.a.IMAGE_BASE_URL,{data:{key:e}})}},{key:"deleteManyPhotosByKey",value:function(e){return Q.a.delete($.a.MULTIPLE_IMAGES_URL,{data:{keys:e}})}},{key:"deletePost",value:function(e,t,a){return Q.a.delete($.a.POST_BASE_URL,{data:{userId:e,indexUserId:t,postId:a}})}},{key:"getUserPreviewId",value:function(e){return Q.a.get($.a.USER_PREVIEW_ID_URL,e)}},{key:"returnUserRelationInfo",value:function(e){return Q.a.get($.a.RELATION_INFO_URL,{params:{username:e}})}},{key:"returnTinyDisplayPhoto",value:function(e){return Q.a.get($.a.TINY_DISPLAY_PHOTO_URL,{params:{username:e}})}},{key:"setProfilePrivacy",value:function(e,t){return Q.a.put($.a.USER_PRIVACY,{username:e,private:t})}},{key:"setFollowerStatus",value:function(e){return Q.a.put($.a.RELATION_STATUS_URL,e)}},{key:"setDraftPreviewTitle",value:function(e){return Q.a.post($.a.DRAFT_BASE_URL,{previewTitle:e})}},{key:"returnPursuitNames",value:function(e){return Q.a.get($.a.INDEX_USER_PURSUITS_URL,{params:{username:e}})}},{key:"returnIndexUser",value:function(e){return Q.a.get($.a.INDEX_BASE_URL,{params:{username:e}})}},{key:"returnUser",value:function(e){return Q.a.get($.a.USER_BASE_URL,{params:{username:e}})}},{key:"returnFollowerStatus",value:function(e,t){return Q.a.get($.a.RELATION_BASE_URL,{params:{visitorUsername:e,userRelationArrayId:t}})}},{key:"returnMultipleProjects",value:function(e){return Q.a.get($.a.MULTIPLE_PROJECTS_URL,{params:{projectIdList:e}})}},{key:"returnMultiplePostInfo",value:function(e,t){return Q.a.get($.a.MULTIPLE_POSTS_URL,{params:{targetUserDataId:e,postIdList:t}})}},{key:"returnMultiplePosts",value:function(e,t){return Q.a.get($.a.MULTIPLE_POSTS_URL,{params:{postIdList:e,includePostText:t}})}},{key:"retrievePost",value:function(e,t){return Q.a.get($.a.SINGLE_POST_TEXT_DATA_URL,{params:{postId:e,textOnly:t}})}},{key:"returnSocialFeedPosts",value:function(e,t){return Q.a.get($.a.SOCIAL_FEED_POSTS_URL,{params:{indexUserId:e,postIdList:t}})}},{key:"returnAccountSettingsInfo",value:function(e){return Q.a.get($.a.USER_ACCOUNT_SETTINGS_INFO_URL,{params:{username:e}})}},{key:"updateBio",value:function(e){return Q.a.put($.a.USER_BIO_URL,e)}},{key:"updatePost",value:function(e){return Q.a.put($.a.POST_BASE_URL,e)}},{key:"updateAccountImage",value:function(e,t){return Q.a.post("COVER"===t?$.a.COVER_PHOTO_URL:$.a.DISPLAY_PHOTO_URL,e)}},{key:"getComments",value:function(e){return Q.a.get($.a.COMMENT_BASE_URL,e)}},{key:"postComment",value:function(e){return Q.a.post($.a.ROOT_COMMENT_URL,e)}},{key:"postReply",value:function(e){return Q.a.post($.a.REPLY_COMMENT_URL,e)}},{key:"retrieveNewPostInfo",value:function(e){return Q.a.get($.a.DRAFT_BASE_URL,{params:{username:e}})}},{key:"returnImage",value:function(e){return Q.a.get($.a.IMAGE_BASE_URL,{params:{imageKey:e}})}},{key:"refreshComments",value:function(e){return Q.a.get($.a.REFRESH_COMMENTS_URL,e)}},{key:"saveDraft",value:function(e,t){return Q.a.put($.a.DRAFT_BASE_URL,{username:e,draft:JSON.stringify(t)})}},{key:"saveDraftMetaInfo",value:function(e){return Q.a.put($.a.DRAFT_BASE_URL,e)}},{key:"updatePostDisplayPhotos",value:function(e){return Q.a.patch($.a.POST_DISPLAY_PHOTO_URL,e)}},{key:"updateTemplate",value:function(e){return Q.a.put($.a.USER_TEMPLATE_URL,e)}},{key:"voteOnComment",value:function(e){return Q.a.put($.a.VOTE_ON_COMMENT_URL,e)}},{key:"saveTitle",value:function(e){return Q.a.put($.a.DRAFT_TITLE_URL,e)}}]),e}(),te=a(63),ae=a.n(te),ne=(a(398),a(345)),le=a.n(ne),ie=a(353),oe=function(e){var t=function(e,t,a){e.preventDefault(),a(t)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(ie.a,{onDrop:e.handleImageDrop,noClick:!0,noKeyboard:!0,style:{width:"200px",height:"200px"}},function(t){var a=t.getRootProps,n=t.getInputProps;return l.a.createElement("div",a(),l.a.createElement(le.a,{ref:e.setEditorRef,image:e.profilePhoto,width:170,height:170,borderRadius:200,border:50,color:[215,215,215,.8],scale:e.imageScale,rotate:e.imageRotation}),l.a.createElement("input",n()))}),l.a.createElement("button",{onClick:function(a){return t(a,null,e.clearFile)}},"Clear file"),l.a.createElement("label",null,"Rotation"),l.a.createElement("input",{type:"range",id:"points",name:"points",min:"-180",max:"180",value:e.imageRotation,onChange:function(t){return e.rotateImage(t.target.value)}}),l.a.createElement("button",{onClick:function(a){return t(a,0,e.rotateImage)}},"Reset"),l.a.createElement("label",null,"Scale"),l.a.createElement("input",{type:"range",id:"points",name:"points",step:"0.1",min:"1",max:"10",value:e.imageScale,onChange:function(t){return e.scaleImage(t.target.value)}}),l.a.createElement("button",{onClick:function(a){return t(a,1,e.scaleImage)}},"Reset"))},re={firstName:"",lastName:"",username:"",pursuits:[],experienceSelects:[],isTaken:!1,isUpperCase:!1,croppedImage:null,fullImage:null,imageScale:1,imageRotation:0,isSubmitting:!1},se=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).editor=l.a.createRef(null),n.handleTextChange=n.handleTextChange.bind(Object(h.a)(n)),n.handleUsernameChange=ae.a.debounce(function(e){return n.checkUsernameAvailable(e)},1e3),n.handleExperienceSelect=n.handleExperienceSelect.bind(Object(h.a)(n)),n.handleProfileSubmit=n.handleProfileSubmit.bind(Object(h.a)(n)),n.handlePursuitExperienceChange=n.handlePursuitExperienceChange.bind(Object(h.a)(n)),n.handleProfilePhotoChange=n.handleProfilePhotoChange.bind(Object(h.a)(n)),n.handleImageDrop=n.handleImageDrop.bind(Object(h.a)(n)),n.testForSpecialCharacter=n.testForSpecialCharacter.bind(Object(h.a)(n)),n.checkUsernameAvailable=n.checkUsernameAvailable.bind(Object(h.a)(n)),n.clearFile=n.clearFile.bind(Object(h.a)(n)),n.setEditorRef=n.setEditorRef.bind(Object(h.a)(n)),n.rotateImage=n.rotateImage.bind(Object(h.a)(n)),n.scaleImage=n.scaleImage.bind(Object(h.a)(n)),n.state=Object(u.a)({},re),n}return Object(m.a)(a,[{key:"clearFile",value:function(){this.setState(function(e){return{imageKey:e.imageKey+1,profilePhoto:null}})}},{key:"rotateImage",value:function(e){this.setState({imageRotation:parseFloat(e)})}},{key:"scaleImage",value:function(e){this.setState({imageScale:parseFloat(e)})}},{key:"checkUsernameAvailable",value:function(e){var t=this;return ee.checkUsernameAvailable(e).then(function(e){var a=null;200===e.status?a=!0:204===e.state&&(a=!1),t.setState({isTaken:a})}).catch(function(e){console.log(e)})}},{key:"handleTextChange",value:function(e,t){if(e.preventDefault(),this.setState(Object(c.a)({},e.target.name,e.target.value)),"username"===e.target.name){var a=e.target.value;t||this.handleUsernameChange(a)}}},{key:"handleExperienceSelect",value:function(e){var t=[],a=[];if(e){var n,i=Object(H.a)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.push({name:o.value,experience:"Beginner"}),a.push(l.a.createElement("span",{key:o.value},l.a.createElement("label",null,o.value),l.a.createElement("select",{className:"initialcustomization-select",name:o.value,onChange:this.handlePursuitExperienceChange},l.a.createElement("option",{value:"Beginner"},"Beginner"),l.a.createElement("option",{value:"Familiar"},"Familiar"),l.a.createElement("option",{value:"Experienced"},"Experienced"),l.a.createElement("option",{value:"Expert"},"Expert"))))}}catch(r){i.e(r)}finally{i.f()}}this.setState({pursuits:t,experienceSelects:a})}},{key:"handleProfileSubmit",value:function(e){var t=this;if(e.preventDefault(),this.setState({isSubmitting:!0}),this.state.profilePhoto){var a=this.editor.getImage();Promise.all([this.props.firebase.writeBasicUserData(this.state.username,this.state.firstName,this.state.lastName),this.props.firebase.doUsernameUpdate(this.state.username),G.a.canvasToFile(a)]).then(function(e){return Promise.all([Object(G.a)(e[2],{maxWidthOrHeight:250,maxSizeMB:1,fileType:"image/jpeg"}),Object(G.a)(e[2],{maxWidthOrHeight:125,maxSizeMB:1,fileType:"image/jpeg"}),Object(G.a)(e[2],{maxWidthOrHeight:62,maxSizeMB:1,fileType:"image/jpeg"})])}).then(function(e){for(var t=["normal","small","tiny"],a=[],n=0;n<3;n++)a.push(new File([e[n]],t[n],{type:"image/jpeg"}));return a}).then(function(e){var a=new FormData;return a.append("username",t.state.username),a.append("pursuits",JSON.stringify(t.state.pursuits)),a.append("croppedImage",e[0]),a.append("smallCroppedImage",e[1]),a.append("tinyCroppedImage",e[2]),ee.createUserProfile(a)}).then(function(e){t.setState({isSubmitting:!1}),201===e.status&&window.location.reload()}).catch(function(e){t.setState({isSubmitting:!1}),console.log(e)})}else Promise.all([this.props.firebase.writeBasicUserData(this.state.username,this.state.firstName,this.state.lastName),this.props.firebase.doUsernameUpdate(this.state.username)]).then(function(e){var a=new FormData;return a.append("username",t.state.username),a.append("firstName",t.state.firstName),a.append("lastName",t.state.lastName),a.append("pursuits",JSON.stringify(t.state.pursuits)),ee.createUserProfile(a)}).then(function(e){201===e.status?window.location.reload():alert("Something unexpected happen: (",e.status)}).catch(function(e){return console.log(e)})}},{key:"handlePursuitExperienceChange",value:function(e){var t,a=this.state.pursuits,n=Object(H.a)(a);try{for(n.s();!(t=n.n()).done;){var l=t.value;l.name===e.target.name&&(l.experience=e.target.value)}}catch(i){n.e(i)}finally{n.f()}this.setState({pursuits:a})}},{key:"testForSpecialCharacter",value:function(e){return!new RegExp("^[0-9A-Za-z_.]+$").test(e)||/\s/.test(e)}},{key:"handleProfilePhotoChange",value:function(e){this.setState({profilePhoto:e})}},{key:"handleImageDrop",value:function(e){this.setState({profilePhoto:e[0]})}},{key:"setEditorRef",value:function(e){this.editor=e}},{key:"render",value:function(){var e=this,t=""===this.state.username||this.state.isTaken?"Taken":"Available",a=this.state.username!==this.state.username.toLowerCase(),n=a?", But Please Choose Only Lower Case Characters":"",i=this.testForSpecialCharacter(this.state.username),o=i?a?" and No Special Characters Please":", But No Special Characters Please":"",r=this.state,s=r.username,c=r.firstName,u=r.lastName,d=r.pursuits,m=""===s||""===c||""===u||null===d||0===d.length||this.state.isTaken||a||i,h=0!==this.state.pursuits.length?this.state.experienceSelects:l.a.createElement(l.a.Fragment,null);return l.a.createElement("div",{className:"initialcustomization-container"},l.a.createElement("form",{onSubmit:this.handleProfileSubmit},l.a.createElement("h2",null,"Let us know about you!"),l.a.createElement("label",null,"Don't worry this information won't be public if you don't want it to."),l.a.createElement("div",{className:"initialcustomization-content-container"},l.a.createElement("label",null,"Choose a display profile!"),l.a.createElement("input",{key:this.state.imageKey,type:"file",name:"displayPhoto",onChange:function(t){return e.handleProfilePhotoChange(t.target.files[0])}}),this.state.profilePhoto?l.a.createElement(oe,{clearFile:this.clearFile,profilePhoto:this.state.profilePhoto,handleImageDrop:this.handleImageDrop,imageScale:this.state.imageScale,imageRotation:this.state.imageRotation,rotateImage:this.rotateImage,scaleImage:this.scaleImage,setEditorRef:this.setEditorRef}):l.a.createElement("div",{id:"initialcustomization-display-photo-container"})),l.a.createElement("div",{className:"initialcustomization-content-container"},l.a.createElement("label",null,l.a.createElement("p",null,"Choose a username!"),l.a.createElement("p",null,""===this.state.username?"Invalid":t+n+o)),l.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:function(t){return e.handleTextChange(t,m)}}),l.a.createElement("label",null,"First Name"),l.a.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",onChange:this.handleTextChange}),l.a.createElement("label",null,"Last Name"),l.a.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",onChange:this.handleTextChange})),l.a.createElement("div",{className:"initialcustomization-content-container"},l.a.createElement("label",null,"Tell us what you want to pursue or choose one from the list!"),l.a.createElement(q,{name:"pursuits",onSelect:this.handleExperienceSelect}),h,l.a.createElement("button",{disabled:m||this.state.isSubmitting,type:"submit"},"Submit"))))}}]),a}(l.a.Component),ce=D(se),ue=a(156),de=l.a.createContext(null),me=function(e){var t=function(t){Object(p.a)(n,t);var a=Object(g.a)(n);function n(e){var t;return Object(d.a)(this,n),(t=a.call(this,e)).state={authUser:null,isLoading:!1},t}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.listener=this.props.firebase.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t,isLoading:!1}):e.setState({authUser:null,isLoading:!1})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return this.state.isLoading?l.a.createElement("p",null,"Loading ... "):l.a.createElement(de.Provider,{value:this.state.authUser},l.a.createElement(e,this.props))}}]),n}(l.a.Component);return D(t)},he=a(117),pe=function(e){return function(t){var a=function(a){Object(p.a)(i,a);var n=Object(g.a)(i);function i(){return Object(d.a)(this,i),n.apply(this,arguments)}return Object(m.a)(i,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(a){e(a)||t.props.history.push("")})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var a=this;return l.a.createElement(de.Consumer,null,function(n){return e(n)?l.a.createElement(t,a.props):null})}}]),i}(l.a.Component);return Object(he.a)(s.f,D)(a)}},ge=a(166),ve=a(41),fe=function(e){return l.a.createElement(ve.a,{className:e.classStyle,minRows:e.minRows,onChange:function(t){return e.handleTextChange(t.target.value)},value:e.commentText})},be=(a(399),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={overallVoteScore:n.props.score,previousVote:0,isReplyBoxToggled:!1,replyText:""},n.toggleReplyBox=n.toggleReplyBox.bind(Object(h.a)(n)),n.setReplyText=n.setReplyText.bind(Object(h.a)(n)),n.handleVote=n.handleVote.bind(Object(h.a)(n)),n.postReply=n.postReply.bind(Object(h.a)(n)),n.isReplyTextInvalid=n.isReplyTextInvalid.bind(Object(h.a)(n)),n.renderThreadIndicators=n.renderThreadIndicators.bind(Object(h.a)(n)),n.cancelTextInput=n.cancelTextInput.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.likes.includes(this.props.visitorProfilePreviewId)?this.setState({previousVote:1}):this.props.dislikes.includes(this.props.visitorProfilePreviewId)&&this.setState({previousVote:-1})}},{key:"setReplyText",value:function(e){this.setState({replyText:e})}},{key:"toggleReplyBox",value:function(){this.setState(function(e){return{isReplyBoxToggled:!e.isReplyBoxToggled}})}},{key:"handleVote",value:function(e){var t=this,a=this.state.overallVoteScore,n=this.state.previousVote,l=n+e,i=l>-1&&l<1?e:l,o=e,r=e;return(l<-1||l>1)&&(o=0),l<-1&&(r=1),l>1?r=-1:0===l&&(-1===n?r=2:1===n&&(r=-2)),this.setState({overallVoteScore:a+r,previousVote:o}),ee.voteOnComment({visitorProfilePreviewId:this.props.visitorProfilePreviewId,commentId:this.props.commentId,voteValue:i}).then(function(e){console.log(e)}).catch(function(e){console.log(e),console.log("Something went wrong with the server."),t.setState({overallVoteScore:a,previousVote:n})})}},{key:"isReplyTextInvalid",value:function(){return 0===this.state.replyText.replaceAll("\\s+","").length||0===this.state.replyText.length}},{key:"postReply",value:function(){var e=this;if(!this.isReplyTextInvalid()){var t=this.props.ancestors;return t.push(this.props.commentId),ee.postReply({postId:this.props.postId,visitorProfilePreviewId:this.props.visitorProfilePreviewId,ancestors:JSON.stringify(t),comment:this.state.replyText}).then(function(t){alert("Comment added! Refresh the page to see!"),e.toggleReplyBox(!1)})}alert("You need to write something")}},{key:"cancelTextInput",value:function(){this.isReplyTextInvalid()?this.setState({replyText:"",isReplyBoxToggled:!1}):window.confirm("Are you sure you want discard your comment?")&&this.setState({isReplyBoxToggled:!1})}},{key:"renderThreadIndicators",value:function(e){for(var t=[],a=0;a<e;a++)t.push(l.a.createElement("div",{className:"singlecomment-thread-indicator"}));return t}},{key:"render",value:function(){var e=this,t=this.props.level>1?"singlecomment-multiple-thread-style":"";return l.a.createElement("div",{className:t},this.props.level>1?l.a.createElement("div",{className:"singlecomment-thread-indicator-container"},this.renderThreadIndicators(this.props.level-1)):null,l.a.createElement("div",{className:"singlecomment-main-container"},l.a.createElement("div",{className:"singlecomment-header-container"},l.a.createElement("div",{className:"singlecomment-display-photo-container"},l.a.createElement("img",{alt:"Single Comment Display Photo Url",src:Object(Z.returnUserImageURL)(this.props.displayPhoto)})),l.a.createElement("div",{className:"singlecomment-username-container"},l.a.createElement("p",null,this.props.username))),l.a.createElement("div",{className:"singlecomment-body-container"},l.a.createElement("div",{className:"singlecomment-thread-indicator-container"},this.renderThreadIndicators(1)),l.a.createElement("div",{className:"singlecomment-main-content-container"},l.a.createElement("div",{className:"singlecomment-comment-container",key:this.props.commentId,onMouseOver:function(){return e.props.onMouseOver(e.props.commentId)},onMouseOut:function(){return e.props.onMouseOut(e.props.commentId)},onClick:function(){return e.props.onMouseClick(e.props.commentId)}},l.a.createElement("p",null,this.props.commentText)),l.a.createElement("div",{className:"singlecomment-management-container"},l.a.createElement("button",{onClick:function(){return e.handleVote(1)}},"Upvote"),l.a.createElement("p",null,this.state.overallVoteScore),l.a.createElement("button",{onClick:function(){return e.handleVote(-1)}},"Downvote"),l.a.createElement("button",{onClick:function(){return e.toggleReplyBox()}},"Reply")),l.a.createElement("div",null,this.state.isReplyBoxToggled?l.a.createElement(l.a.Fragment,null,l.a.createElement(fe,{classStyle:"",minRows:4,handleTextChange:this.setReplyText,commentText:this.state.replyText}),l.a.createElement("button",{onClick:this.cancelTextInput},"Cancel"),l.a.createElement("button",{onClick:this.postReply},"Reply")):l.a.createElement(l.a.Fragment,null))))))}}]),a}(l.a.Component)),ye=(a(400),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={windowType:n.props.windowType,commentText:"",loadingComments:!0},n.renderCommentSectionType=n.renderCommentSectionType.bind(Object(h.a)(n)),n.renderCommentInput=n.renderCommentInput.bind(Object(h.a)(n)),n.renderCommentThreads=n.renderCommentThreads.bind(Object(h.a)(n)),n.recursiveRenderComments=n.recursiveRenderComments.bind(Object(h.a)(n)),n.handleCommentTextChange=n.handleCommentTextChange.bind(Object(h.a)(n)),n.handleCommentPost=n.handleCommentPost.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.commentIDArray.length>0){if(this.props.visitorUsername)return console.log(this.props.visitorUsername),Promise.all([ee.getComments({params:{rootCommentIdArray:JSON.stringify(this.props.commentIDArray),viewingMode:this.state.windowType}}),ee.getUserPreviewId({params:{username:this.props.visitorUsername}})]).then(function(t){e.setState({visitorProfilePreviewId:t[1].data.userPreviewId,loadingComments:!1},function(){e.props.postType===C?e.props.passAnnotationData(t[0].data.rootComments,t[1].data.userPreviewId):e.props.passAnnotationData(t[0].data.rootComments,null)})});ee.getComments({params:{rootCommentIdArray:JSON.stringify(this.props.commentIDArray),viewingMode:this.state.windowType}}).then(function(t){e.setState({loadingComments:!1},function(){e.props.postType===C?e.props.passAnnotationData(t.data.rootComments,null):e.props.passAnnotationData(t[0].data.rootComments,null)})})}else{if(this.props.visitorUsername)return ee.getUserPreviewId({params:{username:this.props.visitorUsername}}).then(function(t){e.setState({visitorProfilePreviewId:t.data.userPreviewId,loadingComments:!1},function(){e.props.postType===C&&e.props.passAnnotationData(null,t.data.userPreviewId)})});this.setState({loadingComments:!1},function(){e.props.postType===C&&e.props.passAnnotationData(null,null)})}}},{key:"handleCommentTextChange",value:function(e){this.setState({commentText:e})}},{key:"handleCommentPost",value:function(){var e=this,t={visitorProfilePreviewId:this.state.visitorProfilePreviewId,comment:this.state.commentText,postId:this.props.postId,imagePageNumber:0};return ee.postComment(t).then(function(t){var a=t.data.rootCommentIdArray;return ee.refreshComments({params:{rootCommentIdArray:JSON.stringify(a)}}).then(function(t){e.props.onCommentDataInjection(e.props.postIndex,t.data.rootComments,e.props.selectedPostFeedType)})}).then(function(){return alert("Success!")})}},{key:"renderCommentSectionType",value:function(e){if(this.state.loadingComments||!this.props.fullCommentData)return l.a.createElement("div",null,"Loading...");if(e===E)return this.renderCommentThreads(this.props.fullCommentData);if(e===P)return console.log(this.props.fullCommentData),this.renderCommentThreads(this.props.fullCommentData);throw new Error("No viewing modes matched")}},{key:"recursiveRenderComments",value:function(e,t){var a=t+1,n=e.annotation?JSON.parse(e.annotation.data):null,i=e.comment?e.comment:n.text;if(e.replies){var o=[];e.replies.sort(function(e,t){return e.createdAt<t.createdAt?-1:e.createdAt>t.createdAt?1:0});var r,s=Object(H.a)(e.replies);try{for(s.s();!(r=s.n()).done;){var c=r.value;o.push(this.recursiveRenderComments(c,a))}}catch(u){s.e(u)}finally{s.f()}return l.a.createElement("div",null,l.a.createElement(be,{level:a,postId:this.props.postId,visitorProfilePreviewId:this.state.visitorProfilePreviewId,visitorUsername:this.props.visitorUsername,commentId:e._id,ancestors:e.ancestor_post_ids,username:e.username,commentText:i,score:e.score,likes:e.likes,dislikes:e.dislikes,displayPhoto:e.display_photo_key,annotation:n,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,onMouseClick:this.props.onMouseClick}),l.a.createElement("div",{className:"comments-reply-container"},o))}return l.a.createElement(be,{level:a,postId:this.props.postId,visitorProfilePreviewId:this.state.visitorProfilePreviewId,commentId:e._id,ancestors:e.ancestor_post_ids,username:e.username,commentText:i,likes:e.likes,dislikes:e.dislikes,displayPhoto:e.display_photo_key,score:e.score,annotation:n,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,onMouseClick:this.props.onMouseClick})}},{key:"renderCommentThreads",value:function(e){var t,a=[],n=Object(H.a)(e);try{for(n.s();!(t=n.n()).done;){var l=t.value;a.push(this.recursiveRenderComments(l,0))}}catch(i){n.e(i)}finally{n.f()}return a}},{key:"renderCommentInput",value:function(e){return this.props.visitorUsername?l.a.createElement("div",{className:e===E?"comments-collapsed-input-container":"comments-expanded-input-container"},l.a.createElement(fe,{classStyle:e===E?"comments-collapsed-input":"comments-expanded-input",minRows:4,handleTextChange:this.handleCommentTextChange,commentText:this.state.commentText}),l.a.createElement("div",null,l.a.createElement("button",{disabled:0===this.state.commentText.trim().length,onClick:this.handleCommentPost},"Add Comment"),this.props.isImageOnly?l.a.createElement("button",{onClick:this.props.onPromptAnnotation},"Annotate"):null)):l.a.createElement("div",null,l.a.createElement("p",null,"You must sign in before you can leave a comment."))}},{key:"render",value:function(){return this.state.windowType===E?l.a.createElement("div",{className:"comments-main-container"},this.renderCommentSectionType(E),this.renderCommentInput(E)):this.state.windowType===P?l.a.createElement("div",{className:"comments-main-container"},this.renderCommentInput(P),this.renderCommentSectionType(P),l.a.createElement("br",null),l.a.createElement("br",null)):void 0}}]),a}(l.a.Component)),Ee=function(e){var t=new Date(e);return{month:["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],day:t.getDate(),year:t.getFullYear()}},Pe=(a(401),function(e){var t=Object(n.useState)(!1),a=Object(k.a)(t,2),i=a[0],o=a[1],r=e.date?Ee(e.date):null;return l.a.createElement("div",{className:"postheader-main-container"},l.a.createElement("div",{className:"postheader-author-information"},l.a.createElement("div",{className:"postheader-display-photo-container"},l.a.createElement("img",{src:"null"!==e.displayPhoto?Object(Z.returnUserImageURL)(e.displayPhoto):Z.TEMP_PROFILE_PHOTO_URL})),l.a.createElement("div",{className:"postheader-text-information-container"},l.a.createElement("h4",null,e.username),r?l.a.createElement("p",null,r.month,", ",r.day,", ",r.year," "):l.a.createElement(l.a.Fragment,null))),e.isOwnProfile?function(){var t=i?l.a.createElement("div",{id:"postheader-button-pop-up"},l.a.createElement("button",{onClick:e.onDeletePost},"Remove"),l.a.createElement("button",{onClick:function(){return e.onEditClick("EDIT_STATE")}},"Edit")):l.a.createElement(l.a.Fragment,null);return l.a.createElement("div",{id:"postheader-main-button-container"},l.a.createElement("button",{onClick:function(){return o(!i)}},"..."),t)}():null)}),Se=(a(402),function(e){return e.length<1e3?l.a.createElement("div",{id:"tiny-amount-text-container"},l.a.createElement("p",null,e.text)):l.a.createElement("div",{id:"medium-amount-text-container"},l.a.createElement("p",null,e.text))}),Ce=(a(403),function(e){return l.a.createElement("div",null,l.a.createElement("div",{className:"shortpostmetainfo-stat-container"},e.isMilestone?l.a.createElement("p",null,"Milestone :)"):l.a.createElement(l.a.Fragment,null),e.pursuit?l.a.createElement("p",null,e.pursuit):l.a.createElement(l.a.Fragment,null),e.min?l.a.createElement("p",null,e.min," minutes"):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"shortpostmetainfo-text-container"},l.a.createElement("p",null,e.isPaginated&&e.textData?e.textData[e.index]:e.textData)))}),we=(a(404),function(e){return l.a.createElement("div",{className:"textcontainer-main-container"},l.a.createElement("h4",null,e.username),e.validFilesLength>1&&!e.isPaginated?l.a.createElement("button",{onClick:e.onPaginatedChange},"Caption Photos Individually"):l.a.createElement(l.a.Fragment,null),e.validFilesLength>1&&e.isPaginated?l.a.createElement("button",{onClick:e.onPaginatedChange},"Return to Single Caption"):l.a.createElement(l.a.Fragment,null),l.a.createElement(ve.a,{id:"textcontainer-text-input",placeholder:"Write something here.",onChange:function(t){return e.onTextChange(t.target.value)},minRows:10,value:e.isPaginated?e.textPageText[e.imageIndex]:e.textPageText}),l.a.createElement("p",null,e.validFilesLength>1?e.imageIndex+1:null))}),Oe=a(349),ke=a.n(Oe),Ie=function(e){var t=e.className,a=e.style,n=e.onClick;return l.a.createElement("div",{className:t,style:"left"===e.direction?Object(u.a)(Object(u.a)({},a),{},{display:"block",left:"5%",zIndex:"1",color:"brown"}):Object(u.a)(Object(u.a)({},a),{},{display:"block",right:"5%",zIndex:"1"}),onClick:n})},Te=a(161),De=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={annotation:{}},n.onChange=n.onChange.bind(Object(h.a)(n)),n.onSubmit=n.onSubmit.bind(Object(h.a)(n)),n.renderEditor=n.renderEditor.bind(Object(h.a)(n)),n.activeAnnotationComparator=n.activeAnnotationComparator.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"onChange",value:function(e){this.setState({annotation:e})}},{key:"onSubmit",value:function(e){this.setState({annotation:{}},this.props.onAnnotationSubmit(e))}},{key:"renderEditor",value:function(e){var t=e.annotation.geometry;return t?(console.log(t),l.a.createElement("div",{style:{background:"white",borderRadius:3,position:"absolute",zIndex:9999,left:"".concat(t.x,"%"),top:"".concat(t.y+t.height,"%")}},l.a.createElement("div",null,"Custom Editor"),l.a.createElement(ve.a,{onChange:function(t){return e.onChange(Object(u.a)(Object(u.a)({},e.annotation),{},{data:Object(u.a)(Object(u.a)({},e.annotation.data),{},{text:t.target.value})}))}}),l.a.createElement("button",{onClick:e.onSubmit},"Comment"))):null}},{key:"activeAnnotationComparator",value:function(e,t){return e.data.id===t}},{key:"render",value:function(){return l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(Te.a,{src:this.props.imageSource,alt:"Two pebbles anthropomorphized holding hands",annotations:this.props.annotations,activeAnnotationComparator:this.activeAnnotationComparator,activeAnnotations:this.props.activeAnnotations,type:this.state.type,value:this.state.annotation,onChange:this.onChange,onSubmit:this.onSubmit,renderEditor:this.renderEditor}))}}]),a}(l.a.Component),xe=(a(169),a(170),a(223),{className:"slider-settings",speed:500,slidesToShow:1,slidesToScroll:1,centerPadding:0,nextArrow:l.a.createElement(Ie,{direction:"right"}),prevArrow:l.a.createElement(Ie,{direction:"left"})}),je=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={imageArray:null,displayedItemCount:0},n.renderImageContainers=n.renderImageContainers.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._isMounted&&this.setState({imageArray:this.props.imageArray})}},{key:"componentDidUpdate",value:function(e){this.props.imageArray!==e.imageArray&&this.setState({imageArray:this.props.imageArray})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"renderImageContainers",value:function(e){var t=this,a=0;return e?(console.log(this.state.imageArray),this.state.imageArray.map(function(e){return l.a.createElement("div",{className:"imageslider-image-container",key:a++},t.props.disableAnnotations?l.a.createElement("img",{alt:"",key:a++,src:e}):l.a.createElement(De,{imageSource:e,annotations:t.props.annotations,activeAnnotations:t.props.activeAnnotations,onAnnotationSubmit:t.props.onAnnotationSubmit}))})):l.a.createElement("p",null,"IMAGE IS STILL LOADING")}},{key:"render",value:function(){var e=this;return l.a.createElement(ke.a,Object.assign({afterChange:function(t){return e.props.onIndexChange(t)}},xe),this.renderImageContainers(!!this.state.imageArray))}}]),a}(l.a.Component),Re=l.a.memo(je),_e=(a(421),function(e){var t=function(){return l.a.createElement(we,{validFilesLength:e.eventData.image_data.length,isPaginated:e.isPaginated,onPaginatedChange:e.onPaginatedChange,onTextChange:e.onTextChange,textPageText:e.textData,imageIndex:e.imageIndex})};if(e.eventData.image_data.length){var a=e.eventData.image_data,n=[];return e.eventData.image_data.length>0&&(n=(n=a).map(function(e){return Object(Z.returnUserImageURL)(e)}),console.log(n)),l.a.createElement("div",{className:"shortreeditor-main-container"},l.a.createElement("div",{className:"shortreeditor-hero-container"},l.a.createElement(Re,{disableAnnotations:!0,onIndexChange:e.onIndexChange,imageArray:n})),l.a.createElement("div",{className:"shortreeditor-side-container"},t()))}return t()}),Me=(a(422),function(e){var t=Object(n.useState)(e.date),a=Object(k.a)(t,2),i=a[0],o=a[1],r=Object(n.useState)(null),s=Object(k.a)(r,2),c=s[0],u=s[1],d=Object(n.useState)(e.isMilestone),m=Object(k.a)(d,2),h=m[0],p=m[1],g=Object(n.useState)(e.previewTitle),v=Object(k.a)(g,2),f=v[0],b=v[1],y=Object(n.useState)(""),E=Object(k.a)(y,2),P=E[0],S=E[1],O=Object(n.useState)(e.preferredPostType),I=Object(k.a)(O,2),T=I[0],D=I[1],x=Object(n.useState)(e.selectedPursuit?e.selectedPursuit:null),j=Object(k.a)(x,2),R=j[0],_=j[1],M=Object(n.useState)(!1),U=Object(k.a)(M,2),A=U[0],N=U[1],L=Object(n.useState)(!1),F=Object(k.a)(L,2),B=F[0],V=F[1],W=Object(n.useState)(null),K=Object(k.a)(W,2),J=K[0],z=K[1],Y=Object(n.useState)(null!==e.coverPhotoKey&&e.isUpdateToPost),q=Object(k.a)(Y,2),X=q[0],Q=q[1],Z=Object(n.useState)(e.coverPhotoKey),$=Object(k.a)(Z,2),te=$[0],ne=$[1],le=Object(n.useState)(!1),ie=Object(k.a)(le,2),oe=ie[0],re=ie[1],se=Object(n.useState)(0),ce=Object(k.a)(se,2),ue=ce[0],de=ce[1],me=Object(n.useState)(!1),he=Object(k.a)(me,2),pe=he[0],ge=he[1],fe=[],be=function(){Q(!1),!oe&&null!==J&&window.confirm("Are you sure you want to remove your current cover photo?")?(z(null),de(ue+1)):!oe&&window.confirm("Are you sure you want to remove your saved cover photo?")?re(!0):oe&&re(!1)},ye=function(e){return ee.createPost(e).then(function(e){ge(!1),201===e.status?Se():Ce()}).catch(function(e){ge(!1),console.log(e.error),alert(e)})},Ee=function(e){var t,a=Object(H.a)(e.entries());try{for(a.s();!(t=a.n()).done;){var n=t.value;console.log(n[0],",",n[1])}}catch(l){a.e(l)}finally{a.f()}return ee.updatePost(e).then(function(e){console.log(e),ge(!1)}).catch(function(e){console.log(e.error),ge(!1),alert(e)})},Pe=function(){ge(!0);var t=new FormData;if(t.append("displayPhoto",e.displayPhoto),t.append("postType",e.postType),t.append("username",e.username),t.append("isPaginated",e.isPaginated),t.append("isMilestone",h||!1),f&&t.append("title",ae.a.trim(f)),T&&t.append("postPrivacyType",T),R&&t.append("pursuitCategory",R),i&&t.append("date",i),c&&t.append("minDuration",c),P&&t.append("subtitle",ae.a.trim(P)),e.textData&&t.append("textData",e.postType!==C||e.isPaginated?JSON.stringify(e.textData):e.textData),e.imageArray&&e.imageArray.length>0){var a,n=Object(H.a)(e.imageArray);try{for(n.s();!(a=n.n()).done;){var l=a.value;t.append("images",l)}}catch(o){n.e(o)}finally{n.f()}}!function(t,a){if(a===C){if(e.isUpdateToPost)return t.append("postId",e.postId),te?e.coverPhoto||e.coverPhotoKey?(t.append("coverPhoto",e.coverPhoto),Ee(t)):alert("One moment friend, I'm almost done compressing\n                        your photo"):!te&&e.coverPhotoKey?ee.deletePhotoByKey(e.coverPhotoKey).then(function(){return t.append("removeCoverPhoto",!0),Ee(t)}):Ee(t);if(te){if(!e.coverPhoto)return alert("One moment friend, I'm almost\n                                     done compressing your photo");t.append("coverPhoto",e.coverPhoto)}return ye(t)}if(a===w){if(e.isUpdateToPost)return t.append("postId",e.postId),X?J||e.coverPhotoKey?(t.append("coverPhoto",J),Ee(t)):alert("One moment friend, I'm almost \n                                    done compressing your photo"):e.coverPhotoKey&&oe?ee.deletePhotoByKey(e.coverPhotoKey).then(function(){return t.append("removeCoverPhoto",!0),Ee(t)}):Ee(t);if(X){if(!J)return alert("One moment friend, I'm almost \n                                    done compressing your photo");t.append("coverPhoto",J)}ye(t)}}(t,e.postType)},Se=function(){alert("Post Successful! You will see your post soon."),e.closeModal(),window.location.reload()},Ce=function(){N(!1),V(!0)},we=(e.postType,l.a.createElement("div",null,l.a.createElement("h2",null,"Add your metadata!"),l.a.createElement("p",null,"Optional of course"))),Oe=e.postType===w?l.a.createElement(ve.a,{name:"subtitle",id:"review-post-text",placeholder:"Create an Optional Description",onChange:function(e){return S(e.target.value)},maxLength:140}):null;fe.push(l.a.createElement("option",{value:null}));var ke,Ie=Object(H.a)(e.pursuitNames);try{for(Ie.s();!(ke=Ie.n()).done;){var Te=ke.value;fe.push(l.a.createElement("option",{key:Te,value:Te},Te))}}catch(De){Ie.e(De)}finally{Ie.f()}return l.a.createElement("div",{id:"reviewpost-small-window"},l.a.createElement("div",null,l.a.createElement("div",null,we,l.a.createElement("div",null,l.a.createElement("span",null,l.a.createElement("button",{value:e.previousState,onClick:function(t){return function(t){if(e.postType===C)e.setPostStage(t);else{if(e.postType!==w)throw new Error("No value matched for return click.");e.setPostStage(t,!1)}}(t.target.value)}},"Return")))),l.a.createElement("div",{className:"reviewpost-button-container"},l.a.createElement("label",null,"Preview Title"),l.a.createElement(ve.a,{name:"title",placeholder:"Create an Optional Preview Title Text",value:f||null,onChange:function(e){return b(e.target.value)},maxLength:100}),Oe,function(){if(e.postType===C)return e.isUpdateToPost||!e.isUpdateToPost&&e.imageArray?l.a.createElement("div",null,l.a.createElement("label",null,"Use First Image For Thumbnail"),l.a.createElement("input",{type:"checkbox",defaultChecked:te,onChange:function(){ne(!te)}})):null;if(e.postType===w)return l.a.createElement("div",null,e.coverPhotoKey?l.a.createElement("label",null,"Upload New Cover Photo?"):l.a.createElement("label",null,"Upload a Cover Photo"),l.a.createElement("input",{type:"file",key:ue,onChange:function(e){return function(e){if(e)return Q(!0),console.log(e),Object(G.a)(e,{maxSizeMB:.5,maxWidthOrHeight:250}).then(function(e){z(new File([e],"Cover"))})}(e.target.files[0])}}),e.coverPhotoKey||X?l.a.createElement("button",{onClick:be},oe?"Keep Saved Cover Photo":"Remove Existing Cover Photo"):null);throw new Error("No Post Types Matched for Cover Photo Controls")}(),l.a.createElement("label",null,"Date"),l.a.createElement("input",{type:"date",value:i,onChange:function(e){return o(e.target.value)}}),l.a.createElement("label",null,"Pursuit"),l.a.createElement("select",{name:"pursuit-category",value:R,onChange:function(e){return _(e.target.value)}},fe),l.a.createElement("label",null,"Total Minutes"),l.a.createElement("input",{type:"number",value:e.min,onChange:function(e){return u(e.target.value)}}),l.a.createElement("label",null,"Is Milestone"),l.a.createElement("input",{type:"checkbox",value:h,onClick:function(){return p(!h)}})),l.a.createElement("div",{className:"reviewpost-button-container"},l.a.createElement("p",null,"Post to:"),l.a.createElement("div",null,l.a.createElement("select",{name:"posts",id:"cars",value:e.preferredPostType?e.preferredPostType:"PUBLIC_FEED",onChange:function(e){return D(e.target.value)}},l.a.createElement("option",{value:"PRIVATE"},"Make post private on your page"),l.a.createElement("option",{value:"PERSONAL_PAGE"},"Make post public on your page:"),l.a.createElement("option",{value:"PUBLIC_FEED"},"Post to your feed and page"))),l.a.createElement("button",{onClick:function(e){return Pe()},disabled:pe},e.isUpdateToPost?pe?"Updating!":"Update!":pe?"Posting!":"Post!")),B?l.a.createElement("p",null,"An Error Occured. Please try again. "):l.a.createElement(l.a.Fragment,null),A?l.a.createElement("div",null,"  ",l.a.createElement("p",null," Loading..."),"  "):l.a.createElement(l.a.Fragment,null)))}),Ue=(a(423),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={annotation:{}},n.activeAnnotationComparator=n.activeAnnotationComparator.bind(Object(h.a)(n)),n.onAnnotationChange=n.onAnnotationChange.bind(Object(h.a)(n)),n.onAnnotationSubmit=n.onAnnotationSubmit.bind(Object(h.a)(n)),n.renderEditor=n.renderEditor.bind(Object(h.a)(n)),n.renderPromptOverlay=n.renderPromptOverlay.bind(Object(h.a)(n)),n.renderImageControls=n.renderImageControls.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"onAnnotationChange",value:function(e){this.setState({annotation:e})}},{key:"onAnnotationSubmit",value:function(e){this.setState({annotation:{}},this.props.onAnnotationSubmit(e))}},{key:"renderEditor",value:function(e){var t=e.annotation.geometry;return t?l.a.createElement("div",{style:{background:"white",borderRadius:3,position:"absolute",zIndex:9999,left:"".concat(t.x,"%"),top:"".concat(t.y+t.height,"%")}},l.a.createElement("div",null,"Custom Editor"),l.a.createElement(ve.a,{onChange:function(t){return e.onChange(Object(u.a)(Object(u.a)({},e.annotation),{},{data:Object(u.a)(Object(u.a)({},e.annotation.data),{},{text:t.target.value})}))}}),l.a.createElement("button",{onClick:e.onSubmit},"Comment")):null}},{key:"renderPromptOverlay",value:function(){return l.a.createElement("div",{style:{background:"rgba(0, 0, 0, 0.3)",color:"white",padding:5,pointerEvents:"none",position:"absolute",top:5,left:5}},"Click and Drag to create an annotation!")}},{key:"activeAnnotationComparator",value:function(e,t){return e.data.id===t}},{key:"renderImageControls",value:function(e){var t=this;return l.a.createElement("div",null,this.props.imageArray.length>1?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{onClick:function(){return t.props.handleArrowPress(-1)}},"Previous"),l.a.createElement("button",{onClick:function(){return t.props.handleArrowPress(1)}},"Next")):null,e===P?l.a.createElement("button",{onClick:this.props.toggleAnnotations},this.props.areAnnotationsHidden?"Show Annotations":"Hide Annotations"):l.a.createElement(l.a.Fragment,null))}},{key:"render",value:function(){var e=this.props.hideAnnotations||this.props.annotateButtonPressed?[]:this.props.annotations;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"customimageslider-hero-container"},l.a.createElement(Te.a,{src:this.props.imageArray[this.props.imageIndex],alt:"Image Display Goes Here",activeAnnotations:this.props.activeAnnotations,annotations:e,disableOverlay:this.props.hideAnnotations||!this.props.visitorProfilePreviewId,disableAnnotation:this.props.windowType===E||!this.props.visitorProfilePreviewId,value:this.state.annotation,renderEditor:this.renderEditor,activeAnnotationComparator:this.activeAnnotationComparator,onChange:this.onAnnotationChange,onSubmit:this.onAnnotationSubmit})),this.props.showPromptOverlay?l.a.createElement("p",null,"Click on a point in the image and drag!"):null,this.renderImageControls(this.props.windowType))}}]),a}(l.a.Component)),Ae=(a(424),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={annotations:null,activeAnnotations:[],fullCommentData:[],visitorProfilePreviewId:"",areAnnotationsHidden:!0,selectedAnnotationIndex:null,imageIndex:0,selectedFiles:[],validFiles:[],unsupportedFiles:[],showPromptOverlay:!1,date:n.props.eventData.date,min:n.props.eventData.min_duration,pursuitCategory:n.props.eventData.pursuit_category,isPaginated:n.props.eventData.is_paginated,isMilestone:n.props.eventData.is_milestone,postDisabled:!0,window:b,tempTextForEdit:n.props.textData},n.heroRef=l.a.createRef(),n.toggleAnnotations=n.toggleAnnotations.bind(Object(h.a)(n)),n.passAnnotationData=n.passAnnotationData.bind(Object(h.a)(n)),n.returnValidAnnotations=n.returnValidAnnotations.bind(Object(h.a)(n)),n.retrieveThumbnail=n.retrieveThumbnail.bind(Object(h.a)(n)),n.renderComments=n.renderComments.bind(Object(h.a)(n)),n.renderImageSlider=n.renderImageSlider.bind(Object(h.a)(n)),n.handleArrowPress=n.handleArrowPress.bind(Object(h.a)(n)),n.handlePromptAnnotation=n.handlePromptAnnotation.bind(Object(h.a)(n)),n.handleMouseOver=n.handleMouseOver.bind(Object(h.a)(n)),n.handleMouseOut=n.handleMouseOut.bind(Object(h.a)(n)),n.handleMouseClick=n.handleMouseClick.bind(Object(h.a)(n)),n.handleAnnotationSubmit=n.handleAnnotationSubmit.bind(Object(h.a)(n)),n.handleWindowChange=n.handleWindowChange.bind(Object(h.a)(n)),n.handleIndexChange=n.handleIndexChange.bind(Object(h.a)(n)),n.handleTextChange=n.handleTextChange.bind(Object(h.a)(n)),n.handlePaginatedChange=n.handlePaginatedChange.bind(Object(h.a)(n)),n.handleModalLaunch=n.handleModalLaunch.bind(Object(h.a)(n)),n.handleCommentDataInjection=n.handleCommentDataInjection.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){for(var e=[],t=0;t<this.props.eventData.image_data.length;t++)e.push([]);this.setState({annotations:e})}},{key:"toggleAnnotations",value:function(){this.state.areAnnotationsHidden?this.setState({areAnnotationsHidden:!1,annotateButtonPressed:!1}):this.setState({areAnnotationsHidden:!0,selectedAnnotationIndex:null,annotateButtonPressed:!1})}},{key:"passAnnotationData",value:function(e,t){var a=this.state.annotations;if(e){var n,l=Object(H.a)(e);try{for(l.s();!(n=l.n()).done;){var i=n.value;if(i.annotation){var o=JSON.parse(i.annotation.data),r=JSON.parse(i.annotation.geometry);a[i.annotation.image_page_number].push({geometry:r,data:Object(u.a)(Object(u.a)({},o),{},{id:i._id})})}}}catch(s){l.e(s)}finally{l.f()}}this.setState({fullCommentData:e||[],annotations:a,visitorProfilePreviewId:t})}},{key:"returnValidAnnotations",value:function(){if(this.state.annotations){var e=this.state.annotations[this.state.imageIndex];return null!==this.state.selectedAnnotationIndex?[e[this.state.selectedAnnotationIndex]]:e}return[]}},{key:"renderComments",value:function(e){if(e===P){var t=!!this.props.eventData.image_data.length;return l.a.createElement(ye,{postType:C,commentIDArray:this.props.eventData.comments,fullCommentData:this.state.fullCommentData,isImageOnly:t,windowType:e,visitorUsername:this.props.visitorUsername,postId:this.props.postId,postIndex:this.props.postIndex,onCommentIDInjection:this.props.onCommentIDInjection,onCommentDataInjection:this.handleCommentDataInjection,selectedPostFeedType:this.props.selectedPostFeedType,onPromptAnnotation:this.handlePromptAnnotation,passAnnotationData:this.passAnnotationData,onMouseClick:this.handleMouseClick,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut})}if(e===E)return l.a.createElement("p",null,this.props.eventData.comment_count," Comments")}},{key:"renderImageSlider",value:function(e){var t=this.returnValidAnnotations(),a=this.props.largeViewMode?"shortpostviewer-large-hero-image-container":"shortpostviewer-inline-hero-container",n=this.props.eventData.image_data.map(function(e,t){return Object(Z.returnUserImageURL)(e)});return this.state.annotations?l.a.createElement("div",{className:a},l.a.createElement(Ue,{windowType:e,hideAnnotations:this.state.areAnnotationsHidden,imageArray:n,annotations:t,activeAnnotations:this.state.activeAnnotations,imageIndex:this.state.imageIndex,showPromptOverlay:this.state.showPromptOverlay,annotateButtonPressed:this.state.annotateButtonPressed,areAnnotationsHidden:this.state.areAnnotationsHidden,onAnnotationSubmit:this.handleAnnotationSubmit,toggleAnnotations:this.toggleAnnotations,handleArrowPress:this.handleArrowPress,visitorProfilePreviewId:this.state.visitorProfilePreviewId})):l.a.createElement(l.a.Fragment,null)}},{key:"handleArrowPress",value:function(e){var t=this.state.imageIndex+e;return t===this.state.annotations.length?this.setState({imageIndex:0,selectedAnnotationIndex:null}):-1===t?this.setState({imageIndex:this.state.annotations.length-1,selectedAnnotationIndex:null}):this.setState({imageIndex:t,selectedAnnotationIndex:null})}},{key:"handleCommentDataInjection",value:function(e,t,a){var n=this,l=this.props.eventData.comments,i=t[t.length-1]._id;l.push(i),this.setState({fullCommentData:t},function(){console.log("line225"),console.log(n.props.postIndex),null!==n.props.postIndex&&n.props.onCommentIDInjection(e,l,a)})}},{key:"handlePromptAnnotation",value:function(){this.heroRef.current.scrollIntoView({block:"center"}),this.setState({areAnnotationsHidden:!1,annotateButtonPressed:!0})}},{key:"handleMouseOver",value:function(e){this.setState({activeAnnotations:[].concat(Object(ge.a)(this.state.activeAnnotations),[e])})}},{key:"handleMouseOut",value:function(e){var t=this.state.activeAnnotations.indexOf(e);this.setState({activeAnnotations:[].concat(Object(ge.a)(this.state.activeAnnotations.slice(0,t)),Object(ge.a)(this.state.activeAnnotations.slice(t+1)))})}},{key:"handleMouseClick",value:function(e){var t,a=0,n=Object(H.a)(this.state.annotations);try{for(n.s();!(t=n.n()).done;){var l=t.value;if(l.length>0){var i,o=0,r=Object(H.a)(l);try{for(r.s();!(i=r.n()).done;){if(i.value.data.id===e)return this.setState({imageIndex:a,selectedAnnotationIndex:o,areAnnotationsHidden:!1},this.heroRef.current.scrollIntoView({block:"center"}));o++}}catch(s){r.e(s)}finally{r.f()}}a++}}catch(s){n.e(s)}finally{n.f()}}},{key:"handleAnnotationSubmit",value:function(e){var t=this,a=e.geometry,n=e.data,l={postId:this.props.eventData._id,visitorProfilePreviewId:this.state.visitorProfilePreviewId,imagePageNumber:this.state.imageIndex,annotationData:JSON.stringify(n),annotationGeometry:JSON.stringify(a)};ee.postComment(l).then(function(e){var l=e.data.rootCommentIdArray,i=e.data.newRootComment,o=t.state.annotations[t.state.imageIndex].concat({geometry:a,data:Object(u.a)(Object(u.a)({},n),{},{id:l[0]})}),r=t.state.annotations,s=t.state.fullCommentData;return s.push(i),r[t.state.imageIndex]=o,t.setState({annotations:r,commentArray:l,fullCommentData:s,annotateButtonPressed:!1})}).catch(function(e){console.log(e),alert("Sorry, your annotation could not be added.")})}},{key:"handleWindowChange",value:function(e){"EDIT_STATE"!==e||this.props.eventData.cover_photo_key||this.retrieveThumbnail(),this.setState({window:e})}},{key:"handleIndexChange",value:function(e){this.setState({imageIndex:e})}},{key:"handleTextChange",value:function(e){var t=this.state.tempTextForEdit;this.state.isPaginated?t[this.state.imageIndex]=e:t=e,this.setState({tempTextForEdit:t})}},{key:"handlePaginatedChange",value:function(){if(!1===this.state.isPaginated){var e=this.props.eventData.image_data.length,t=[];t.push(this.state.tempTextForEdit);for(var a=1;a<e;a++)t.push([]);this.setState({tempTextForEdit:t,isPaginated:!0})}else if(window.confirm("Switching back will remove all your captions except \n                                for the first one. Keep going?")){var n=this.state.tempTextForEdit[0];this.setState({tempTextForEdit:n,isPaginated:!1})}}},{key:"handleModalLaunch",value:function(){if(!this.props.isPostOnlyView)return this.props.passDataToModal(this.props.eventData,C,this.props.postIndex)}},{key:"retrieveThumbnail",value:function(){var e=this;if(this.props.eventData.image_data)return ee.returnImage(this.props.eventData.image_data[0]).then(function(e){return fetch(e.data.image)}).then(function(e){return e.blob()}).then(function(e){var t=new File([e],"Thumbnail",{type:e.type});return Object(G.a)(t,{maxSizeMB:.5,maxWidthOrHeight:250})}).then(function(t){return e.setState({coverPhoto:t})})}},{key:"render",value:function(){var e=this;if(this.state.window===b)return this.props.eventData.image_data.length?this.props.largeViewMode?l.a.createElement("div",{className:"shortpostviewer-window"},l.a.createElement("div",{id:"shortpostviewer-large-main-container",className:"with-image"},this.renderImageSlider(P),l.a.createElement("div",{className:"shortpostviewer-large-side-container",ref:this.heroRef},l.a.createElement(Pe,{isOwnProfile:this.props.isOwnProfile,username:this.props.eventData.username,date:this.state.date,displayPhoto:this.props.eventData.display_photo_key,onEditClick:this.handleWindowChange,onDeletePost:this.props.onDeletePost}),l.a.createElement(Ce,{index:this.state.imageIndex,isPaginated:this.state.isPaginated,isMilestone:this.state.isMilestone,pursuit:this.state.pursuitCategory,min:this.state.min,textData:this.props.textData}))),this.renderComments(P)):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"shortpostviewer-inline-main-container",className:"with-image",onClick:this.handleModalLaunch},l.a.createElement(Pe,{isOwnProfile:this.props.isOwnProfile,username:this.props.eventData.username,date:this.state.date,displayPhoto:this.props.eventData.display_photo_key}),this.renderImageSlider(E),l.a.createElement("div",{className:"shortpostviewer-inline-side-container"},l.a.createElement(Ce,{index:this.state.imageIndex,isPaginated:this.state.isPaginated,isMilestone:this.state.isMilestone,pursuit:this.state.pursuitCategory,min:this.state.min,textData:this.props.textData}))),this.renderComments(E)):this.props.largeViewMode?l.a.createElement("div",{className:"shortpostviewer-window"},l.a.createElement("div",{id:"shortpostviewer-large-main-container"},l.a.createElement("div",{className:"shortpostviewer-large-hero-text-container"},l.a.createElement(Se,{text:this.props.textData})),l.a.createElement("div",{className:"shortpostviewer-large-side-container"},l.a.createElement(Pe,{isOwnProfile:this.props.isOwnProfile,username:this.props.eventData.username,date:this.state.date,displayPhoto:this.props.eventData.display_photo_key,onEditClick:this.handleWindowChange,onDeletePost:this.props.onDeletePost}),l.a.createElement(Ce,{index:this.state.imageIndex,isMilestone:this.state.isMilestone,pursuit:this.state.pursuitCategory,min:this.state.min,textData:null}))),this.renderComments(P)):l.a.createElement("div",{onClick:this.handleModalLaunch},l.a.createElement("div",{className:"shortpostviewer-inline-main-container"},l.a.createElement("div",{className:"shortpostviewer-inline-hero-container"},l.a.createElement(Pe,{isOwnProfile:this.props.isOwnProfile,username:this.props.eventData.username,date:this.state.date,displayPhoto:this.props.eventData.display_photo_key}),l.a.createElement(Se,{text:this.props.textData})),l.a.createElement("div",{className:"shortpostviewer-inline-side-container"},l.a.createElement(Ce,{index:this.state.imageIndex,isPaginated:this.state.isPaginated,isMilestone:this.state.isMilestone,pursuit:this.state.pursuitCategory,min:this.state.min,textData:null}))),this.renderComments(E));if("EDIT_STATE"===this.state.window)return l.a.createElement("div",{className:"shortpostviewer-window"},l.a.createElement("h4",null,"Edit your Post!"),l.a.createElement("div",{className:"shortpostviewer-button-container"},l.a.createElement("button",{onClick:function(){return e.handleWindowChange(b)}},"Return"),l.a.createElement("button",{onClick:function(){return e.handleWindowChange("REVIEW_STATE")}},"Review Post")),l.a.createElement(_e,{imageIndex:this.state.imageIndex,eventData:this.props.eventData,textData:this.state.tempTextForEdit,isPaginated:this.state.isPaginated,onIndexChange:this.handleIndexChange,onTextChange:this.handleTextChange,onPaginatedChange:this.handlePaginatedChange}));if("REVIEW_STATE"===this.state.window){var t=null;return this.props.eventData.date&&(t=new Date(this.props.eventData.date).toISOString().substring(0,10)),l.a.createElement(Me,{isUpdateToPost:!0,previousState:"EDIT_STATE",postId:this.props.eventData._id,displayPhoto:this.props.visitorDisplayPhoto,coverPhoto:this.state.coverPhoto,coverPhotoKey:this.props.eventData.cover_photo_key?this.props.eventData.cover_photo_key:null,isPaginated:this.state.isPaginated,isMilestone:this.props.eventData.is_milestone,previewTitle:this.props.eventData.title,previewSubtitle:this.props.eventData.subtitle,date:t,min:this.props.eventData.min_duration,selectedPursuit:this.props.eventData.pursuit_category,pursuitNames:this.props.pursuitNames,closeModal:this.props.closeModal,postType:C,textData:this.state.tempTextForEdit,username:this.props.visitorUsername,preferredPostType:this.props.preferredPostType,handlePreferredPostTypeChange:this.handlePreferredPostTypeChange,setPostStage:this.handleWindowChange})}throw new Error("No stage matched")}}]),a}(l.a.Component)),Ne=a(92),Le=a.n(Ne),Fe=a(162),Be=a(160),Ve=(a(806),D(function(e){var t=Object(n.useState)(0),a=Object(k.a)(t,2),i=a[0],o=a[1],r=Object(n.useState)(b),s=Object(k.a)(r,2),c=s[0],u=s[1],d=Object(n.useState)(e.textData),m=Object(k.a)(d,2),h=m[0],p=m[1],g=Object(n.useState)(e.textData),v=Object(k.a)(g,2),f=v[0],y=v[1],S=Object(n.useState)([]),C=Object(k.a)(S,2),O=C[0],I=C[1],T=function(t){t===b&&(p(e.textData),o(i+1)),u(t)},D=function(t,a,n){var l=e.eventData.comments,i=a[a.length-1]._id;l.push(i),I(a),null!==e.postIndex&&e.onCommentIDInjection(t,l,n)},x=function(e){I(e||[])},j=function(t){return t===P?l.a.createElement(ye,{postType:w,fullCommentData:O,commentIDArray:e.eventData.comments,windowType:t,visitorUsername:e.visitorUsername,postId:e.postId,postIndex:e.postIndex,onCommentIDInjection:e.onCommentIDInjection,selectedPostFeedType:e.selectedPostFeedType,onCommentDataInjection:D,passAnnotationData:x}):t===E?l.a.createElement("p",null,e.eventData.comment_count," Comments"):void 0};if(c===b){var R=["January","February","March","April","May","June","July","August","September","October","November","December"],_=e.title,M=e.eventData.date?new Date(e.eventData.date):null,U=Object(Z.returnUserImageURL)(e.eventData.cover_photo_key);return e.largeViewMode?l.a.createElement("div",{className:e.isPostOnlyView?"":"longpostviewer-window"},l.a.createElement("div",{className:"longpostviewer-meta-info-container"},l.a.createElement("div",null,l.a.createElement("div",{id:"longpostviewer-top-title-bar"},l.a.createElement("h1",{id:"longpostviewer-title"},_||""),e.isOwnProfile?l.a.createElement("div",{className:"longpostviewer-button-container"},l.a.createElement("button",{onClick:function(){return T("EDIT_STATE")}},"Edit"),l.a.createElement("button",{onClick:e.onDeletePost},"Remove")):l.a.createElement(l.a.Fragment,null)),e.eventData.subtitle?l.a.createElement("h4",{id:"longpostviewer-subtitle"},e.eventData.subtitle):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{className:"longpostviewer-author-info-container"},l.a.createElement("div",null,l.a.createElement("img",{className:"longpostviewer-display-photo",src:Object(Z.returnUserImageURL)(e.eventData.display_photo_key)}),e.eventData.date?l.a.createElement("p",null,R[M.getMonth()],M.getDate()+1,",",M.getFullYear()):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"longpostviewer-author-info"},l.a.createElement("h4",null,e.username),e.eventData.pursuit_category?l.a.createElement("p",null,"For ",e.eventData.pursuit_category):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"longpostviewer-stats-container"},e.eventData.is_milestone?l.a.createElement("p",null,"Milestone :)"):l.a.createElement(l.a.Fragment,null),e.eventData.min_duration?l.a.createElement("p",null,e.eventData.min_duration," minutes"):l.a.createElement(l.a.Fragment,null))))),l.a.createElement("div",{className:"longpostviewer-editor-container"},l.a.createElement(Le.a,{key:i,content:e.textData,read_only:!0})),j(P)):l.a.createElement("div",{onClick:function(){if(!e.isPostOnlyView)return e.passDataToModal(e.eventData,w,e.postIndex)}},l.a.createElement(Pe,{isOwnProfile:e.isOwnProfile,username:e.username,displayPhoto:e.eventData.display_photo_key}),l.a.createElement("div",null,_?l.a.createElement("h2",null,_):l.a.createElement(l.a.Fragment,null),e.eventData.subtitle?l.a.createElement("h4",null,e.eventData.subtitle):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"longpostviewer-stats-container"},e.eventData.is_milestone?l.a.createElement("p",null,"Milestone :)"):l.a.createElement(l.a.Fragment,null),e.eventData.date?l.a.createElement("p",null,R[M.getMonth()],M.getDate()+1,",",M.getFullYear()):l.a.createElement(l.a.Fragment,null),e.eventData.pursuit_category?l.a.createElement("p",null,e.eventData.pursuit_category):l.a.createElement(l.a.Fragment,null),e.eventData.min_duration?l.a.createElement("p",null,e.eventData.min_duration," minutes"):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{id:"longpostviewer-inline-editor-container",className:"longpostviewer-editor-container"},e.eventData.cover_photo_key?l.a.createElement("img",{alt:"cover photo",className:"longpostviewer-cover-photo",src:U}):l.a.createElement(l.a.Fragment,null),l.a.createElement(Le.a,{key:i,content:e.textData,read_only:!0})),j(E))}if("EDIT_STATE"===c)return l.a.createElement("div",{className:"longpostviewer-window"},l.a.createElement("div",{className:"longpostviewer-button-container"},e.isOwnProfile?l.a.createElement("button",{onClick:function(){y(e.textData),p(e.textData),T(b)}},"Cancel Edit"):l.a.createElement(l.a.Fragment,null),e.isOwnProfile?l.a.createElement("button",{onClick:function(){y(h),T("REVIEW_STATE")}},"Review"):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"longpostviewer-editor-container"},l.a.createElement(Le.a,{key:i,onChange:function(e){p(e.emitSerializedOutput())},content:f,default_wrappers:[{className:"my-custom-h1",block:"header-one"},{className:"my-custom-h2",block:"header-two"},{className:"my-custom-h3",block:"header-three"}],widgets:[Object(Fe.a)({options:{upload_url:Z.IMAGE_BASE_URL,upload_callback:function(e,t){alert("file uploaded: "+e.data.url)},upload_error_callback:function(e,t){alert("Failed to Upload Image")}}}),Object(Be.a)()]})));var A=null;return e.eventData.date&&(A=new Date(e.eventData.date).toISOString().substring(0,10)),l.a.createElement(Me,{isUpdateToPost:!0,previousState:"EDIT_STATE",displayPhoto:e.visitorDisplayPhoto,coverPhotoKey:e.eventData.cover_photo_key?e.eventData.cover_photo_key:null,isPaginated:!1,textData:f,closeModal:e.closeModal,postType:w,setPostStage:u,username:e.visitorUsername,preferredPostType:e.preferredPostType,pursuitNames:e.pursuitNames,handlePreferredPostTypeChange:e.handlePreferredPostTypeChange,postId:e.eventData._id,isMilestone:e.eventData.is_milestone,previewTitle:e.eventData.title,previewSubtitle:e.eventData.subtitle,coverPhoto:e.eventData.cover_photo_url,date:A,min:e.eventData.min_duration,selectedPursuit:e.eventData.pursuit_category,onClick:function(){return T("EDIT_STATE")}})})),We=D(function(e){var t,a=function(){return console.log(e.targetProfileId),console.log(e.targetIndexUserId),console.log(e.eventData._id),ee.deletePost(e.targetProfileId,e.targetIndexUserId,e.eventData._id).then(function(e){return console.log(e)}).catch(function(e){console.log(e),alert("Something went wrong during deletion")})},n=function(){if(e.eventData.image_data.length){var t=e.eventData.image_data;return e.eventData.cover_photo_key&&t.push(e.eventData.cover_photo_key),ee.deleteManyPhotosByKey(t).then(function(e){return a()})}return a()},i=e.eventData.username===e.visitorUsername,o=e.textData&&e.eventData.isPaginated?JSON.parse(e.textData):e.textData;switch(e.eventData.post_format){case C:return l.a.createElement(Ae,{postId:e.eventData._id,postIndex:e.postIndex,displayPhoto:e.visitorDisplayPhoto,visitorUsername:e.visitorUsername,pursuitNames:e.pursuitNames,preferredPostType:e.preferredPostType,textData:o,largeViewMode:e.largeViewMode,isOwnProfile:i,isPostOnlyView:e.isPostOnlyView,eventData:e.eventData,onDeletePost:n,closeModal:e.closeModal,passDataToModal:e.passDataToModal,onCommentIDInjection:e.onCommentIDInjection,selectedPostFeedType:e.selectedPostFeedType});case w:var r=e.eventData.title,s=r&&r===function(e){var t=e.blocks[0],a="header-one"===t.type||"header-two"===t.type||"header-three"===t.type;return t&&a?e.blocks[0].text:null}(e.textData)?((t=e.textData).blocks=t.blocks.splice(1),t):e.textData;return l.a.createElement(Ve,{postId:e.eventData._id,postIndex:e.postIndex,displayPhoto:e.visitorDisplayPhoto,visitorUsername:e.visitorUsername,pursuitNames:e.pursuitNames,preferredPostType:e.preferredPostType,largeViewMode:e.largeViewMode,title:r,textData:s,isOwnProfile:i,isPostOnlyView:e.isPostOnlyView,eventData:e.eventData,onDeletePost:n,closeModal:e.closeModal,passDataToModal:e.passDataToModal,onCommentIDInjection:e.onCommentIDInjection,selectedPostFeedType:e.selectedPostFeedType});default:throw new Error("No content type matched in event-modal.js")}}),He=(a(807),function(e){var t=e.post,a=t.date?Ee(t.date):null,n=l.a.createElement("div",{className:"shortevent-text-container"},t.title?l.a.createElement("h4",null,t.title):l.a.createElement(l.a.Fragment,null),t.pursuit_category?l.a.createElement("p",null,t.pursuit_category,t.is_milestone?" MileStone":" Progress"):l.a.createElement(l.a.Fragment,null),a?l.a.createElement("p",null,a.month,", ",a.day,", ",a.year," "):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{className:"shortevent-comment-text-container"},l.a.createElement("p",{className:"shortevent-comment-text"},e.commentCount," Comments")));if(t.cover_photo_key)return l.a.createElement("div",null,l.a.createElement("div",{className:"shortevent-with-cover-photo-container"},l.a.createElement("img",{alt:"short event cover photo",className:"shortevent-cover-photo",src:t.cover_photo_key?Object(Z.returnUserImageURL)(t.cover_photo_key):Object(Z.returnUserImageURL)(t.image_data[0])})),n);var i=t.is_paginated?JSON.parse(t.text_snippet)[0]:t.text_snippet;return l.a.createElement("div",null,l.a.createElement("div",{className:"shortevent-no-cover-photo-container"},l.a.createElement("p",null,i)),n)}),Ge=(a(808),function(e){if(void 0===e.post.text_data)return l.a.createElement(l.a.Fragment,null);var t=e.post,a=t.date?Ee(t.date):null,n=t.text_snippet,i=l.a.createElement("img",{alt:"Cover Photo",className:"longevent-cover-photo",src:Object(Z.returnUserImageURL)(t.cover_photo_key)});return l.a.createElement("div",null,l.a.createElement("div",{className:t.cover_photo_key?"longevent-with-cover-photo-container":"longevent-no-cover-photo-container"},t.cover_photo_key?i:l.a.createElement("p",null,n)),l.a.createElement("div",{className:"longevent-text-container"},l.a.createElement("h4",{className:"longevent-title-container"},t.title?t.title:null),t.pursuit_category?l.a.createElement("p",null,t.pursuit_category,t.is_milestone?" MileStone":" Progress"):l.a.createElement(l.a.Fragment,null),t.subtitle?l.a.createElement("p",{className:"longevent-subtitle-container"},t.subtitle):l.a.createElement(l.a.Fragment,null),a?l.a.createElement("p",null,a.month,", ",a.day,", ",a.year," "):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{className:"longevent-comment-container"},l.a.createElement("p",null,e.commentCount," Comments"))))}),Ke=function(e){var t=e.post;return l.a.createElement("div",null,l.a.createElement("div",{className:"event-cover-container"},t.cover_photo_key?l.a.createElement("img",{alt:"event cover photo",className:"event-cover-photo",src:Object(Z.returnUserImageURL)(t.cover_photo_key)}):l.a.createElement("p",{className:"no-select"})),l.a.createElement("h4",{className:"event-title-container"},t.title?t.title:t.pursuit_category),t.overview?l.a.createElement("h6",{className:"event-overview-container"},t.overview):l.a.createElement(l.a.Fragment,null))},Je=(a(809),function(e){switch(e){case 0:return"event-first-container";case 1:case 2:return"event-middle-container";case 3:return"event-last-container";default:throw new Error("Element Index in Timeline Event is incorrect: ",e)}}),ze=function(e){var t=e.eventData,a=null,n=function(a){return e.newProjectView?l.a.createElement("input",{type:"checkbox",defaultChecked:e.isSelected,onClick:function(a){return e.onProjectEventSelect(t,a.target.value)}}):l.a.createElement(l.a.Fragment,null)};if(e.mediaType===y){switch(t.post_format){case C:a=l.a.createElement(He,{post:t,commentCount:t.comment_count});break;case w:a=l.a.createElement(Ge,{post:t,commentCount:t.comment_count});break;default:throw Error("No matching post type: "+t.post_format)}return e.isRecentEvents?l.a.createElement("div",{className:"event-middle-container"},l.a.createElement("div",{onClick:function(){e.disableModalPreview?console.log("Selected, but disabled"):e.onEventClick(t,e.index)}},a),n()):l.a.createElement("div",{className:null!==e.columnIndex?Je(e.columnIndex):"event-middle-container"},l.a.createElement("div",{onClick:e.disableModalPreview?function(){return console.log("Selected")}:function(){return e.onEventClick(t,e.eventIndex,e.columnIndex)}},a),n())}if("PROJECT"===e.mediaType)return a=l.a.createElement(Ke,{post:t}),l.a.createElement("div",{className:null!==e.columnIndex?Je(e.columnIndex):"event-middle-container"},l.a.createElement("div",{onClick:e.disableModalPreview?function(){return console.log("Selected")}:function(){return e.onProjectClick(t)}},a),n());throw new Error("No props.mediaType matched")},Ye=(a(810),void 0),qe=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={username:n.props.firebase.returnUsername(),firstName:null,lastName:null,pursuits:null,pursuitNames:null,croppedDisplayPhoto:null,smallCroppedDisplayPhoto:null,indexUserDataId:null,fullUserDataId:null,preferredPostType:null,followedUserPostIDs:[],isMoreFollowedUserPosts:!0,fixedDataLoadLength:4,nextOpenPostIndex:0,feedData:[],isModalShowing:!1,selectedEvent:null,textData:"",recentPosts:null,recentPostsKey:0},n.modalRef=l.a.createRef(),n.handlePursuitClick=n.handlePursuitClick.bind(Object(h.a)(n)),n.handleRecentWorkClick=n.handleRecentWorkClick.bind(Object(h.a)(n)),n.handleEventClick=n.handleEventClick.bind(Object(h.a)(n)),n.openModal=n.openModal.bind(Object(h.a)(n)),n.createPursuits=n.createPursuits.bind(Object(h.a)(n)),n.passDataToModal=n.passDataToModal.bind(Object(h.a)(n)),n.closeModal=n.closeModal.bind(Object(h.a)(n)),n.handleDeletePost=n.handleDeletePost.bind(Object(h.a)(n)),n.fetchNextPosts=n.fetchNextPosts.bind(Object(h.a)(n)),n.createFeed=n.createFeed.bind(Object(h.a)(n)),n.renderModal=n.renderModal.bind(Object(h.a)(n)),n.renderRecentPosts=n.renderRecentPosts.bind(Object(h.a)(n)),n.handleCommentIDInjection=n.handleCommentIDInjection.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,this._isMounted&&this.state.username){var t=this.props.firebase.returnName(),a=t?t.firstName:null,n=t.lastName?t.lastName:null,l=null,i=null,o="",r="",s=null,c=null,u=null,d=[],m=null,h=0,p=[];return ee.returnIndexUser(this.state.username).then(function(t){var a=t.data,n=t.data.following_feed.slice(e.state.nextOpenPostIndex,e.state.nextOpenPostIndex+e.state.fixedDataLoadLength);if(l=a.following_feed,i=a.preferred_post_type,o=a.cropped_display_photo_key,r=a.small_cropped_display_photo_key,s=a._id,c=a.user_profile_id,u=t.data.pursuits,m=!(!l||0===l.length),t.data.pursuits){var g=e.createPursuits(t.data.pursuits);d=g.pursuitNames,p=g.pursuitInfoArray,h=g.totalMin}return!1===m?t.data.recent_posts.length>0?ee.returnMultiplePosts(t.data.recent_posts,!1).then(function(e){return{isRecentPostsOnly:!0,recentPosts:e.data.posts}}):{isRecentPostsOnly:!0,recentPosts:[]}:(console.log("HITS"),t.data.recent_posts.length>0?Promise.all([ee.returnMultiplePosts(t.data.recent_posts,!1),ee.returnMultiplePosts(n,!0)]).then(function(e){return{isRecentPostsOnly:!1,recentPosts:e[0].data.posts,feedData:e[1].data.posts}}):ee.returnMultiplePosts(n,!0).then(function(t){return t.data.posts.length<=e.state.fixedDataLoadLength&&(m=!1),{isRecentPostsOnly:!1,feedData:t.data.posts}}))}).then(function(t){var g=t&&t.recentPosts?t.recentPosts:[],v=t&&!t.isRecentPostsOnly?t.feedData:[],f=e.state.nextOpenPostIndex+e.state.fixedDataLoadLength;e.setState({firstName:a,lastName:n,followedUserPostIDs:l,preferredPostType:i,indexUserDataId:s,fullUserDataId:c,croppedDisplayPhoto:o,smallCroppedDisplayPhoto:r,pursuits:u,pursuitNames:d,pursuitInfoArray:p,totalMin:h,recentPosts:g,feedData:v,nextOpenPostIndex:f,isMoreFollowedUserPosts:m})}).catch(function(e){console.log(e),alert("Could Not Load Feed."+e)})}}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"renderRecentPosts",value:function(e){var t,a=0,n=[],i=Object(H.a)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.push(l.a.createElement(ze,{isRecentEvents:!0,index:a,mediaType:y,key:a,eventData:o,onEventClick:this.handleEventClick})),a++}}catch(r){i.e(r)}finally{i.f()}return n}},{key:"handleCommentIDInjection",value:function(e,t,a){if("RECENT_POSTS"===a){var n=this.state.recentPosts;n[e].comments=t,n[e].comment_count=n[e].comment_count+1,this.setState(function(e){return{recentPosts:n,recentPostsKey:e.recentPostsKey+1}})}else if("FRIEND_POSTS"===a){var l=this.state.feedData;l[e].comments=t,this.setState({feedData:l})}}},{key:"createFeed",value:function(e){if(e&&0!==e.length){var t,a=[],n=this.state.nextOpenPostIndex,i=0,o=Object(H.a)(e);try{for(o.s();!(t=o.n()).done;){var r=t.value,s=r.username===this.state.username?this.state.preferredPostType:null,c=r.post_format===C?r.text_data:JSON.parse(r.text_data);a.push(l.a.createElement(We,{targetProfileId:this.state.fullUserDataId,targetIndexUserId:this.state.indexUserDataId,key:n++,postIndex:i++,postId:r._id,visitorUsername:this.state.username,isOwnProfile:r.username===this.state.username,displayPhoto:r.display_photo_key,preferredPostType:s,pursuitNames:this.state.pursuitNames,eventData:r,textData:c,passDataToModal:this.passDataToModal,largeViewMode:!1,onCommentIDInjection:this.handleCommentIDInjection}))}}catch(u){o.e(u)}finally{o.f()}return a}}},{key:"fetchNextPosts",value:function(){var e=this,t=this.state.nextOpenPostIndex+this.state.fixedDataLoadLength,a=this.state.followedUserPostIDs.slice(this.state.nextOpenPostIndex,t),n=!0;return t>=this.state.followedUserPostIDs.length&&(n=!1),ee.returnMultiplePosts(a,!1).then(function(a){a.data?e.setState(function(e){return{feedData:e.feedData.concat(a.data.posts),nextOpenPostIndex:t,isMoreFollowedUserPosts:n}}):e.setState({isMoreFollowedUserPosts:!1})}).catch(function(e){console.log(e),alert(e)})}},{key:"handleDeletePost",value:function(){return ee.deletePost(this.state.fullUserDataId,this.state.indexUserDataId,this.state.selectedEvent._id).then(function(e){console.log(e),alert(e)})}},{key:"passDataToModal",value:function(e,t,a){var n=t===C?e.text_data:JSON.parse(e.text_data);this.setState({selectedEvent:e,textData:n,selectedPostFeedType:"FRIEND_POSTS",selectedPostIndex:a},this.openModal())}},{key:"openModal",value:function(){this.modalRef.current.style.display="block",document.body.style.overflow="hidden",this.setState({isModalShowing:!0})}},{key:"closeModal",value:function(){this.modalRef.current.style.display="none",document.body.style.overflow="visible",this.setState({isModalShowing:!1,selectedEvent:null})}},{key:"handlePursuitClick",value:function(e){e.preventDefault(),this.props.history.push(this.state.username)}},{key:"handleRecentWorkClick",value:function(e,t){e.preventDefault(),alert(t)}},{key:"handleEventClick",value:function(e,t){var a=this;return console.log(t),ee.retrievePost(e._id,!0).then(function(n){a._isMounted&&a.setState({selectedEvent:e,selectedPostIndex:t,selectedPostFeedType:"RECENT_POSTS",textData:n.data},a.openModal())}).catch(function(e){return console.log(e)})}},{key:"createPursuits",value:function(e){var t,a=[],n=[],i=0,o=Object(H.a)(e);try{for(o.s();!(t=o.n()).done;){var r=t.value;n.push(r.name),i+=r.total_min,a.push(l.a.createElement("tr",{key:r.name},l.a.createElement("th",{key:r.name+" name"},r.name),l.a.createElement("td",{key:r.name+" experience"},r.experience_level),l.a.createElement("td",{key:r.total_min+"minutes"},r.total_min),l.a.createElement("td",{key:r.num_posts+"posts"},r.num_posts),l.a.createElement("td",{key:r.num_milestones+" milestones"},r.num_milestones)))}}catch(s){o.e(s)}finally{o.f()}return{pursuitNames:n,pursuitInfoArray:a,totalMin:i}}},{key:"renderModal",value:function(){return l.a.createElement(We,{targetProfileId:this.state.fullUserDataId,targetIndexUserId:this.state.indexUserDataId,largeViewMode:!0,visitorUsername:this.state.username,key:this.state.selectedEvent._id,postIndex:this.state.selectedPostIndex,isOwnProfile:!0,isPostOnlyView:!1,displayPhoto:this.state.smallCroppedDisplayPhoto,preferredPostType:this.state.preferredPostType,pursuitNames:this.state.pursuitNames,eventData:this.state.selectedEvent,selectedPostFeedType:this.state.selectedPostFeedType,textData:this.state.textData,closeModal:this.closeModal,onCommentIDInjection:this.handleCommentIDInjection})}},{key:"render",value:function(){var e=this,t=this.state.feedData.length>0?this.createFeed(this.state.feedData):null,a=this.state.croppedDisplayPhoto?Object(Z.returnUserImageURL)(this.state.croppedDisplayPhoto):Z.TEMP_PROFILE_PHOTO_URL,n=this.state.recentPosts?this.renderRecentPosts(this.state.recentPosts):null,i=this.state.isModalShowing&&this.state.selectedEvent?this.renderModal():null;return console.log(this.state.recentPostsKey),l.a.createElement("div",null,l.a.createElement("div",{id:"returninguser-profile-container",className:"returninguser-main-row"},l.a.createElement("div",{id:"returninguser-hero-profile-column",className:"returninguser-profile-column"},l.a.createElement(r.b,{to:Object(Z.returnUsernameURL)(this.state.username)},l.a.createElement("img",{alt:"",id:"returninguser-profile-photo",src:a}),l.a.createElement("div",{className:"returninguser-profile-text-container"},l.a.createElement("p",null,this.state.username),l.a.createElement("p",null,this.state.firstName)))),l.a.createElement("div",{className:"returninguser-profile-column"},l.a.createElement("div",{className:"returninguser-profile-text-container"},"Total Hours Spent: ",Math.floor(this.state.totalMin/60)),l.a.createElement("div",{className:"returninguser-profile-text-container"})),l.a.createElement("div",{className:"returninguser-profile-column"},l.a.createElement("table",{id:"returninguser-pursuit-info-table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",null,"Level"),l.a.createElement("th",null,"Minutes Spent"),l.a.createElement("th",null,"Posts"),l.a.createElement("th",null,"Milestones")),this.state.pursuitInfoArray)))),l.a.createElement("div",{id:"returninguser-recent-work-container",className:"returninguser-main-row"},l.a.createElement("div",{className:"returninguser-row"},l.a.createElement(r.b,{id:"returninguser-recent-work-title",className:"returninguser-title",to:Object(Z.returnUsernameURL)(this.state.username)},"Your Recent Work")),l.a.createElement("div",{key:this.state.recentPostsKey,id:"returninguser-recent-posts-container",className:"returninguser-row"},n)),l.a.createElement("div",{id:"returninguser-feed-container",className:"returninguser-main-row"},l.a.createElement("h4",{className:"returninguser-title"},"Your Feed"),l.a.createElement("div",{id:"returninguser-infinite-scroll-container"},l.a.createElement(ue.a,{dataLength:this.state.nextOpenPostIndex,next:this.fetchNextPosts,hasMore:this.state.isMoreFollowedUserPosts,loader:l.a.createElement("h4",null,"Loading..."),endMessage:l.a.createElement("p",{style:{textAlign:"center"}},l.a.createElement("b",null,"Yay! You have seen it all"))},t?t.map(function(e){return l.a.createElement("div",{className:"returninguser-feed-object-container"},e)}):null))),l.a.createElement("div",{className:"modal",ref:this.modalRef},l.a.createElement("div",{className:"overlay",onClick:function(){return e.closeModal()}}),l.a.createElement("span",{className:"close",onClick:function(){return e.closeModal()}},"X"),i))}}]),a}(l.a.Component),Xe=function(){Ye.props.firebase.checkIsExistingUser()},Qe=pe(function(e){return!!e&&D(Xe)})(D(qe)),Ze=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={isNewUser:null},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.props.firebase.checkIsExistingUser().then(function(t){e._isMounted&&(t?e.setState({isNewUser:!1}):e.setState({isNewUser:!0}))})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return null===this.state.isNewUser?l.a.createElement("div",null,"Grabbing User Info"):this.state.isNewUser?l.a.createElement(ce,null):l.a.createElement(Qe,null)}}]),a}(l.a.Component),$e=pe(function(e){return!!e})(D(Ze)),et=Object(he.a)(s.f,D)(W),tt=Object(he.a)(s.f,D)($e),at=D(function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(de.Consumer,null,function(e){return e&&e.emailVerified?l.a.createElement(tt,null):l.a.createElement(et,{emailVerifiedStatus:!1})}))}),nt=(a(811),{passwordOne:"",passwordTwo:"",error:null}),lt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state=Object(u.a)({},nt),n.handlePasswordUpdateSubmit=n.handlePasswordUpdateSubmit.bind(Object(h.a)(n)),n.handleTextUpdate=n.handleTextUpdate.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"handlePasswordUpdateSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.passwordOne;this.props.firebase.doPasswordUpdate(a).then(function(){t.setState(Object(u.a)({},nt))}).catch(function(e){t.setState({error:e})})}},{key:"handleTextUpdate",value:function(e){this.setState(Object(c.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state,t=e.passwordOne,a=e.passwordTwo,n=e.error,i=t!==a||""===t;return l.a.createElement("div",{id:"passwordchangeform-container"},l.a.createElement("form",{onSubmit:this.handlePasswordUpdateSubmit},l.a.createElement("input",{name:"passwordOne",value:t,onChange:this.handleTextUpdate,type:"password",placeholder:"New Password"}),l.a.createElement("input",{name:"passwordTwo",value:a,onChange:this.handleTextUpdate,type:"password",placeholder:"Confirm New Password"}),l.a.createElement("button",{id:"passwordchangeform-reset-button",disabled:i,type:"submit"},"Reset My Password"),n&&l.a.createElement("p",null,n.message)))}}]),a}(n.Component),it=D(lt),ot=(a(812),pe(function(e){return!!e})(D(function(e){var t=Object(n.useState)(null),a=Object(k.a)(t,2),i=a[0],o=a[1],r=Object(n.useState)(null),s=Object(k.a)(r,2),c=s[0],u=s[1],d=Object(n.useState)(!0),m=Object(k.a)(d,2),h=m[0],p=m[1],g=Object(n.useState)(null),v=Object(k.a)(g,2),f=v[0],b=v[1],y=Object(n.useState)(""),E=Object(k.a)(y,2),P=E[0],S=E[1],C=Object(n.useState)(null),w=Object(k.a)(C,2),O=w[0],I=w[1],T=Object(n.useState)(""),D=Object(k.a)(T,2),x=D[0],j=D[1],R=Object(n.useState)(null),_=Object(k.a)(R,2),M=_[0],U=_[1],A=Object(n.useState)(null),N=Object(k.a)(A,2),L=N[0],F=N[1],B=Object(n.useState)(1),V=Object(k.a)(B,2),W=V[0],K=V[1],J=Object(n.useState)(0),z=Object(k.a)(J,2),Y=z[0],q=z[1],X=Object(n.useState)(null),Q=Object(k.a)(X,2),Z=Q[0],$=Q[1],te=Object(n.useState)(null),ae=Object(k.a)(te,2),ne=ae[0],le=ae[1],ie=Object(n.useState)(0),re=Object(k.a)(ie,2),se=re[0],ce=re[1],ue=l.a.createRef(),me=l.a.createRef();Object(n.useEffect)(function(){ee.returnAccountSettingsInfo(e.firebase.returnUsername()).then(function(e){var t=e.data.pursuits,a=[];if(t)for(var n in t)a.push(n);p(null!==e.data.cropped_display_photo_key),S(e.data.bio),le(e.data.private),F(a),I(t),j(t[a[[0]]]),U(a[[0]]),o(e.data._id)})},[e.firebase]);var he=function(e){u(e)},pe=function(e){""===e.current.style.display?e.current.style.display="flex":e.current.style.display=""},ge=function(t){var a=e.firebase.returnUsername();window.confirm("Are you sure you want to remove your photo?")&&ee.deleteAccountPhoto(a,t).then(function(){var e=new FormData;return e.append("username",a),e.append("imageKey",""),ee.updatePostDisplayPhotos(e)}).then(function(){"DISPLAY"===t?window.alert("Your Display Photo has been removed. \n              You should see the changes take effect soon."):"COVER"===t&&window.alert("Your cover photo has been removed. You should\n               see the changes take effect immediately."),window.location.reload()}).catch(function(e){console.log(e),window.alert("Something went wrong while deleting your image.\n             Please wait and try again later")})},ve=function(e,t,a){return ee.updateAccountImage(e,t).then(function(e){var t={username:a,imageKey:e.data.imageKey};return ee.updatePostDisplayPhotos(t)}).then(function(e){console.log(e),alert("Successfully updated!"),window.location.reload()}).catch(function(e){console.log(e),alert("Something has gone wrong while updating :(")})},fe=function(t,a){var n=e.firebase.returnUsername();return h?ee.deleteAccountPhoto(n,a).then(function(e){return console.log(e),ve(t,a,n)}):ve(t,a,n)},be=function(){return ee.updateBio({bio:P,username:e.firebase.returnUsername()}).then(function(){alert("Successfully updated your bio!"),window.location.reload()}).catch(function(e){return console.log(e)})},ye=function(){return ee.updateTemplate({indexUserID:i,text:x,pursuit:M})},Ee=function(t){var a=new FormData;if(a.append("username",e.firebase.returnUsername()),"DISPLAY"===t){var n=["normal","small","tiny"],l=Z.getImage();G.a.canvasToFile(l).then(function(e){return Promise.all([Object(G.a)(e,{maxWidthOrHeight:250,maxSizeMB:1,fileType:"image/jpeg"}),Object(G.a)(e,{maxWidthOrHeight:125,maxSizeMB:1,fileType:"image/jpeg"}),Object(G.a)(e,{maxWidthOrHeight:62,maxSizeMB:1,fileType:"image/jpeg"})])}).then(function(e){for(var l=[],i=0;i<3;i++)l.push(new File([e[i]],n[i],{type:"image/jpeg"}));return a.append("croppedImage",e[0]),a.append("smallCroppedImage",e[1]),a.append("tinyCroppedImage",e[2]),fe(a,t)})}else if("COVER"===t)return f.size>1e6?Object(G.a)(f,{maxSizeMB:1,fileType:"image/jpeg"}).then(function(e){a.append("coverPhoto",e),fe(a,t)}):(a.append("coverPhoto",f),fe(a,t))},Pe=function(){ce(se+1),u(null)};return l.a.createElement(de.Consumer,null,function(t){return l.a.createElement("div",{id:"account-container"},l.a.createElement("h1",null,"Account: ",t.email),l.a.createElement(it,null),l.a.createElement("div",{className:"account-section-container"},l.a.createElement("label",null,"Choose the privacy of your profile!"),l.a.createElement("select",{value:ne?"PRIVATE":"PUBLIC",onChange:function(t){return function(t){var a="PRIVATE"===t;return le(a),ee.setProfilePrivacy(e.firebase.returnUsername(),a).catch(function(e){console.log(e),alert("Unable to update Profile Privacy.")})}(t.target.value)}},l.a.createElement("option",{key:"private",value:"PRIVATE"},"Private"),l.a.createElement("option",{key:"public",value:"PUBLIC"},"Public"))),l.a.createElement("div",{className:"account-section-container"},l.a.createElement("button",{onClick:function(){return pe(ue)}},"Edit your Display Photo"),l.a.createElement("div",{ref:ue,className:"account-photo-edit-container"},l.a.createElement("label",null,"Change your display photo!"),l.a.createElement("input",{name:"displayPhoto",type:"file",key:se,onChange:function(e){return u(e.target.files[0])}}),c?l.a.createElement(oe,{clearFile:Pe,profilePhoto:c,handleImageDrop:he,imageScale:W,imageRotation:Y,scaleImage:K,rotateImage:q,setEditorRef:$}):l.a.createElement("div",null),l.a.createElement("button",{disabled:!c,onClick:function(){return Ee("DISPLAY")}},"Submit your display photo!"),l.a.createElement("button",{onClick:function(){return ge("DISPLAY")}},"Remove display Photo?"))),l.a.createElement("div",{className:"account-section-container"},l.a.createElement("button",{onClick:function(){return pe(me)}},"Edit your Cover Photo"),l.a.createElement("div",{ref:me,className:"account-photo-edit-container"},l.a.createElement("label",null,"Change your cover photo!"),l.a.createElement("input",{type:"file",onChange:function(e){b(e.target.files[0])}}),l.a.createElement("button",{disabled:!f,onClick:function(){return Ee("COVER")}},"Submit your cover photo!"),l.a.createElement("button",{onClick:function(){return ge("COVER")}},"Remove your cover photo"))),l.a.createElement("div",{id:"account-bio-container",className:"account-section-container"},l.a.createElement("label",null,"Edit your bio"),l.a.createElement("textarea",{type:"text",onChange:function(e){return S(e.target.value)},value:P,maxLength:500}),l.a.createElement("button",{onClick:be},"Submit Bio")),l.a.createElement("div",{id:"account-template-container",className:"account-section-container"},l.a.createElement("label",null,"Add Template for Pursuit"),l.a.createElement("p",null,"Add a predefined text you can add to a post for ease of access"),l.a.createElement("select",{name:"pursuit-category",value:M,onChange:function(e){return t=e.target.value,console.log(O[t]),j(O[t]),void U(t);var t}},function(){var e=[];if(null!==L){var t,a=Object(H.a)(L);try{for(a.s();!(t=a.n()).done;){var n=t.value;e.push(l.a.createElement("option",{key:n,value:n},n))}}catch(i){a.e(i)}finally{a.f()}return e}}()),l.a.createElement("textarea",{type:"text",onChange:function(e){return j(e.target.value)},value:x}),l.a.createElement("button",{onClick:ye},"Submit Template")))})}))),rt=(a(813),function(e){return l.a.createElement("div",{id:"newpost-window"},l.a.createElement("div",{className:"newpost-button-container"},l.a.createElement("h3",null,"Document Your Progress"),l.a.createElement("h4",null,"Make a Normal Post"),l.a.createElement("button",{value:C,onClick:function(t){return e.onPostTypeSet(t.target.value,null)}},"New Normal Post"),l.a.createElement("h4",null,"Make an Essay Post"),l.a.createElement("button",{value:"NEW_LONG",onClick:function(t){return function(t){e.onlineDraft?window.confirm("Starting a new Long Post will\n                            erase your saved draft. Continue anyway?")&&e.onPostTypeSet(t.target.value,null):e.onPostTypeSet(t.target.value,null)}(t)}},"New Draft"),l.a.createElement("button",{value:"OLD_LONG",onClick:function(t){return e.onPostTypeSet(t.target.value,null)}},"Continue Previous Draft?")))}),st=(a(814),function(e){return l.a.createElement("div",{className:"imagedrop-container",onDragOver:e.dragOver,onDragEnter:e.dragEnter,onDragLeave:e.dragLeave,onDrop:e.fileDrop,onClick:e.fileInputClicked},l.a.createElement("div",{id:"imagedrop-message"},l.a.createElement("div",{id:"imagedrop-upload-icon"}),"Drag and Drop files here or click to select file(s)"),l.a.createElement("input",{ref:e.reference,type:"file",multiple:!0,onChange:e.filesSelected}))}),ct=a(99),ut=(a(815),l.a.memo(function(e){var t=Object(ct.b)(function(e){var t=e.data,a=e.fileType,n=e.fileSize,i=e.errorMessage,o=e.removeFile,r=t.invalid?"sortableitem-error":"";return l.a.createElement("div",{className:"sortableitem-status-bar"},l.a.createElement("div",null,l.a.createElement("div",{className:"sortableitem-type-logo"}),l.a.createElement("div",{className:"sortableitem-type"},a(t.name)),l.a.createElement("span",{className:"sortableitem-name ".concat(r)},t.name),l.a.createElement("span",{className:"sortableitem-size"},"(",n(t.size),")"),t.invalid&&l.a.createElement("span",{className:"sortableitem-error-message"},"(",i,")")),l.a.createElement("button",{onClick:function(){return o(t.name)}},"X"))}),a=Object(ct.a)(function(e){var a=e.items,n=e.onSortEnd,i=e.fileType,o=e.fileSize,r=e.errorMessage,s=e.removeFile;return l.a.createElement("ul",null,a.map(function(e,a){return l.a.createElement(t,{key:"item-".concat(a),index:a,data:e,onSortEnd:n,fileType:i,fileSize:o,errorMessage:r,removeFile:s})}))});return l.a.createElement(a,{items:e.validFiles,onSortEnd:e.onSortEnd,fileType:e.fileType,fileSize:e.fileSize,errorMessage:e.errorMessage,removeFile:e.removeFile})})),dt=(a(816),function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window}()),mt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).preventDefault=function(e){e.preventDefault()},n.dragOver=function(e){n.preventDefault(e)},n.dragEnter=function(e){n.preventDefault(e)},n.dragLeave=function(e){n.preventDefault(e)},n.fileDrop=function(e){n.preventDefault(e);var t=e.dataTransfer.files;t.length&&n.handleFiles(t)},n.filesSelected=function(){n.fileInputRef.current.files.length&&n.handleFiles(n.fileInputRef.current.files)},n.fileInputClicked=function(){n.fileInputRef.current.click()},n.handleFiles=function(e){for(var t=!1,a=0;a<e.length;a++)n.validateFile(e[a])?n.props.onSelectedFileChange(e[a]):(t=!0,e[a].invalid=!0,n.props.onSelectedFileChange(e[a]),n.setErrorMessage("File type not permitted"),n.props.onUnsupportedFileChange(e[a]));n.updateDisabilityState(t)},n.fileSize=function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},n.fileType=function(e){return e.substring(e.lastIndexOf(".")+1,e.length)||e},n.removeFile=function(e){console.log(e),console.log("asdfadf");var t=n.props.validFiles.findIndex(function(t){return t.name===e}),a=n.props.selectedFiles.findIndex(function(t){return t.name===e}),l=n.props.unsupportedFiles.findIndex(function(t){return t.name===e}),i=n.props.validFiles,o=n.props.selectedFiles,r=n.props.unsupportedFiles;i.splice(t,1),o.splice(a,1),n.props.setValidFiles(i),n.props.setSelectedFiles(o),-1!==l&&(r.splice(l,1),n.props.setUnsupportedFiles(r)),i.length>0&&0===r.length?n.updateDisabilityState(!1):n.updateDisabilityState(!0)},n.updateDisabilityState=function(e){e&&0===n.props.textPageText.length?n.props.onDisablePost(!0):n.props.onDisablePost(!1)},n.openImageModal=function(e){var t=Object(h.a)(n),a=new FileReader;n.modalRef.current.style.display="block",a.readAsDataURL(e),a.onload=function(e){t.modalImageRef.current.style.backgroundImage="url(".concat(e.target.result,")")}},n.closeModal=function(){n.modalRef.current.style.display="none",n.modalImageRef.current.style.backgroundImage="none"},n.fileInputRef=l.a.createRef(),n.state={errorMessage:""},n.setErrorMessage=n.setErrorMessage.bind(Object(h.a)(n)),n.validateFile=n.validateFile.bind(Object(h.a)(n)),n.renderTextContainer=n.renderTextContainer.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"setErrorMessage",value:function(e){this.setState({value:e})}},{key:"validateFile",value:function(e){return-1!==["image/jpeg","image/jpg","image/png","image/gif","image/x-icon"].indexOf(e.type)}},{key:"renderTextContainer",value:function(){return l.a.createElement(we,{validFilesLength:this.props.validFiles.length,isPaginated:this.props.isPaginated,onPaginatedChange:this.props.onPaginatedChange,onTextChange:this.props.onTextChange,textPageText:this.props.textPageText,imageIndex:this.props.imageIndex})}},{key:"render",value:function(){return dt||console.log("Sorry, this is not a modern browser! Try another browser."),0===this.props.validFiles.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"shorteditor-text-container"},this.renderTextContainer()),this.props.unsupportedFiles.length?l.a.createElement("p",null,"Please remove all unsupported files."):"",l.a.createElement(st,{reference:this.fileInputRef,dragOver:this.dragOver,dragEnter:this.dragEnter,dragLeave:this.dragLeave,fileDrop:this.fileDrop,fileInputClicked:this.fileInputClicked,filesSelected:this.filesSelected})):(console.log("short-editor"),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"shorteditor-main-container"},l.a.createElement("div",{id:"shorteditor-hero-container"},this.props.unsupportedFiles.length?l.a.createElement("p",null,"Please remove all unsupported files."):"",l.a.createElement("div",{id:"shorteditor-image-slider-container"},l.a.createElement(Re,{disableAnnotations:!0,onIndexChange:this.props.onIndexChange,imageArray:this.props.imageArray}))),l.a.createElement("div",{id:"shorteditor-side-container"},this.renderTextContainer())),l.a.createElement("div",{id:"shorteditor-file-manager-container"},l.a.createElement(st,{reference:this.fileInputRef,dragOver:this.dragOver,dragEnter:this.dragEnter,dragLeave:this.dragLeave,fileDrop:this.fileDrop,fileInputClicked:this.fileInputClicked,filesSelected:this.filesSelected}),l.a.createElement(ut,{onSortEnd:this.props.onSortEnd,validFiles:this.props.validFiles,openImageModal:this.openImageModal,removeFile:this.removeFile,fileType:this.fileType,fileSize:this.fileSize,errorMessage:this.state.errorMessage}))))}}]),a}(l.a.Component),ht=D(mt),pt=(a(817),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={selectedFiles:[],validFiles:[],unsupportedFiles:[],imageArray:[],imageIndex:0,textData:"",isPaginated:!1,postDisabled:!0,window:b,previewTitle:null,selectedTemplate:null,tinyPhotos:null},n.handleTemplateInjection=n.handleTemplateInjection.bind(Object(h.a)(n)),n.handleIndexChange=n.handleIndexChange.bind(Object(h.a)(n)),n.handleTemplateSelect=n.handleTemplateSelect.bind(Object(h.a)(n)),n.returnOptions=n.returnOptions.bind(Object(h.a)(n)),n.setSelectedFiles=n.setSelectedFiles.bind(Object(h.a)(n)),n.setValidFiles=n.setValidFiles.bind(Object(h.a)(n)),n.setUnsupportedFiles=n.setUnsupportedFiles.bind(Object(h.a)(n)),n.setImageArray=n.setImageArray.bind(Object(h.a)(n)),n.handleTextChange=n.handleTextChange.bind(Object(h.a)(n)),n.handleUnsupportedFileChange=n.handleUnsupportedFileChange.bind(Object(h.a)(n)),n.handleSelectedFileChange=n.handleSelectedFileChange.bind(Object(h.a)(n)),n.handleDisablePost=n.handleDisablePost.bind(Object(h.a)(n)),n.handleClick=n.handleClick.bind(Object(h.a)(n)),n.generateValidFiles=n.generateValidFiles.bind(Object(h.a)(n)),n.handlePaginatedChange=n.handlePaginatedChange.bind(Object(h.a)(n)),n.handleSortEnd=n.handleSortEnd.bind(Object(h.a)(n)),n.loadImage=n.loadImage.bind(Object(h.a)(n)),n.transformImageProp=n.transformImageProp.bind(Object(h.a)(n)),n.createTinyFiles=n.createTinyFiles.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"transformImageProp",value:function(e){var t=this,a=e;Promise.all(a.map(function(e){return t.loadImage(e)})).then(function(a){t.setState({imageArray:a,displayedItemCount:a.length,validFiles:e,isCompressing:!0},t.createTinyFiles(e))})}},{key:"createTinyFiles",value:function(e){var t,a=this,n=[],l=Object(H.a)(e);try{for(l.s();!(t=l.n()).done;){var i=t.value;n.push(Object(G.a)(i,{maxSizeMB:1}))}}catch(o){l.e(o)}finally{l.f()}n.push(Object(G.a)(e[0],{maxSizeMB:.5,maxWidthOrHeight:250})),Promise.all(n).then(function(e){for(var t=new File([e[e.length-1]],"Thumbnail"),n=[],l=0;l<e.length-1;l++)n.push(new File([e[l]],"file"));console.log("Created Compressed Files"),console.log(n),console.log(t),a.setState({tinyPhotos:n,coverPhoto:t,isCompressing:!1})})}},{key:"loadImage",value:function(e){return new Promise(function(t,a){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(){a(n.error)},n.readAsDataURL(e)})}},{key:"returnOptions",value:function(){var e,t=[l.a.createElement("option",{key:"0",value:null})],a=Object(H.a)(this.props.pursuitNames);try{for(a.s();!(e=a.n()).done;){var n=e.value;this.props.pursuitTemplates&&this.props.pursuitTemplates[n]&&t.push(l.a.createElement("option",{key:n,value:n},n))}}catch(i){a.e(i)}finally{a.f()}return t}},{key:"handleIndexChange",value:function(e){this.setState({imageIndex:e})}},{key:"handleTemplateSelect",value:function(e){this.setState({selectedTemplate:e||null})}},{key:"handleTemplateInjection",value:function(){var e;if(this.state.isPaginated){if(this.state.isPaginated){var t=this.state.textData;console.log(t),t[this.state.imageIndex]=this.props.pursuitTemplates[this.state.selectedTemplate]+"\n"+t[this.state.imageIndex],e=t}}else e=this.props.pursuitTemplates[this.state.selectedTemplate]+"\n"+this.state.textData;this.setState({textData:e})}},{key:"handlePaginatedChange",value:function(){if(!1===this.state.isPaginated){var e=[],t=this.state.validFiles.length;e.push(this.state.textData);for(var a=1;a<t;a++)e.push([]);this.setState({textData:e,isPaginated:!0})}else if(window.confirm("Switching back will remove all your captions except \n                          for the first one. Keep going?")){var n=this.state.textData[0];this.setState({textData:n,isPaginated:!1})}}},{key:"setImageArray",value:function(e){this.setState({imageArray:e})}},{key:"setSelectedFiles",value:function(e){this.setState({selectedFiles:e},this.generateValidFiles)}},{key:"setValidFiles",value:function(e){this.transformImageProp(e)}},{key:"setUnsupportedFiles",value:function(e){this.setState({unsupportedFiles:e})}},{key:"handleTextChange",value:function(e,t){if(t)this.setState({previewTitle:e});else{var a,n=0===this.state.validFiles.length||this.state.unsupportedFiles.length>0;if(this.state.isPaginated){var l=this.state.textData;l[this.state.imageIndex]=e,a=l}else a=e;this.setState({textData:a,postDisabled:0===e.length&&n})}}},{key:"handleUnsupportedFileChange",value:function(e){this.setState(function(t){return{unsupportedFiles:t.unsupportedFiles.concat(e)}})}},{key:"handleSelectedFileChange",value:function(e){this.setState(function(t){return{selectedFiles:t.selectedFiles.concat(e)}},this.generateValidFiles)}},{key:"handleDisablePost",value:function(e){this.setState({postDisabled:e})}},{key:"handleClick",value:function(e){this.setState({window:e})}},{key:"generateValidFiles",value:function(){var e=this.state.selectedFiles.reduce(function(e,t){return e.find(function(e){return e.name===t.name})?e:e.concat([t])},[]);this.setValidFiles(e)}},{key:"handleSortEnd",value:function(e){var t=e.oldIndex,a=e.newIndex,n=Array.from(this.state.validFiles),l=n.splice(t,1),i=Object(k.a)(l,1)[0];n.splice(a,0,i),this.transformImageProp(n)}},{key:"render",value:function(){var e=this;if(this.state.window===b){var t=this.returnOptions();return l.a.createElement("div",{id:"shortpost-window"},l.a.createElement("h2",null,"Short Post"),l.a.createElement("div",{className:"shortpost-button-container"},l.a.createElement("span",null,l.a.createElement("button",{value:S,onClick:function(t){return e.props.onPostTypeSet(t.target.value,!1)}},"Return")),this.state.isCompressing?l.a.createElement("p",null,"Compressing Photos"):null,l.a.createElement("span",null,l.a.createElement("button",{value:"REVIEW_STATE",disabled:this.state.postDisabled,onClick:function(t){return e.handleClick(t.target.value)}},"Review Post"))),l.a.createElement("div",{id:"shortpost-special-button-container"},l.a.createElement("select",{onChange:function(t){return e.handleTemplateSelect(t.target.value)},value:this.state.selectedTemplate},t),l.a.createElement("button",{disabled:null===this.state.selectedTemplate,onClick:this.handleTemplateInjection},"Inject Template")),l.a.createElement(ht,{username:this.props.username,selectedFiles:this.state.selectedFiles,validFiles:this.state.validFiles,imageArray:this.state.imageArray,unsupportedFiles:this.state.unsupportedFiles,isPaginated:this.state.isPaginated,textPageText:this.state.textData,imageIndex:this.state.imageIndex,onSortEnd:this.handleSortEnd,setImageArray:this.setImageArray,onPaginatedChange:this.handlePaginatedChange,onIndexChange:this.handleIndexChange,onTextChange:this.handleTextChange,onSelectedFileChange:this.handleSelectedFileChange,onUnsupportedFileChange:this.handleUnsupportedFileChange,onDisablePost:this.handleDisablePost,setValidFiles:this.setValidFiles,setSelectedFiles:this.setSelectedFiles,setUnsupportedFiles:this.setUnsupportedFiles}))}return l.a.createElement(Me,{previousState:b,displayPhoto:this.props.displayPhoto,isPaginated:this.state.isPaginated,previewTitle:this.state.previewTitle,closeModal:this.props.closeModal,postType:C,imageArray:this.state.tinyPhotos,coverPhoto:this.state.coverPhoto,textData:this.state.textData,username:this.props.username,preferredPostType:this.props.preferredPostType,pursuitNames:this.props.pursuitNames,handlePreferredPostTypeChange:this.props.handlePreferredPostTypeChange,setPostStage:this.handleClick})}}]),a}(l.a.Component)),gt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={username:n.props.username,isInitial:!0,needOnlineSync:!1,lastBlockText:""},n.handleSave=n.handleSave.bind(Object(h.a)(n)),n.handleSaveSuccess=n.handleSaveSuccess.bind(Object(h.a)(n)),n.handleSaveError=n.handleSaveError.bind(Object(h.a)(n)),n.handleTextChange=ae.a.debounce(function(){console.log(n.props.isSavePending),n.props.isSavePending&&n.props.onSavePending(!1)},4200),n.checkIsEqual=n.checkIsEqual.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"checkIsEqual",value:function(){return ae.a.isEqual(JSON.stringify(this.props.localDraft),JSON.stringify(this.props.onlineDraft))}},{key:"handleSave",value:function(e,t){var a=this;return this.state.isInitial?this.checkIsEqual()?(console.log("Catch uneccessary first save"),this.setState({isInitial:!1},this.props.onSavePending(!1))):(this.setState({isInitial:!1}),ee.saveDraft(this.props.username,t).then(function(e){return a.handleSaveSuccess(e)}).catch(function(e){return a.handleSaveError(e)})):this.props.isSavePending?(console.log("Saving"),ee.saveDraft(this.props.username,t).then(function(e){return a.handleSaveSuccess(e)}).catch(function(e){return a.handleSaveError(e)})):void console.log("Catch uneccessary save")}},{key:"handleSaveSuccess",value:function(e){console.log("Reached",e),this.props.onSavePending(!1)}},{key:"handleSaveError",value:function(e){console.log("Fail"),this.props.onSavePending(!1),alert("Draft Failed to Save. Please check your\n               connection or save your draft locally for now. : (")}},{key:"render",value:function(){var e=this;return l.a.createElement(Le.a,{onChange:function(t){var a=t.emitSerializedOutput();e.props.onSavePending(!0),e.props.setLocalDraft(a),e.handleTextChange()},content:this.props.onlineDraft,default_wrappers:[{className:"my-custom-h1",block:"header-one"},{className:"my-custom-h2",block:"header-two"},{className:"my-custom-h3",block:"header-three"}],widgets:[Object(Fe.a)({options:{upload_url:Z.IMAGE_BASE_URL,upload_callback:function(t,a){console.log(t),console.log(a),alert("file uploaded: "+t.data.url),e.setState({needOnlineSync:!0})},upload_error_callback:function(e,t){console.log(e)}}}),Object(Be.a)()],data_storage:{save_handler:this.handleSave,interval:4e3,success_handler:this.handleSaveSuccess,failure_handler:this.handleSaveError}})}}]),a}(l.a.Component),vt=D(gt),ft=(a(818),function(e){var t=Object(n.useState)(b),a=Object(k.a)(t,2),i=a[0],o=a[1],r=Object(n.useState)(null!==e.onlineDraft||e.localDraft),s=Object(k.a)(r,2),c=s[0],u=s[1],d=Object(n.useState)(null),m=Object(k.a)(d,2),h=m[0],p=m[1],g=Object(n.useRef)(null),v=Object(n.useRef)(null),f=Object(n.useRef)(null),y=function(){e.onLocalOnlineSync(e.localDraft).then(function(t){t?(console.log("SAVING SIDE WAY"),e.setSavePending(!1)):alert("Save unsucessful")})},E=function(t,a){if(a)window.confirm("Do you want to leave while changes are being saved?")?t===S?e.onPostTypeSet(t,null):o(t):y();else switch(t){case S:e.onPostTypeSet(t,e.localDraft);break;case b:o(t);break;case"REVIEW_STATE":var n=e.localDraft.blocks[0].text;o(t),p(n),e.onLocalSync(e.localDraft);break;default:throw new Error("No Windows Matched")}};return console.log(e.localDraft),i===b?l.a.createElement("div",{className:"longpost-window",ref:g},l.a.createElement("div",{ref:v},e.isSavePending?l.a.createElement("p",null,"Saving"):l.a.createElement("p",null,"Saved"),l.a.createElement("div",{className:"longpost-button-container"},l.a.createElement("span",null,l.a.createElement("button",{value:S,onClick:function(t){return E(t.target.value,e.isSavePending)}},"Return")),l.a.createElement("span",null,l.a.createElement("button",{value:S,onClick:y},"Save Now")),l.a.createElement("span",null,l.a.createElement("button",{value:"REVIEW_STATE",disabled:!c,onClick:function(t){return E(t.target.value,e.isSavePending)}},"Review Post")))),l.a.createElement("div",{id:"longpost-title-editor"}),e.onlineDraftRetrieved&&!e.loading?l.a.createElement("div",{id:"longpost-container"},l.a.createElement(vt,{username:e.username,isSavePending:e.isSavePending,hasContent:c,setHasContent:u,onSavePending:e.setSavePending,onlineDraft:e.onlineDraft,localDraft:e.localDraft,syncChanges:y,setLocalDraft:e.setLocalDraft}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{ref:f})):l.a.createElement("div",null,l.a.createElement("p",null," Loading.... "))):l.a.createElement(Me,{previousState:b,displayPhoto:e.displayPhoto,isPaginated:!1,textData:e.onlineDraft,closeModal:e.closeModal,postType:w,setPostStage:E,username:e.username,preferredPostType:e.preferredPostType,pursuitNames:e.pursuitNames,handlePreferredPostTypeChange:e.handlePreferredPostTypeChange,previewTitle:h})}),bt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={onlineDraftRetrieved:!1,localDraft:null,onlineDraft:null,displayPhoto:null,isSavePending:!1,updatingOnlineDraft:!0,postType:S,pursuitNames:null,pursuitTemplates:null,indexUserData:null,errorRetrievingDraft:!1,errorSaving:!1},n.handleDisablePost=n.handleDisablePost.bind(Object(h.a)(n)),n.handleSubmitPost=n.handleSubmitPost.bind(Object(h.a)(n)),n.setLocalDraft=n.setLocalDraft.bind(Object(h.a)(n)),n.setSavePending=n.setSavePending.bind(Object(h.a)(n)),n.handleLocalSync=n.handleLocalSync.bind(Object(h.a)(n)),n.handleLocalOnlineSync=n.handleLocalOnlineSync.bind(Object(h.a)(n)),n.handlePostTypeSet=n.handlePostTypeSet.bind(Object(h.a)(n)),n.handleDraftRetrieval=n.handleDraftRetrieval.bind(Object(h.a)(n)),n.handleIndexUserDataSet=n.handleIndexUserDataSet.bind(Object(h.a)(n)),n.handleModalClose=n.handleModalClose.bind(Object(h.a)(n)),n.onPreferredPostTypeChange=n.onPreferredPostTypeChange.bind(Object(h.a)(n)),n.renderWindow=n.renderWindow.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._isMounted&&this.props.username&&this.handleIndexUserDataSet()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"setSavePending",value:function(e){this.setState({isSavePending:e})}},{key:"handleModalClose",value:function(){var e=this;this.state.postType===w?this.state.isSavePending&&!window.confirm("Do you want to leave while changes are being saved?")?this.handleLocalOnlineSync(this.state.localDraft).then(function(t){t?(console.log("SAVING SIDE WAY"),e.setSavePending(!1)):alert("Save unsucessful")}):this.props.closeModal():this.state.postType===C&&window.confirm("Do you want to discard this post?")&&this.props.closeModal()}},{key:"setLocalDraft",value:function(e){this.setState({localDraft:e})}},{key:"onPreferredPostTypeChange",value:function(e){this.setState({preferredPostType:e})}},{key:"handleInitialPageLaunch",value:function(e,t,a){e.preventDefault(),a&&this.setState({onlineDraft:null}),this.setState({postType:t})}},{key:"handleLocalSync",value:function(e){this.setState({onlineDraft:e})}},{key:"handleLocalOnlineSync",value:function(e){var t=this;if(e!==this.state.onlineDraft)return this.setState({updatingOnlineDraft:!0}),ee.saveDraft(this.props.username,e).then(function(a){return 200!==a.status&&(console.log("Error"),t.setState({errorSaving:!0})),t.setState({onlineDraft:e,updatingOnlineDraft:!1}),!0}).catch(function(e){console.log(e),t.setState({updatingOnlineDraft:!1})})}},{key:"handleIndexUserDataSet",value:function(){var e=this;ee.returnIndexUser(this.props.username).then(function(t){var a,n=JSON.parse(t.data.draft.text),l=[],i={},o=Object(H.a)(t.data.pursuits);try{for(o.s();!(a=o.n()).done;){var r=a.value;console.log(r.name),i[r.name]=r.meta_template?r.meta_template:"",l.push(r.name)}}catch(s){o.e(s)}finally{o.f()}console.log(i),e.setState({updatingOnlineDraft:!1,onlineDraftRetrieved:!0,pursuitNames:l,pursuitTemplates:i,indexUserData:t.data,displayPhoto:t.data.small_cropped_display_photo_key,onlineDraft:n,localDraft:n})}).catch(function(t){console.log(t),e.setState({onlineDraftRetrieved:!0,updatingOnlineDraft:!1,errorRetrievingDraft:!0}),alert("Something went wrong retrieving your long post draft. \n              Please do not edit your old draft or you will your saved data. \n              Refresh your page or contact support for more help.")})}},{key:"handleDraftRetrieval",value:function(e){var t=this;this.setState({updatingOnlineDraft:!0}),ee.retrieveNewPostInfo(this.props.username).then(function(a){200===a.status?(e&&t.setState({onlineDraftRetrieved:!0}),t.setState({displayPhoto:a.data.smallDisplayPhoto,onlineDraft:JSON.parse(a.data.draft),updatingOnlineDraft:!1})):(t.setState({onlineDraftRetrieved:!0,updatingOnlineDraft:!1,errorRetrievingDraft:!0}),alert("Something went wrong retrieving your long post draft. \n            Please do not edit your old draft or you will your saved data. \n            Refresh your page or contact support for more help."))}).catch(function(e){console.log(e)})}},{key:"handleSubmitPost",value:function(e){alert("PRESSED SUBMIT")}},{key:"handleDisablePost",value:function(e){this.setState({postDisabled:e})}},{key:"handlePostTypeSet",value:function(e,t){switch(e){case S:t?this.setState({postType:e,onlineDraft:t}):this.setState({postType:e});break;case C:this.setState({postType:e});break;case"NEW_LONG":this.setState({postType:w,onlineDraft:null});break;case"OLD_LONG":this.setState({postType:w});break;default:throw Error("No postType options matched :(")}}},{key:"renderWindow",value:function(e){switch(e){case S:return l.a.createElement(rt,{onlineDraft:this.state.onlineDraft,onPostTypeSet:this.handlePostTypeSet});case C:return l.a.createElement(pt,{displayPhoto:this.state.displayPhoto,username:this.props.username,closeModal:this.props.closeModal,pursuitNames:this.state.pursuitNames,pursuitTemplates:this.state.pursuitTemplates,disablePost:this.handleDisablePost,setImageArray:this.setImageArray,onPostTypeSet:this.handlePostTypeSet,preferredPostType:this.state.indexUserData.preferredPostType,handlePreferredPostTypeChange:this.onPreferredPostTypeChange});case w:return l.a.createElement(ft,{displayPhoto:this.state.displayPhoto,username:this.props.username,onlineDraft:this.state.onlineDraft,pursuitNames:this.state.pursuitNames,onlineDraftRetrieved:this.state.onlineDraftRetrieved,preferredPostType:this.state.indexUserData.preferredPostType,updatingOnlineDraft:this.state.updatingOnlineDraft,onLocalDraftChange:this.handleLocalDraftChange,localDraft:this.state.localDraft,setLocalDraft:this.setLocalDraft,onLocalOnlineSync:this.handleLocalOnlineSync,onLocalSync:this.handleLocalSync,onPostTypeSet:this.handlePostTypeSet,setSavePending:this.setSavePending,isSavePending:this.state.isSavePending,disablePost:this.handleDisablePost,handlePreferredPostTypeChange:this.onPreferredPostTypeChange,closeModal:this.props.closeModal});default:throw Error("No postType options matched :(")}}},{key:"render",value:function(){return this.state.indexUserData?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"close",onClick:this.props.closeModal},"X"),this.renderWindow(this.state.postType)):l.a.createElement(l.a.Fragment,null,"updatingOnlineDraft...")}}]),a}(l.a.Component),yt=D(bt),Et=(a(819),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this))._isMounted=!1,e.state={userRelationId:null,following:[],followers:[],requested:[]},e.handleStatusChange=e.handleStatusChange.bind(Object(h.a)(e)),e.handleRenderRelation=e.handleRenderRelation.bind(Object(h.a)(e)),e.renderUserRow=e.renderUserRow.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,ee.returnUserRelationInfo(this.props.username).then(function(t){if(e._isMounted){var a=e.handleRenderRelation(e.renderUserRow,t.data.following,!1),n=e.handleRenderRelation(e.renderUserRow,t.data.followers,!1),l=e.handleRenderRelation(e.renderUserRow,t.data.requested,!0);e.setState({userRelationId:t.data._id,following:a,followers:n,requested:l})}})}},{key:"handleStatusChange",value:function(e,t){var a=this;return ee.changeRelationStatus(e,t,this.props.username,this.state.userRelation._id).then(function(){return ee.returnUserRelationInfo(a.props.username)}).then(function(e){a._isMounted&&a.setState({userRelation:e.data})}).catch(function(e){return window.alert("Something went wrong :(")})}},{key:"renderUserRow",value:function(e,t){var a,n=this,i=[],o=Object(H.a)(e);try{var r=function(){var e=a.value;i.push(l.a.createElement("div",{className:"relationmodal-profile-row"},l.a.createElement("div",{className:"relationmodal-profile-info-container"},l.a.createElement("img",{src:Object(Z.returnUserImageURL)(e.display_photo)}),l.a.createElement("a",{href:Object(Z.returnUsernameURL)(e.username)},e.username)),t?null:l.a.createElement("button",{onClick:function(){return n.handleStatusChange("UNFOLLOW",e.username)}},"Following"),t?l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){return n.handleStatusChange("ACCEPT",e.username)}},"Accept Request"),l.a.createElement("button",{onClick:function(){return n.handleStatusChange("DECLINE",e.username)}},"Decline Request")):null))};for(o.s();!(a=o.n()).done;)r()}catch(s){o.e(s)}finally{o.f()}return i}},{key:"handleRenderRelation",value:function(e,t,a){return t?e(t,a):null}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"relationmodal-window"},l.a.createElement("span",{className:"close",onClick:function(){return e.props.closeModal("REQUEST")}},"X"),l.a.createElement("div",{id:"relationmodal-hero-container"},l.a.createElement("div",{className:"relationmodal-column"},l.a.createElement("h2",null,"Requests"),this.state.requested),l.a.createElement("div",{className:"relationmodal-column"},l.a.createElement("h2",null,"Followers"),this.state.followers),l.a.createElement("div",{className:"relationmodal-column"},l.a.createElement("h2",null,"Following"),this.state.following)))}}]),a}(l.a.Component)),Pt=(a(820),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={showMenu:!1},e.showMenu=e.showMenu.bind(Object(h.a)(e)),e.closeMenu=e.closeMenu.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"showMenu",value:function(e){var t=this;e.preventDefault(),this.setState({showMenu:!0},function(){document.addEventListener("click",t.closeMenu)})}},{key:"closeMenu",value:function(){var e=this;this.setState({showMenu:!1},function(){document.removeEventListener("click",e.closeMenu)})}},{key:"render",value:function(){return l.a.createElement("div",{id:"optionsmenu-main-container"},l.a.createElement("div",{id:"optionsmenu-pre-click-container"},l.a.createElement("button",{onClick:this.showMenu},l.a.createElement("h4",null,"..."))),this.state.showMenu?l.a.createElement("div",{id:"optionsmenu-inner-menu-container"},this.props.shouldHideFriendsTab?null:l.a.createElement("div",{className:"optionsmenu-button-container"},l.a.createElement(r.b,{to:"/account"},"Edit Your Profile")),l.a.createElement("div",{className:"optionsmenu-button-container"},l.a.createElement("button",{onClick:this.props.firebase.doSignOut},l.a.createElement("h4",null,"Sign Out")))):null)}}]),a}(l.a.Component)),St=D(Pt),Ct=(a(821),function(){return l.a.createElement("nav",null,l.a.createElement("div",null,l.a.createElement(r.b,{to:"/",className:"navbar-navigation-link"},"interestHub")))}),wt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={username:n.props.firebase.returnUsername(),tinyDisplayPhoto:null,previousLongDraft:null,existingUserLoading:!0,isExistingUser:!1,isPostModalShowing:!1,isRequestModalShowing:!1},n.modalRef=l.a.createRef(),n.renderModal=n.renderModal.bind(Object(h.a)(n)),n.closeModal=n.closeModal.bind(Object(h.a)(n)),n.openModal=n.openModal.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=!0,a=!1;this.props.firebase.checkIsExistingUser().then(function(n){return t=!1,n&&(console.log("isExisting"),a=!0),ee.returnTinyDisplayPhoto(e.state.username)}).then(function(n){console.log(t),console.log(a),e.setState({isExistingUser:a,existingUserLoading:t,tinyDisplayPhoto:n.data?Object(Z.returnUserImageURL)(n.data):Z.TEMP_PROFILE_PHOTO_URL})})}},{key:"openModal",value:function(e){document.body.style.overflow="hidden",this.modalRef.current&&(this.modalRef.current.style.display="block"),e===y?this.setState({isPostModalShowing:!0}):"REQUEST"===e&&this.setState({isRequestModalShowing:!0})}},{key:"closeModal",value:function(){console.log("Clicked"),this.modalRef.current.style.display="none",document.body.style.overflow="visible",this.setState({isRequestModalShowing:!1,isPostModalShowing:!1})}},{key:"renderModal",value:function(){var e=this,t=null;return this.state.isPostModalShowing?t=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"overlay",onClick:function(){return e.closeModal()}}),l.a.createElement(yt,{username:this.state.username,closeModal:this.closeModal})):this.state.isRequestModalShowing&&(t=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"overlay",onClick:function(){return e.closeModal()}}),l.a.createElement(Et,{username:this.state.username,closeModal:this.closeModal}))),l.a.createElement("div",{className:"modal",ref:this.modalRef},l.a.createElement("div",{className:"overlay"}),t)}},{key:"render",value:function(){var e=this;console.log(this.state.isPostModalShowing),console.log(this.state.isRequestModalShowing);var t=this.state.existingUserLoading||!this.state.existingUserLoading&&!this.state.isExistingUser;return l.a.createElement(l.a.Fragment,null,l.a.createElement("nav",null,l.a.createElement("div",{id:"navbar-left-container"},l.a.createElement(r.b,{to:"/",className:"navbar-navigation-link"},l.a.createElement("div",{id:"navbar-logo-container"},l.a.createElement("h3",null,"Everfire"))),t?l.a.createElement(l.a.Fragment,null):l.a.createElement("div",{className:"navbar-main-action-buttons-container"},l.a.createElement("button",{onClick:function(){return e.openModal(y)}},l.a.createElement("h4",null,"New Entry")))),l.a.createElement("div",{id:"navbar-right-container"},t?l.a.createElement(l.a.Fragment,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(r.b,{to:Object(Z.returnUsernameURL)(this.state.username)},l.a.createElement("div",{className:"navbar-main-action-buttons-container"},l.a.createElement("div",{id:"navbar-display-photo-container"},l.a.createElement("img",{src:this.state.tinyDisplayPhoto})),l.a.createElement("p",null,this.state.username))),l.a.createElement("div",{className:"navbar-main-action-buttons-container"},l.a.createElement("button",{onClick:function(){return e.openModal("REQUEST")}},l.a.createElement("h4",null,"Friends")))),l.a.createElement(St,{shouldHideFriendsTab:!this.state.existingUserLoading&&!this.state.isExistingUser}))),this.state.existingUserLoading?l.a.createElement(l.a.Fragment,null):this.renderModal())}}]),a}(l.a.Component),Ot=D(wt),kt=function(){return l.a.createElement(de.Consumer,null,function(e){return e&&e.emailVerified?l.a.createElement(Ot,null):l.a.createElement(Ct,null)})},It=(a(822),Object(s.f)(function(e){return l.a.createElement("div",{className:"pursuitholder-container",key:e.name,onClick:function(){return e.onFeedSwitch(e.value)}},l.a.createElement("h4",null,"  ",e.name,"  "),e.numEvents?l.a.createElement("p",null,"  Events: ",e.numEvents,"  "):l.a.createElement(l.a.Fragment,null))})),Tt=l.a.createElement("div",null,"404"),Dt=function(e){if(!e.followerStatus||e.isOwner)return l.a.createElement(l.a.Fragment,null);var t="",a=!0;switch(e.followerStatus){case"NOT_A_FOLLOWER":t="Follow",a=!1;break;case"FOLLOW_REQUESTED":t="Requested";break;case"FOLLOWING":t="Followed"}return a?l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){return e.onFollowClick("UNFOLLOW")}},t)):l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){return e.onFollowClick("FOLLOW")}},t))},xt=(a(823),function(e){return l.a.createElement("div",{id:"project-hero-title-overview-container"},l.a.createElement(ve.a,{id:"project-title",placeholder:"Write a Title for your Post!",maxLength:140,onChange:function(t){return e.onTextChange("TITLE",t.target.value)},value:e.titleValue}),l.a.createElement(ve.a,{id:"project-overview",placeholder:"Write an Overview for your Project!",maxLength:140,onChange:function(t){return e.onTextChange("OVERVIEW",t.target.value)},value:e.descriptionValue}))}),jt=(a(824),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={hasMore:!0,feedData:[[]],fixedDataLoadLength:4,nextOpenPostIndex:0},n.fetchNextPosts=n.fetchNextPosts.bind(Object(h.a)(n)),n.createTimelineRow=n.createTimelineRow.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.allPosts?this.fetchNextPosts(this.props.allPosts):this.setState({hasMore:!1})}},{key:"createTimelineRow",value:function(e,t){for(var a=this,n=this.props.feedData,i=n.length-1,o=this.state.nextOpenPostIndex,r=0,s=n[i].length;r<e.length;){for(;s<4;){var c=!1;if(!e[r])break;if(this.props.selectedPosts){var u,d=Object(H.a)(this.props.selectedPosts);try{for(d.s();!(u=d.n()).done;){u.value.key===e[r]._id&&(c=!0)}}catch(m){d.e(m)}finally{d.f()}}n[i].push(l.a.createElement(ze,{columnIndex:s,mediaType:t,isSelected:c,newProjectView:this.props.newProjectView,key:o,eventIndex:o,eventData:e[r],onEventClick:this.props.onEventClick,onProjectClick:this.props.onProjectClick,onProjectEventSelect:this.props.onProjectEventSelect})),o++,s++,r++}if(4===s&&n.push([]),!e[r])break;i++,s=0}this.setState({nextOpenPostIndex:o},function(){return a.props.updateFeedData(n)})}},{key:"fetchNextPosts",value:function(){var e=this;return this.state.nextOpenPostIndex+this.state.fixedDataLoadLength>=this.props.allPosts.length&&(console.log("Length of All Posts Exceeded"),this.setState({hasMore:!1})),"PROJECT"===this.props.mediaType?ee.returnMultipleProjects(this.props.allPosts.slice(this.state.nextOpenPostIndex,this.state.nextOpenPostIndex+this.state.fixedDataLoadLength)).then(function(t){console.log(t.data),e._isMounted&&e.createTimelineRow(t.data,e.props.mediaType)}).catch(function(e){return console.log(e)}):ee.returnMultiplePosts(this.props.allPosts.slice(this.state.nextOpenPostIndex,this.state.nextOpenPostIndex+this.state.fixedDataLoadLength),!1).then(function(t){e._isMounted&&e.createTimelineRow(t.data.posts,e.props.mediaType)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("p",{style:{textAlign:"center"}},"Yay! You have seen it all"));return this._isMounted&&this.props.allPosts?l.a.createElement("div",{key:this.props.feedKey},this.props.allPosts&&this.props.allPosts.length>0?l.a.createElement(ue.a,{dataLength:this.state.nextOpenPostIndex,next:this.fetchNextPosts,hasMore:this.state.hasMore,loader:l.a.createElement("h4",null,"Loading..."),endMessage:e},this.props.feedData.map(function(e,t){return l.a.createElement("div",{className:"timeline-infinite-scroll-row",key:t},e)}),l.a.createElement("br",null)):l.a.createElement("p",null,"There doesn't seem to be anything here")):l.a.createElement("div",null,l.a.createElement("p",null,"Loading"))}}]),a}(l.a.Component)),Rt=(a(825),"MAIN"),_t=function(e){return 4===++e?0:e},Mt=Object(ct.b)(function(e){var t=e.mediaType,a=e.value,n=e.classColumnIndex;return l.a.createElement("div",{className:"projectcontroller-event-container"},l.a.createElement(ze,{index:n,mediaType:t,eventData:a,newProjectView:!1,key:a._id,disableModalPreview:!0}))}),Ut=Object(ct.a)(function(e){var t=e.mediaType,a=e.items,n=e.onSortEnd;return l.a.createElement("ul",null,a.map(function(e,a){return l.a.createElement(Mt,{key:"item-".concat(a),index:a,classColumnIndex:e.column_index,value:e,mediaType:t,onSortEnd:n})}))}),At=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={window:Rt,selectedPosts:[],title:"",overview:"",pursuitCategory:n.props.pursuitNames?n.props.pursuitNames[0]:null,startDate:"",endDate:"",isComplete:!1,minDuration:null,coverPhoto:null,newProject:!1,projectSelected:null,feedData:[[]]},n.handleBackClick=n.handleBackClick.bind(Object(h.a)(n)),n.handleProjectClick=n.handleProjectClick.bind(Object(h.a)(n)),n.handleProjectEventSelect=n.handleProjectEventSelect.bind(Object(h.a)(n)),n.handleWindowSwitch=n.handleWindowSwitch.bind(Object(h.a)(n)),n.handleSortEnd=n.handleSortEnd.bind(Object(h.a)(n)),n.handlePost=n.handlePost.bind(Object(h.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(h.a)(n)),n.updateFeedData=n.updateFeedData.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"updateFeedData",value:function(e){this.setState({feedData:e})}},{key:"handleBackClick",value:function(){this.state.projectSelected?this.setState({projectSelected:null}):this.props.onNewBackProjectClick()}},{key:"handleInputChange",value:function(e,t){switch(e){case"TITLE":this.setState({title:t});break;case"OVERVIEW":this.setState({overview:t});break;case"PURSUIT":this.setState({pursuitCategory:t});break;case"START_DATE":this.setState({startDate:t});break;case"END_DATE":this.setState({endDate:t});break;case"IS_COMPLETE":this.setState({isComplete:t});break;case"MINUTES":this.setState({minDuration:t});break;case"COVER_PHOTO":this.setState({coverPhoto:t});break;default:throw new Error("NO TEXT ID'S Matched in POST")}}},{key:"handleWindowSwitch",value:function(e){var t=0;if("REVIEW"===e){var a,n=Object(H.a)(this.state.selectedPosts);try{for(n.s();!(a=n.n()).done;){var l=a.value;l.min_duration&&(t+=l.min_duration)}}catch(i){n.e(i)}finally{n.f()}}this.setState({window:e,min:0!==t?t:null})}},{key:"handleProjectEventSelect",value:function(e){var t,a=[],n=!1,l=-1,i=Object(H.a)(this.state.selectedPosts);try{for(i.s();!(t=i.n()).done;){var o=t.value;o._id!==e._id?(l=_t(l),o.column_index=l,a.push(o)):n=!0}}catch(r){i.e(r)}finally{i.f()}n||(l=_t(l),e.column_index=l,a.push(e)),console.log(a),this.setState({selectedPosts:a})}},{key:"handleSortEnd",value:function(e){var t=e.oldIndex,a=e.newIndex;console.log(t,a);var n=this.state.selectedPosts,l=n.splice(t,1),i=Object(k.a)(l,1)[0],o=-1;n.splice(a,0,i);var r,s=Object(H.a)(n);try{for(s.s();!(r=s.n()).done;){var c=r.value;o=_t(o),c.column_index=o}}catch(u){s.e(u)}finally{s.f()}console.log(n),this.setState({selectedPosts:n})}},{key:"handlePost",value:function(){var e=new FormData;if(e.append("username",this.props.username),e.append("displayPhoto",this.props.displayPhoto),e.append("userId",this.props.targetProfileId),e.append("indexUserId",this.props.targetIndexUserId),e.append("title",this.state.title),this.state.overview&&e.append("overview",this.state.overview),this.state.pursuitCategory&&e.append("pursuitCategory",this.state.pursuitCategory),this.state.startDate&&e.append("startDate",this.state.startDate),this.state.endDate&&e.append("endDate",this.state.endDate),this.state.isComplete&&e.append("isComplete",this.state.isComplete),this.state.minDuration&&e.append("minDuration",this.state.minDuration),this.state.coverPhoto&&e.append("coverPhoto",this.state.coverPhoto),this.state.selectedPosts){var t=JSON.stringify(this.state.selectedPosts);e.append("selectedPosts",t)}return ee.createProject(e).then(function(e){console.log(e),alert("Success!"),window.location.reload()}).catch(function(e){return console.log(e)})}},{key:"handleProjectClick",value:function(e){this.setState({projectSelected:e})}},{key:"render",value:function(){var e=this;switch(this.state.window){case Rt:var t=this.props.newProject||this.state.projectSelected;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:""},t?l.a.createElement("button",{onClick:this.handleBackClick},"Back"):l.a.createElement("button",{onClick:this.props.onNewBackProjectClick},"New"),this.props.newProject?l.a.createElement("button",{id:"project-info-button",onClick:function(){return e.handleWindowSwitch("EDIT")}},"Next Step"):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:""},this.props.newProject?l.a.createElement(xt,{titleValue:this.state.title,descriptionValue:this.state.overview,onTextChange:this.handleInputChange}):l.a.createElement(l.a.Fragment,null),this.props.newProject?l.a.createElement("p",null,"Select the posts you want to include in this project!"):l.a.createElement(l.a.Fragment,null),l.a.createElement(jt,{mediaType:t?y:this.props.mediaType,selectedPosts:this.state.selectedPosts,newProjectView:this.props.newProject,onProjectEventSelect:this.handleProjectEventSelect,onProjectClick:this.handleProjectClick,allPosts:this.state.projectSelected?this.state.projectSelected.post_ids:this.props.allPosts,onEventClick:this.props.onEventClick,feedData:this.state.feedData,updateFeedData:this.updateFeedData,targetProfileId:this.props.targetProfileId})));case"EDIT":return l.a.createElement("div",null,l.a.createElement("div",{className:""},l.a.createElement("button",{onClick:function(){return e.handleWindowSwitch(Rt)}},"Return"),l.a.createElement("button",{onClick:function(){return e.handleWindowSwitch("REVIEW")}},"Finalize")),l.a.createElement("div",{id:"projectcontroller-sortable-list-container"},l.a.createElement(Ut,{mediaType:y,items:this.state.selectedPosts,onSortEnd:this.handleSortEnd,axis:"xy"})));case"REVIEW":var a,n=[],i=Object(H.a)(this.props.pursuitNames);try{for(i.s();!(a=i.n()).done;){var o=a.value;n.push(l.a.createElement("option",{key:o,value:o},o))}}catch(r){i.e(r)}finally{i.f()}return l.a.createElement("div",null,l.a.createElement("div",{className:""},l.a.createElement("button",{onClick:function(){return e.handleWindowSwitch(Rt)}},"Return"),l.a.createElement("button",{onClick:function(){return e.handlePost()}},"Post!")),l.a.createElement("div",{id:"projectcontroller-submit-container"},l.a.createElement(ve.a,{value:this.state.title,onChange:function(t){return e.handleInputChange("TITLE",t.target.value)}}),l.a.createElement(ve.a,{value:this.state.overview,onChange:function(t){return e.handleInputChange("OVERVIEW",t.target.value)}}),l.a.createElement("label",null,"Pursuit"),l.a.createElement("select",{name:"pursuit-category",value:this.state.pursuitCategory,onChange:function(t){return e.handleInputChange("PURSUIT",t.target.value)}},n),l.a.createElement("label",null,"Start Date"),l.a.createElement("input",{type:"date",value:this.state.startDate,onChange:function(t){return e.handleInputChange("START_DATE",t.target.value)}}),l.a.createElement("label",null,"End Date"),l.a.createElement("input",{type:"date",value:this.state.endDate,onChange:function(t){return e.handleInputChange("END_DATE",t.target.value)}}),l.a.createElement("label",null,"Total Minutes"),l.a.createElement("input",{type:"number",value:this.state.minDuration,onChange:function(t){return e.handleInputChange("MINUTES",t.target.value)}}),l.a.createElement("label",null,"Is Complete"),l.a.createElement("input",{type:"checkbox",onClick:function(){return e.handleInputChange("IS_COMPLETE",!e.state.isComplete)}}),l.a.createElement("label",null,"Cover Photo"),l.a.createElement("input",{type:"file",onChange:function(t){return e.handleInputChange("COVER_PHOTO",t.target.files[0])}}),l.a.createElement("button",{onClick:this.handlePost},"Submit")));default:throw new Error("No Window Options Matched in post-project-controller")}}}]),a}(l.a.Component),Nt=(a(826),a(827),function(e){return l.a.createElement("div",{className:"modal",ref:e.modalRef},l.a.createElement("div",{className:"overlay",onClick:e.closeModal}),l.a.createElement("span",{className:"close",onClick:e.closeModal},"X"),l.a.createElement("div",{id:"profilemodal-window-reset"},e.isModalShowing&&e.eventData?l.a.createElement(We,{isOwnProfile:e.visitorUsername===e.targetUsername,targetProfileId:e.targetProfileId,targetIndexUserId:e.targetIndexUserId,visitorUsername:e.visitorUsername,isPostOnlyView:!1,postIndex:e.selectedPostIndex,visitorDisplayPhoto:e.smallCroppedDisplayPhoto,preferredPostType:e.preferredPostType,postType:e.postType,largeViewMode:!0,pursuitNames:e.pursuitNames,eventData:e.eventData,textData:e.textData,closeModal:e.closeModal,onCommentIDInjection:e.onCommentIDInjection}):l.a.createElement(l.a.Fragment,null)))}),Lt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var l;return Object(d.a)(this,a),(l=t.call(this,e)).state={feedKey:0,feedData:[[]],selectedEvent:null,selectedPostIndex:null,isModalShowing:!1},l.modalRef=Object(n.createRef)(null),l.updateFeedData=l.updateFeedData.bind(Object(h.a)(l)),l.handleEventClick=l.handleEventClick.bind(Object(h.a)(l)),l.handleCommentIDInjection=l.handleCommentIDInjection.bind(Object(h.a)(l)),l.closeModal=l.closeModal.bind(Object(h.a)(l)),l.openModal=l.openModal.bind(Object(h.a)(l)),l}return Object(m.a)(a,[{key:"updateFeedData",value:function(e){this.setState({feedData:e})}},{key:"openModal",value:function(e){console.log(e),this.modalRef.current.style.display="block",document.body.style.overflow="hidden",this.setState({isModalShowing:!0},this.props.history.replace(Object(Z.returnPostURL)(e)))}},{key:"closeModal",value:function(){this.modalRef.current.style.display="none",document.body.style.overflow="visible",this.setState({isModalShowing:!1},this.props.history.replace(Object(Z.returnUsernameURL)(this.props.targetUsername)))}},{key:"handleCommentIDInjection",value:function(e,t,a){var n=this.state.feedData,l=Math.floor(this.state.selectedPostIndex/4),i=this.state.selectedPostColumnIndex;n[l][i].props.eventData.comments=t,n[l][i].props.eventData.comment_count=n[l][i].props.eventData.comment_count+1,this.setState(function(e){return{feedData:n,feedKey:e.feedKey+1}})}},{key:"handleEventClick",value:function(e,t,a){var n=this;return ee.retrievePost(e._id,!0).then(function(l){return n.setState({selectedEvent:e,selectedPostIndex:t,selectedPostColumnIndex:a,textData:l.data,postType:e.post_format},n.openModal(e._id))}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Nt,{modalRef:this.modalRef,isModalShowing:this.state.isModalShowing,targetProfileId:this.props.targetProfileId,targetIndexUserId:this.props.targetIndexUserId,isOwnProfile:this.props.isOwnProfile,visitorUsername:this.props.visitorUsername,postIndex:this.state.selectedPostIndex,visitorDisplayPhoto:this.props.visitorDisplayPhoto,preferredPostType:this.props.preferredPostType,postType:this.state.postType,pursuitNames:this.props.pursuitNames,eventData:this.state.selectedEvent,textData:this.state.textData,closeModal:this.closeModal,onCommentIDInjection:this.handleCommentIDInjection}),l.a.createElement(jt,{mediaType:y,feedKey:this.state.feedKey,allPosts:this.props.feedIDList,targetProfileId:this.props.targetProfileId,feedData:this.state.feedData,onEventClick:this.handleEventClick,updateFeedData:this.updateFeedData}))}}]),a}(l.a.Component),Ft=Object(s.f)(Lt),Bt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={visitorUsername:null,targetProfileId:null,targetProfilePreviewId:null,targetUsername:n.props.match.params.username,isPrivate:!0,croppedDisplayPhoto:null,smallCroppedDisplayPhoto:null,coverPhoto:"",bio:"",pursuits:null,recentPosts:null,allPosts:null,allProjects:null,fail:!1,textData:null,userRelationId:null,followerStatus:null,feedId:null,feedIDList:null,mediaType:y,selectedPursuitIndex:-1,preferredPostType:null,newProject:!1,postOnlyView:null},n.modalRef=l.a.createRef(),n.miniModalRef=l.a.createRef(),n.renderHeroContent=n.renderHeroContent.bind(Object(h.a)(n)),n.returnPublicPosts=n.returnPublicPosts.bind(Object(h.a)(n)),n.handleFollowClick=n.handleFollowClick.bind(Object(h.a)(n)),n.handleFollowerStatusChange=n.handleFollowerStatusChange.bind(Object(h.a)(n)),n.handleOptionsClick=n.handleOptionsClick.bind(Object(h.a)(n)),n.handleFeedSwitch=n.handleFeedSwitch.bind(Object(h.a)(n)),n.handleMediaTypeSwitch=n.handleMediaTypeSwitch.bind(Object(h.a)(n)),n.handleNewBackProjectClick=n.handleNewBackProjectClick.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,this._isMounted&&this.state.targetUsername)this.props.firebase.auth.onAuthStateChanged(function(t){if(t){var a=null;ee.returnUser(e.state.targetUsername).then(function(n){return a=n.data,t.displayName!==e.state.targetUsername?ee.returnFollowerStatus(t.displayName,a.user_relation_id):null}).then(function(n){e.handleResponseData(t,a,n||null)}).catch(function(e){return console.log(e)})}else ee.returnUser(e.state.targetUsername).then(function(a){return e.handleResponseData(t,a.data,null)}).catch(function(e){return console.log(e)})});else{if(!this._isMounted||!this.props.match.params.postId)throw new Error("No profile or post matched");this.props.firebase.auth.onAuthStateChanged(function(t){return t?Promise.all([ee.retrievePost(e.props.match.params.postId,!1),ee.returnUser(t.displayName)]).then(function(a){var n,l=[],i=Object(H.a)(a[1].data.pursuits);try{for(i.s();!(n=i.n()).done;){var o=n.value;l.push(o.name)}}catch(r){i.e(r)}finally{i.f()}e._isMounted&&e.setState({selectedEvent:a[0].data,postOnlyView:!0,postType:a[0].data.post_format,visitorUsername:t.displayName,targetUsername:a[0].data.username,pursuitNames:l})}):ee.retrievePost(e.props.match.params.postId,!1).then(function(t){e._isMounted&&e.setState({selectedEvent:t.data,postOnlyView:!0,postType:t.data.post_format,visitorUsername:null,targetUsername:t.data.username,pursuitNames:[]})})})}}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"handleMediaTypeSwitch",value:function(e){if(this.state.newProject){if(!window.confirm("Do you want to discard your new project?"))return;this.setState({newProject:!1})}-1===this.state.selectedPursuitIndex?this.setState(function(t){return{feedId:"ALL"+e,mediaType:e,feedIDList:e===y?t.allPosts:t.allProjects}}):this.setState(function(t){return{feedId:t.pursuits[t.selectedPursuitIndex].name+e,mediaType:e,feedIDList:e===y?t.pursuits[t.selectedPursuitIndex].all_posts?t.pursuits[t.selectedPursuitIndex].all_posts:[]:t.pursuits[t.selectedPursuitIndex].all_projects?t.pursuits[t.selectedPursuitIndex].all_projects:[]}})}},{key:"handleFeedSwitch",value:function(e){if(this.state.newProject){if(!window.confirm("Do you want to discard your new project?"))return;this.setState({newProject:!1})}-1===e?this.setState(function(e){return{selectedPursuitIndex:-1,feedId:"ALL"+e.mediaType,feedIDList:e.mediaType===y?e.allPosts:e.allProjects}}):this.setState(function(t){return{selectedPursuitIndex:e,feedId:t.pursuits[e].name+t.mediaType,feedIDList:t.mediaType===y?t.pursuits[e].all_posts?t.pursuits[e].all_posts:[]:t.pursuits[e].all_projects?t.pursuits[e].all_projects:[]}})}},{key:"handleFollowerStatusResponse",value:function(e){if(200===e.status){if(e.data.success){if("FOLLOWING"===e.data.success)return"FOLLOWING";if("FOLLOW_REQUESTED"===e.data.success)return"FOLLOW_REQUESTED";throw Error}if(e.data.error)return"NOT_A_FOLLOWER"===e.data.error||"UNFOLLOWED"===e.data.error?"NOT_A_FOLLOWER":"FOLLOW_REQUESTED"}}},{key:"returnPublicPosts",value:function(e){return e.reduce(function(e,t){return"PRIVATE"!==t.post_privacy_type&&e.push(t),e},[])}},{key:"handleResponseData",value:function(e,t,a){var n,l=[],i=[],o=e&&e.displayName===t.username?t.all_posts:this.returnPublicPosts(t.all_posts),r=a?this.handleFollowerStatusResponse(a):null,s=Object(H.a)(t.pursuits);try{for(s.s();!(n=s.n()).done;){var c=n.value;if(l.push(c.name),c.projects){var u,d=Object(H.a)(c.projects);try{for(d.s();!(u=d.n()).done;){var m=u.value;i.push(m)}}catch(h){d.e(h)}finally{d.f()}}}}catch(h){s.e(h)}finally{s.f()}this._isMounted&&this.setState({visitorUsername:e?e.displayName:null,targetUsername:t.username,targetProfileId:t._id,targetIndexUserId:t.index_user_id,targetProfilePreviewId:t.user_preview_id,isPrivate:t.private,coverPhoto:t.cover_photo_key,croppedDisplayPhoto:t.cropped_display_photo_key,smallCroppedDisplayPhoto:t.small_cropped_display_photo_key,bio:t.bio,pinned:t.pinned,pursuits:t.pursuits,pursuitNames:l,allPosts:o,allProjects:i,feedIDList:o,mediaType:y,feedId:"ALL"+y,userRelationId:t.user_relation_id,followerStatus:r,postOnlyView:!1})}},{key:"renderHeroContent",value:function(){return this.state.mediaType===y?l.a.createElement(Ft,{targetProfileId:this.state.targetProfileId,targetIndexUserId:this.state.targetIndexUserId,feedIDList:this.state.feedIDList,isOwnProfile:this.state.visitorUsername===this.state.targetUsername,visitorUsername:this.state.visitorUsername,targetUsername:this.state.targetUsername,postIndex:this.state.selectedPostIndex,visitorDisplayPhoto:this.state.smallCroppedDisplayPhoto,preferredPostType:this.state.preferredPostType,postType:this.state.postType,pursuitNames:this.state.pursuitNames,eventData:this.state.selectedEvent,textData:this.state.textData}):l.a.createElement(At,{username:this.state.targetUsername,displayPhoto:this.state.smallCroppedDisplayPhoto,targetProfileId:this.state.targetProfileId,targetIndexUserId:this.state.targetIndexUserId,mediaType:this.state.mediaType,newProject:this.state.newProject,feedId:this.state.feedId,allPosts:this.state.feedIDList,onNewBackProjectClick:this.handleNewBackProjectClick,pursuitNames:this.state.pursuitNames})}},{key:"handleNewBackProjectClick",value:function(){this.state.newProject?this.setState({newProject:!1},this.handleMediaTypeSwitch(this.state.mediaType)):this.setState(function(e){return{newProject:!e.newProject,feedId:"NEW PROJECT",feedIDList:e.allPosts}})}},{key:"handleFollowerStatusChange",value:function(e){var t=this;ee.setFollowerStatus({visitorUsername:this.state.visitorUsername,targetUserRelationId:this.state.userRelationId,targetProfilePreviewId:this.state.targetProfilePreviewId,isPrivate:this.state.isPrivate,action:e}).then(function(e){200===e.status&&(e.data.success?t.setState({followerStatus:e.data.success}):t.setState({followerStatus:e.data.error}))}).catch(function(e){console.log(e)})}},{key:"handleFollowClick",value:function(e){"FOLLOW"===e?this.handleFollowerStatusChange(e):window.confirm("Are you sure you want to unfollow?")&&this.handleFollowerStatusChange(e)}},{key:"handleOptionsClick",value:function(){}},{key:"render",value:function(){var e=this,t=null===this.state.visitorUsername&&this.state.isPrivate||this.state.visitorUsername!==this.state.targetUsername&&this.state.isPrivate&&"FOLLOWING"!==this.state.followerStatus&&"REQUEST_ACCEPTED"!==this.state.followerStatus,a=[l.a.createElement(It,{key:"ALL",name:"ALL",value:-1,onFeedSwitch:this.handleFeedSwitch})];if(this.state.fail)return Tt;if(this.state.pursuits){var n,i=0,o=Object(H.a)(this.state.pursuits);try{for(o.s();!(n=o.n()).done;){var r=n.value;a.push(l.a.createElement(It,{name:r.name,numEvents:r.num_posts,key:r.name,value:i++,onFeedSwitch:this.handleFeedSwitch}))}}catch(s){o.e(s)}finally{o.f()}}return this.state.postOnlyView?l.a.createElement(We,{targetProfileId:this.state.targetProfileId,targetIndexUserId:this.state.targetIndexUserId,key:this.state.selectedEvent._id,isOwnProfile:this.state.visitorUsername===this.state.selectedEvent.username,visitorUsername:this.state.visitorUsername,largeViewMode:!0,isPostOnlyView:this.state.postOnlyView,visitorDisplayPhoto:this.state.smallCroppedDisplayPhoto,preferredPostType:this.state.preferredPostType,postType:this.state.postType,pursuitNames:this.state.pursuitNames,eventData:this.state.selectedEvent,textData:this.state.selectedEvent.post_format===w?JSON.parse(this.state.selectedEvent.text_data):this.state.selectedEvent.text_data}):this.state.postOnlyView?new Error("State condition for postOnlyView was null"):l.a.createElement("div",null,l.a.createElement("div",{id:"profile-main-container"},l.a.createElement("div",{id:"profile-cover-photo-container"},this.state.coverPhoto?l.a.createElement("img",{alt:"cover photo",src:Object(Z.returnUserImageURL)(this.state.coverPhoto)}):l.a.createElement("div",{id:"profile-temp-cover"})),l.a.createElement("div",{id:"profile-intro-container"},l.a.createElement("div",{id:"profile-display-photo-container"},l.a.createElement("img",{alt:"user profile photo",src:this.state.croppedDisplayPhoto?Object(Z.returnUserImageURL)(this.state.croppedDisplayPhoto):Z.TEMP_PROFILE_PHOTO_URL}),l.a.createElement("div",{id:"profile-name-container"},l.a.createElement("h4",null,this.state.targetUsername)),l.a.createElement("div",{id:"profile-follow-actions-container"},l.a.createElement(Dt,{isOwner:this.state.targetUsername===this.state.visitorUsername,followerStatus:this.state.followerStatus,onFollowClick:this.handleFollowClick,onOptionsClick:this.handleOptionsClick}))),l.a.createElement("div",{id:"profile-biography"},this.state.bio?l.a.createElement("p",null,this.state.bio):l.a.createElement("p",null)),l.a.createElement("div",{id:"profile-pursuits-container"},a)),l.a.createElement("div",{id:"profile-content-switch-container"},l.a.createElement("button",{disabled:this.state.mediaType===y,onClick:function(){return e.handleMediaTypeSwitch(y)}},"Posts"),l.a.createElement("button",{disabled:"PROJECT"===this.state.mediaType,onClick:function(){return e.handleMediaTypeSwitch("PROJECT")}},"Projects")),t?l.a.createElement("p",null,"This profile is private. To see these posts, please request access. "):this.renderHeroContent()))}}]),a}(l.a.Component),Vt=D(Bt),Wt=function(){var e=Object(n.useState)(null),t=Object(k.a)(e,2),a=t[0],i=t[1];return l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){return console.log("asdf"),Q.a.get($.a.IMAGE_BASE_URL,{params:{imageKey:"images/content/fd3fd690-85bb-11eb-9d6d-c1928bb106f5"}}).then(function(e){return fetch(e.data.image)}).then(function(e){return e.blob()}).then(function(e){console.log(e);var t=new File([e],"Thumbnail.jpeg",{type:e.type});i(URL.createObjectURL(t))})}},"Return Data"),l.a.createElement("img",{id:"target",src:a}))},Ht=(a(828),me(function(){return l.a.createElement(r.a,null,l.a.createElement(kt,null),l.a.createElement(s.c,null,l.a.createElement(s.a,{exact:!0,path:"/",component:at}),l.a.createElement(s.a,{exact:!0,path:"/account",component:ot}),l.a.createElement(s.a,{exact:!0,path:"/test",component:Wt}),l.a.createElement(s.a,{exact:!0,path:"/u/:username",component:Vt}),l.a.createElement(s.a,{exact:!0,path:"/p/:postId",component:Vt})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(x.Provider,{value:new U},l.a.createElement(Ht,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}},[[356,1,2]]]);
//# sourceMappingURL=main.81a871bb.chunk.js.map