(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{188:function(e,t,a){},278:function(e,t,a){e.exports=a(656)},300:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},322:function(e,t,a){},338:function(e,t,a){},339:function(e,t,a){},341:function(e,t,a){},342:function(e,t,a){},5:function(e,t,a){e.exports={TEMP_PROFILE_PHOTO_URL:"https://qph.fs.quoracdn.net/main-qimg-2b21b9dd05c757fe30231fac65b504dd",returnUserImageURL:function(e){return"http://eumyth-bucket-1.s3.us-west-1.amazonaws.com/"+e},ROOT_URL:"",IMAGE_BASE_URL:"/image",DISPLAY_PHOTO_URL:"/image/display-photo",COVER_PHOTO_URL:"/image/cover",DRAFT_BASE_URL:"/draft",TINY_DISPLAY_PHOTO_URL:"/image/navbar-display-photo",USER_BASE_URL:"/user",USER_BIO_URL:"/user/bio",USER_ACCOUNT_SETTINGS_INFO:"/user/account-settings-info",USER_PRIVACY:"/user/private",USER_PREVIEW_BASE_URL:"/user-preview",USER_PREVIEW_ID_URL:"/user-preview/id",RELATION_BASE_URL:"/relation",RELATION_STATUS_URL:"/relation/status",RELATION_INFO_URL:"/relation/info",RELATION_SET_FOLLOWER_URL:"/relation/set",POST_BASE_URL:"/post",PROJECT_BASE_URL:"/project",MULTIPLE_PROJECTS_URL:"/project/multiple",MULTIPLE_POSTS_URL:"/post/multiple",WITH_IMAGE_POST_URL:"/post/with-image",NO_IMAGE_POST_URL:"/post/no-image",SOCIAL_FEED_POSTS_URL:"/post/feed",POST_DISPLAY_PHOTO_URL:"/post/display-photo",SINGLE_POST_TEXT_DATA_URL:"/post/single",INDEX_BASE_URL:"/index",CHECK_USERNAME_URL:"/index/username",INDEX_USER_PURSUITS_URL:"/index/pursuits",COMMENT_BASE_URL:"/comment",ROOT_COMMENT_URL:"/comment/root",REPLY_COMMENT_URL:"/comment/reply",REFRESH_COMMENTS_URL:"/comment/refresh",VOTE_ON_COMMENT_URL:"/comment/vote"}},634:function(e,t,a){},635:function(e,t,a){},636:function(e,t,a){},637:function(e,t,a){},638:function(e,t,a){},639:function(e,t,a){},640:function(e,t,a){},641:function(e,t,a){},642:function(e,t,a){},643:function(e,t,a){},644:function(e,t,a){},645:function(e,t,a){},646:function(e,t,a){},647:function(e,t,a){},648:function(e,t,a){},649:function(e,t,a){},650:function(e,t,a){},651:function(e,t,a){},652:function(e,t,a){},653:function(e,t,a){},654:function(e,t,a){},655:function(e,t,a){},656:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(34),r=a.n(i),o=a(40),s=a(33),u=a(59),c=a(21),d=a(10),m=a(11),h=a(3),p=a(13),g=a(12),v=a(173),b=a.n(v),f=l.a.createContext(null),E=function(e){return function(t){return l.a.createElement(f.Consumer,null,function(a){return l.a.createElement(e,Object.assign({},t,{firebase:a}))})}},y=f,P=a(139),S={apiKey:"AIzaSyC9sBHK-evjecmuWQsQHoE-iSJmHUcIBcE",authDomain:"eumyth-65330.firebaseapp.com",databaseURL:"https://eumyth-65330.firebaseio.com",projectId:"eumyth-65330",storageBucket:"eumyth-65330.appspot.com",messagingSenderId:"677080457179",appId:"1:677080457179:web:5e1e38f3f082f93427d1fe",measurementId:"G-GP77M3QKXG"},C=function(){function e(){Object(d.a)(this,e),P.a.initializeApp(S),this.auth=P.a.auth(),this.db=P.a.database(),this.doTest=this.doTest.bind(this),this.doCreateUser=this.doCreateUser.bind(this),this.doSignIn=this.doSignIn.bind(this),this.doSignOut=this.doSignOut.bind(this),this.doSendEmailVerification=this.doSendEmailVerification.bind(this),this.doPasswordReset=this.doPasswordReset.bind(this),this.doPasswordUpdate=this.doPasswordUpdate.bind(this),this.doIsEmailVerified=this.doIsEmailVerified.bind(this),this.checkIsExistingUser=this.checkIsExistingUser.bind(this),this.writeBasicUserData=this.writeBasicUserData.bind(this)}return Object(m.a)(e,[{key:"doTest",value:function(){return"FIREBASE"}},{key:"doCreateUser",value:function(e,t){return this.auth.createUserWithEmailAndPassword(e,t).then(function(e){e.user.sendEmailVerification()}).catch(function(e){var t=e.code,a=e.message;if("auth/weak-password"!==t)return a;alert("The password is too weak."),console.log(e)})}},{key:"doSignIn",value:function(e,t){return this.auth.signInWithEmailAndPassword(e,t).catch(function(e){var t=e.code,a=e.message;a&&alert(t+" "+a)})}},{key:"doSignOut",value:function(){return this.auth.signOut()}},{key:"doSendEmailVerification",value:function(){this.auth.currentUser.sendEmailVerification().catch(function(e){var t=e.code,a=e.message;"auth/weak-password"===t?alert("The password is too weak."):console.log(a),console.log(e)})}},{key:"doPasswordReset",value:function(e){return alert("EMAIL"),this.auth.sendPasswordResetEmail(e)}},{key:"doPasswordUpdate",value:function(e){return this.auth.currentUser.updatePassword(e)}},{key:"returnUsername",value:function(){return this.auth.currentUser.displayName}},{key:"doUsernameUpdate",value:function(e){return this.auth.currentUser.updateProfile({displayName:e}).then(function(){return 200})}},{key:"doIsEmailVerified",value:function(){if(this.auth.currentUser)return this.auth.currentUser.emailVerified}},{key:"checkIsExistingUser",value:function(){var e=this.auth.currentUser.uid;return this.db.ref("users/"+e).once("value").then(function(e){return e.val()})}},{key:"returnName",value:function(){var e=this.auth.currentUser.uid;return this.db.ref("users/"+e).once("value").then(function(e){return e.val()})}},{key:"writeBasicUserData",value:function(e,t,a){var n=this.auth.currentUser.uid;return this.db.ref("users/"+n).set({username:e,firstName:t,lastName:a}).then(function(){return 200})}}]),e}(),w=C,k=w,O={email:"",error:null},T=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state=Object(c.a)({},O),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.handleTextUpdate=n.handleTextUpdate.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.email;this.props.firebase.doPasswordReset(a).then(function(){t.setState(Object(c.a)({},O))}).catch(function(e){t.setState({error:e})})}},{key:"handleTextUpdate",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.error,n=""===t;return l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("input",{name:"email",value:this.state.email,onChange:this.handleTextUpdate,type:"text",placeholder:"Email Address"}),l.a.createElement("button",{disabled:n,type:"submit"},"Reset My Password"),a&&l.a.createElement("p",null,a.message))}}]),a}(l.a.Component),D=function(){return l.a.createElement("div",null,l.a.createElement("h4",null,"PasswordForget"),l.a.createElement(I,null))},I=E(T),R=function(e){return l.a.createElement("div",{className:"welcome-hero-side-container"},l.a.createElement("section",null,l.a.createElement("h4",null,"Sign In"),l.a.createElement("button",{onClick:e.onToggleLoginRegisterWindow},"Create Account"),l.a.createElement("form",{onSubmit:e.onLoginSubmit},l.a.createElement("div",null,l.a.createElement("input",{type:"text",placeholder:"Email",name:"email",autoComplete:"off",onChange:e.onLoginEmailChange})),l.a.createElement("div",null,l.a.createElement("input",{type:"password",placeholder:"Password",name:"password",autoComplete:"off",onChange:e.onLoginPasswordChange})),l.a.createElement("input",{type:"submit",value:"Log in"})),l.a.createElement(D,null)))},x=function(e){return l.a.createElement("div",{className:"welcome-hero-side-container"},l.a.createElement("h4",null,"Sign Up"),l.a.createElement("button",{onClick:e.onToggleLoginRegisterWindow},"Sign In"),l.a.createElement("form",{onSubmit:e.onRegisterSubmit},l.a.createElement("div",null,l.a.createElement("input",{type:"text",placeholder:"Email",name:"email",autoComplete:"off",onChange:e.onRegisterEmailChange})),l.a.createElement("div",null,l.a.createElement("input",{type:"password",placeholder:"Password",name:"password",autoComplete:"off",onChange:e.onRegisterPasswordChange})),l.a.createElement("input",{type:"submit",value:"Submit"})))},j=a(15),_=function(e){var t=Object(n.useState)(l.a.createElement(l.a.Fragment,null)),a=Object(j.a)(t,2),i=a[0],r=a[1];return l.a.createElement("div",{className:"welcome-hero-side-container"},l.a.createElement("p",null,"If you have verified your email, please refresh the page. "),i,l.a.createElement("button",{onClick:function(t){r(l.a.createElement("p",null,"Email has been sent! Once you verify your email, try refreshing the page.")),e.onSendEmailVerification(t)}},"Resend Email"),l.a.createElement("div",null,l.a.createElement("button",{onClick:e.onLoginRegisterToggle},"Register"),l.a.createElement("button",{onClick:e.onSignOut},"Login as someone else")))},M=(a(300),{currentUser:"",email:"",password:"",test:"",error:null}),A=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state=Object(c.a)({loggedIn:!1,verified:null,isLoginMode:!0,showRegisterSuccess:!1},M),n.handleLongRegisterToggle=n.handleLongRegisterToggle.bind(Object(h.a)(n)),n.handleLoginSubmit=n.handleLoginSubmit.bind(Object(h.a)(n)),n.handleRegisterSubmit=n.handleRegisterSubmit.bind(Object(h.a)(n)),n.handleSendEmailVerication=n.handleSendEmailVerication.bind(Object(h.a)(n)),n.handleSignOut=n.handleSignOut.bind(Object(h.a)(n)),n.handleRegisterSuccess=n.handleRegisterSuccess.bind(Object(h.a)(n)),n.handleTextChange=n.handleTextChange.bind(Object(h.a)(n)),n.handleVerifiedState=n.handleVerifiedState.bind(Object(h.a)(n)),n.renderLoginRegister=n.renderLoginRegister.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"handleTextChange",value:function(e){e.preventDefault(),this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleRegisterSuccess",value:function(e){e.preventDefault(),this.setState(function(e){return{showRegisterSuccess:!e.showRegisterSuccess}})}},{key:"handleSignOut",value:function(e){e.preventDefault(),this.props.firebase.doSignOut().then(this.setState(Object(c.a)({},M)))}},{key:"handleSendEmailVerication",value:function(e){e.preventDefault(),this.props.firebase.doSendEmailVerification()}},{key:"handleCurrentUser",value:function(e,t){t.preventDefault(),this.setState({currentUser:e})}},{key:"handleVerifiedState",value:function(e){this.setState({verified:e})}},{key:"handleLongRegisterToggle",value:function(e){e.preventDefault(),this.setState(function(e){return{isLoginMode:!e.isLoginMode}})}},{key:"handleLoginSubmit",value:function(e){var t=this;if(e.preventDefault(),!b.a.validate(this.state.email))return alert("This is not a valid email!");this.props.firebase.doSignIn(this.state.email,this.state.password).then(function(e){e&&(console.log(e.user.emailVerified),e.user.emailVerified?t.props.history.push("/"):t.handleVerifiedState(e.user.emailVerified))})}},{key:"handleRegisterSubmit",value:function(e){e.preventDefault(),b.a.validate(this.state.email)?this.state.password.length<6?alert("Password is too short!"):this.props.firebase.doCreateUser(this.state.email,this.state.password).then(this.setState({showRegisterSuccess:!0})):alert("This is not a valid email!")}},{key:"renderLoginRegister",value:function(e){return e?this.props.firebase.auth.currentUser&&!this.state.verified?l.a.createElement(_,{current_user:this.state.currentUser,onToggleLoginRegisterWindow:this.handleLongRegisterToggle,onSendEmailVerification:this.handleSendEmailVerication,onSignOut:this.handleSignOut}):l.a.createElement(R,{onToggleLoginRegisterWindow:this.handleLongRegisterToggle,onLoginEmailChange:this.handleTextChange,onLoginPasswordChange:this.handleTextChange,onLoginSubmit:this.handleLoginSubmit}):l.a.createElement(x,{onToggleLoginRegisterWindow:this.handleLongRegisterToggle,onRegisterEmailChange:this.handleTextChange,onRegisterPasswordChange:this.handleTextChange,onRegisterSubmit:this.handleRegisterSubmit})}},{key:"render",value:function(){return this.state.showRegisterSuccess?l.a.createElement("section",{className:"welcome-login-register-section"},l.a.createElement("div",{className:"welcome-hero-hero-container"},l.a.createElement("p",null,"Welcome to interestHub! Login or sign up to get started!")),l.a.createElement("div",null,"Please check your email for a verification link.",l.a.createElement("span",null,"Didn't see the link?",l.a.createElement("button",{onClick:this.props.firebase.doSendEmailVerification},"Resend!")),l.a.createElement("button",{onClick:this.handleRegisterSuccess},"Return"))):l.a.createElement("section",{className:"welcome-login-register-section"},l.a.createElement("div",{className:"welcome-hero-hero-container"},l.a.createElement("p",null,"Welcome to interestHub! Login or sign up to get started!"),l.a.createElement("br",null),l.a.createElement("p",null,"(to try out this without signing up, use this test account)"),l.a.createElement("br",null),l.a.createElement("p",null,"(email: williamshengchen8@gmail.com, password: 123123)")),this.renderLoginRegister(this.state.isLoginMode))}}]),a}(l.a.Component),N=a(17),F=a(125),L=a.n(F),U=a(135),B=a(54),V=a(277),W=a(22),H=[{value:"3D printing",label:"3D printing"},{value:"Acting",label:"Acting"},{value:"Aeromodeling",label:"Aeromodeling"},{value:"Air sports",label:"Air sports"},{value:"Airbrushing",label:"Airbrushing"},{value:"Aircraft Spotting",label:"Aircraft Spotting"},{value:"Airsoft",label:"Airsoft"},{value:"Airsofting",label:"Airsofting"},{value:"Amateur astronomy",label:"Amateur astronomy"},{value:"Amateur geology",label:"Amateur geology"},{value:"Amateur Radio",label:"Amateur Radio"},{value:"American football",label:"American football"},{value:"Animal fancy",label:"Animal fancy"},{value:"Animals/pets/dogs",label:"Animals/pets/dogs"},{value:"Antiquing",label:"Antiquing"},{value:"Antiquities",label:"Antiquities"},{value:"Aqua-lung",label:"Aqua-lung"},{value:"Aquarium (Freshwater & Saltwater)",label:"Aquarium (Freshwater & Saltwater)"},{value:"Archery",label:"Archery"},{value:"Art collecting",label:"Art collecting"},{value:"Arts",label:"Arts"},{value:"Association football",label:"Association football"},{value:"Astrology",label:"Astrology"},{value:"Astronomy",label:"Astronomy"},{value:"Audiophilia",label:"Audiophilia"},{value:"Australian rules football",label:"Australian rules football"},{value:"Auto audiophilia",label:"Auto audiophilia"},{value:"Auto racing",label:"Auto racing"},{value:"Backgammon",label:"Backgammon"},{value:"Backpacking",label:"Backpacking"},{value:"Badminton",label:"Badminton"},{value:"Base Jumping",label:"Base Jumping"},{value:"Baseball",label:"Baseball"},{value:"Basketball",label:"Basketball"},{value:"Baton Twirling",label:"Baton Twirling"},{value:"Beach Volleyball",label:"Beach Volleyball"},{value:"Beach/Sun tanning",label:"Beach/Sun tanning"},{value:"Beachcombing",label:"Beachcombing"},{value:"Beadwork",label:"Beadwork"},{value:"Beatboxing",label:"Beatboxing"},{value:"Becoming A Child Advocate",label:"Becoming A Child Advocate"},{value:"Beekeeping",label:"Beekeeping"},{value:"Bell Ringing",label:"Bell Ringing"},{value:"Belly Dancing",label:"Belly Dancing"},{value:"Bicycle Polo",label:"Bicycle Polo"},{value:"Bicycling",label:"Bicycling"},{value:"Billiards",label:"Billiards"},{value:"Bird watching",label:"Bird watching"},{value:"Birding",label:"Birding"},{value:"Birdwatching",label:"Birdwatching"},{value:"Blacksmithing",label:"Blacksmithing"},{value:"Blogging",label:"Blogging"},{value:"BMX",label:"BMX"},{value:"Board games",label:"Board games"},{value:"Board sports",label:"Board sports"},{value:"BoardGames",label:"BoardGames"},{value:"Boating",label:"Boating"},{value:"Body Building",label:"Body Building"},{value:"Bodybuilding",label:"Bodybuilding"},{value:"Bonsai Tree",label:"Bonsai Tree"},{value:"Book collecting",label:"Book collecting"},{value:"Bookbinding",label:"Bookbinding"},{value:"Boomerangs",label:"Boomerangs"},{value:"Bowling",label:"Bowling"},{value:"Boxing",label:"Boxing"},{value:"Brazilian jiu-jitsu",label:"Brazilian jiu-jitsu"},{value:"Breakdancing",label:"Breakdancing"},{value:"Brewing Beer",label:"Brewing Beer"},{value:"Bridge",label:"Bridge"},{value:"Bridge Building",label:"Bridge Building"},{value:"Bringing Food To The Disabled",label:"Bringing Food To The Disabled"},{value:"Building A House For Habitat For Humanity",label:"Building A House For Habitat For Humanity"},{value:"Building Dollhouses",label:"Building Dollhouses"},{value:"Bus spotting",label:"Bus spotting"},{value:"Butterfly Watching",label:"Butterfly Watching"},{value:"Button Collecting",label:"Button Collecting"},{value:"Cake Decorating",label:"Cake Decorating"},{value:"Calligraphy",label:"Calligraphy"},{value:"Camping",label:"Camping"},{value:"Candle making",label:"Candle making"},{value:"Canoeing",label:"Canoeing"},{value:"Car Racing",label:"Car Racing"},{value:"Card collecting",label:"Card collecting"},{value:"Cartooning",label:"Cartooning"},{value:"Casino Gambling",label:"Casino Gambling"},{value:"Cave Diving",label:"Cave Diving"},{value:"Ceramics",label:"Ceramics"},{value:"Cheerleading",label:"Cheerleading"},{value:"Chess",label:"Chess"},{value:"Church/church activities",label:"Church/church activities"},{value:"Cigar Smoking",label:"Cigar Smoking"},{value:"Climbing",label:"Climbing"},{value:"Cloud Watching",label:"Cloud Watching"},{value:"Coin Collecting",label:"Coin Collecting"},{value:"Collecting",label:"Collecting"},{value:"Collecting Antiques",label:"Collecting Antiques"},{value:"Collecting Artwork",label:"Collecting Artwork"},{value:"Collecting Hats",label:"Collecting Hats"},{value:"Collecting Music Albums",label:"Collecting Music Albums"},{value:"Collecting RPM Records",label:"Collecting RPM Records"},{value:"Collecting Sports Cards (Baseball, Football, Basketball, Hockey)",label:"Collecting Sports Cards (Baseball, Football, Basketball, Hockey)"},{value:"Collecting Swords",label:"Collecting Swords"},{value:"Color guard",label:"Color guard"},{value:"Coloring",label:"Coloring"},{value:"Comic book collecting",label:"Comic book collecting"},{value:"Compose Music",label:"Compose Music"},{value:"Computer activities",label:"Computer activities"},{value:"Computer programming",label:"Computer programming"},{value:"Conworlding",label:"Conworlding"},{value:"Cooking",label:"Cooking"},{value:"Cosplay",label:"Cosplay"},{value:"Cosplaying",label:"Cosplaying"},{value:"Couponing",label:"Couponing"},{value:"Crafts",label:"Crafts"},{value:"Crafts (unspecified)",label:"Crafts (unspecified)"},{value:"Creative writing",label:"Creative writing"},{value:"Cricket",label:"Cricket"},{value:"Crochet",label:"Crochet"},{value:"Crocheting",label:"Crocheting"},{value:"Cross-Stitch",label:"Cross-Stitch"},{value:"Crossword Puzzles",label:"Crossword Puzzles"},{value:"Cryptography",label:"Cryptography"},{value:"Curling",label:"Curling"},{value:"Cycling",label:"Cycling"},{value:"Dance",label:"Dance"},{value:"Dancing",label:"Dancing"},{value:"Darts",label:"Darts"},{value:"Debate",label:"Debate"},{value:"Deltiology (postcard collecting)",label:"Deltiology (postcard collecting)"},{value:"Diecast Collectibles",label:"Diecast Collectibles"},{value:"Digital arts",label:"Digital arts"},{value:"Digital Photography",label:"Digital Photography"},{value:"Disc golf",label:"Disc golf"},{value:"Do it yourself",label:"Do it yourself"},{value:"Dodgeball",label:"Dodgeball"},{value:"Dog sport",label:"Dog sport"},{value:"Dolls",label:"Dolls"},{value:"Dominoes",label:"Dominoes"},{value:"Dowsing",label:"Dowsing"},{value:"Drama",label:"Drama"},{value:"Drawing",label:"Drawing"},{value:"Driving",label:"Driving"},{value:"Dumpster Diving",label:"Dumpster Diving"},{value:"Eating out",label:"Eating out"},{value:"Educational Courses",label:"Educational Courses"},{value:"Electronics",label:"Electronics"},{value:"Element collecting",label:"Element collecting"},{value:"Embroidery",label:"Embroidery"},{value:"Entertaining",label:"Entertaining"},{value:"Equestrianism",label:"Equestrianism"},{value:"Exercise (aerobics, weights)",label:"Exercise (aerobics, weights)"},{value:"Exhibition drill",label:"Exhibition drill"},{value:"Falconry",label:"Falconry"},{value:"Fast cars",label:"Fast cars"},{value:"Felting",label:"Felting"},{value:"Fencing",label:"Fencing"},{value:"Field hockey",label:"Field hockey"},{value:"Figure skating",label:"Figure skating"},{value:"Fire Poi",label:"Fire Poi"},{value:"Fishing",label:"Fishing"},{value:"Fishkeeping",label:"Fishkeeping"},{value:"Flag Football",label:"Flag Football"},{value:"Floorball",label:"Floorball"},{value:"Floral Arrangements",label:"Floral Arrangements"},{value:"Flower arranging",label:"Flower arranging"},{value:"Flower collecting and pressing",label:"Flower collecting and pressing"},{value:"Fly Tying",label:"Fly Tying"},{value:"Flying",label:"Flying"},{value:"Footbag",label:"Footbag"},{value:"Football",label:"Football"},{value:"Foraging",label:"Foraging"},{value:"Foreign language learning",label:"Foreign language learning"},{value:"Fossil hunting",label:"Fossil hunting"},{value:"Four Wheeling",label:"Four Wheeling"},{value:"Freshwater Aquariums",label:"Freshwater Aquariums"},{value:"Frisbee Golf \u2013 Frolf",label:"Frisbee Golf \u2013 Frolf"},{value:"Gambling",label:"Gambling"},{value:"Games",label:"Games"},{value:"Gaming (tabletop games and role-playing games)",label:"Gaming (tabletop games and role-playing games)"},{value:"Garage Saleing",label:"Garage Saleing"},{value:"Gardening",label:"Gardening"},{value:"Genealogy",label:"Genealogy"},{value:"Geocaching",label:"Geocaching"},{value:"Ghost hunting",label:"Ghost hunting"},{value:"Glassblowing",label:"Glassblowing"},{value:"Glowsticking",label:"Glowsticking"},{value:"Gnoming",label:"Gnoming"},{value:"Go",label:"Go"},{value:"Go Kart Racing",label:"Go Kart Racing"},{value:"Going to movies",label:"Going to movies"},{value:"Golf",label:"Golf"},{value:"Golfing",label:"Golfing"},{value:"Gongoozling",label:"Gongoozling"},{value:"Graffiti",label:"Graffiti"},{value:"Grip Strength",label:"Grip Strength"},{value:"Guitar",label:"Guitar"},{value:"Gun Collecting",label:"Gun Collecting"},{value:"Gunsmithing",label:"Gunsmithing"},{value:"Gymnastics",label:"Gymnastics"},{value:"Gyotaku",label:"Gyotaku"},{value:"Handball",label:"Handball"},{value:"Handwriting Analysis",label:"Handwriting Analysis"},{value:"Hang gliding",label:"Hang gliding"},{value:"Herping",label:"Herping"},{value:"Hiking",label:"Hiking"},{value:"Home Brewing",label:"Home Brewing"},{value:"Home Repair",label:"Home Repair"},{value:"Home Theater",label:"Home Theater"},{value:"Homebrewing",label:"Homebrewing"},{value:"Hooping",label:"Hooping"},{value:"Horse riding",label:"Horse riding"},{value:"Hot air ballooning",label:"Hot air ballooning"},{value:"Hula Hooping",label:"Hula Hooping"},{value:"Hunting",label:"Hunting"},{value:"Ice hockey",label:"Ice hockey"},{value:"Ice skating",label:"Ice skating"},{value:"Iceskating",label:"Iceskating"},{value:"Illusion",label:"Illusion"},{value:"Impersonations",label:"Impersonations"},{value:"Inline skating",label:"Inline skating"},{value:"Insect collecting",label:"Insect collecting"},{value:"Internet",label:"Internet"},{value:"Inventing",label:"Inventing"},{value:"Jet Engines",label:"Jet Engines"},{value:"Jewelry Making",label:"Jewelry Making"},{value:"Jigsaw Puzzles",label:"Jigsaw Puzzles"},{value:"Jogging",label:"Jogging"},{value:"Judo",label:"Judo"},{value:"Juggling",label:"Juggling"},{value:"Jukskei",label:"Jukskei"},{value:"Jump Roping",label:"Jump Roping"},{value:"Kabaddi",label:"Kabaddi"},{value:"Kart racing",label:"Kart racing"},{value:"Kayaking",label:"Kayaking"},{value:"Keep A Journal",label:"Keep A Journal"},{value:"Kitchen Chemistry",label:"Kitchen Chemistry"},{value:"Kite Boarding",label:"Kite Boarding"},{value:"Kite flying",label:"Kite flying"},{value:"Kites",label:"Kites"},{value:"Kitesurfing",label:"Kitesurfing"},{value:"Knapping",label:"Knapping"},{value:"Knife making",label:"Knife making"},{value:"Knife throwing",label:"Knife throwing"},{value:"Knitting",label:"Knitting"},{value:"Knotting",label:"Knotting"},{value:"Lacemaking",label:"Lacemaking"},{value:"Lacrosse",label:"Lacrosse"},{value:"Lapidary",label:"Lapidary"},{value:"LARPing",label:"LARPing"},{value:"Laser tag",label:"Laser tag"},{value:"Lasers",label:"Lasers"},{value:"Lawn Darts",label:"Lawn Darts"},{value:"Learn to Play Poker",label:"Learn to Play Poker"},{value:"Learning A Foreign Language",label:"Learning A Foreign Language"},{value:"Learning An Instrument",label:"Learning An Instrument"},{value:"Learning To Pilot A Plane",label:"Learning To Pilot A Plane"},{value:"Leather crafting",label:"Leather crafting"},{value:"Leathercrafting",label:"Leathercrafting"},{value:"Lego building",label:"Lego building"},{value:"Legos",label:"Legos"},{value:"Letterboxing",label:"Letterboxing"},{value:"Listening to music",label:"Listening to music"},{value:"Locksport",label:"Locksport"},{value:"Machining",label:"Machining"},{value:"Macram\xe9",label:"Macram\xe9"},{value:"Macrame",label:"Macrame"},{value:"Magic",label:"Magic"},{value:"Mahjong",label:"Mahjong"},{value:"Making Model Cars",label:"Making Model Cars"},{value:"Marbles",label:"Marbles"},{value:"Marksmanship",label:"Marksmanship"},{value:"Martial arts",label:"Martial arts"},{value:"Matchstick Modeling",label:"Matchstick Modeling"},{value:"Meditation",label:"Meditation"},{value:"Metal detecting",label:"Metal detecting"},{value:"Meteorology",label:"Meteorology"},{value:"Microscopy",label:"Microscopy"},{value:"Mineral collecting",label:"Mineral collecting"},{value:"Model aircraft",label:"Model aircraft"},{value:"Model building",label:"Model building"},{value:"Model Railroading",label:"Model Railroading"},{value:"Model Rockets",label:"Model Rockets"},{value:"Modeling Ships",label:"Modeling Ships"},{value:"Models",label:"Models"},{value:"Motor sports",label:"Motor sports"},{value:"Motorcycles",label:"Motorcycles"},{value:"Mountain Biking",label:"Mountain Biking"},{value:"Mountain Climbing",label:"Mountain Climbing"},{value:"Mountaineering",label:"Mountaineering"},{value:"Movie and movie memorabilia collecting",label:"Movie and movie memorabilia collecting"},{value:"Mushroom hunting/Mycology",label:"Mushroom hunting/Mycology"},{value:"Musical Instruments",label:"Musical Instruments"},{value:"Nail Art",label:"Nail Art"},{value:"Needlepoint",label:"Needlepoint"},{value:"Netball",label:"Netball"},{value:"Nordic skating",label:"Nordic skating"},{value:"Orienteering",label:"Orienteering"},{value:"Origami",label:"Origami"},{value:"Owning An Antique Car",label:"Owning An Antique Car"},{value:"Paintball",label:"Paintball"},{value:"Painting",label:"Painting"},{value:"Papermache",label:"Papermache"},{value:"Papermaking",label:"Papermaking"},{value:"Parachuting",label:"Parachuting"},{value:"Paragliding or Power Paragliding",label:"Paragliding or Power Paragliding"},{value:"Parkour",label:"Parkour"},{value:"People Watching",label:"People Watching"},{value:"Photography",label:"Photography"},{value:"Piano",label:"Piano"},{value:"Pigeon racing",label:"Pigeon racing"},{value:"Pinochle",label:"Pinochle"},{value:"Pipe Smoking",label:"Pipe Smoking"},{value:"Planking",label:"Planking"},{value:"Playing music",label:"Playing music"},{value:"Playing musical instruments",label:"Playing musical instruments"},{value:"Playing team sports",label:"Playing team sports"},{value:"Poker",label:"Poker"},{value:"Pole Dancing",label:"Pole Dancing"},{value:"Polo",label:"Polo"},{value:"Pottery",label:"Pottery"},{value:"Powerboking",label:"Powerboking"},{value:"Protesting",label:"Protesting"},{value:"Puppetry",label:"Puppetry"},{value:"Puzzles",label:"Puzzles"},{value:"Pyrotechnics",label:"Pyrotechnics"},{value:"Quilting",label:"Quilting"},{value:"R/C Boats",label:"R/C Boats"},{value:"R/C Cars",label:"R/C Cars"},{value:"R/C Helicopters",label:"R/C Helicopters"},{value:"R/C Planes",label:"R/C Planes"},{value:"Racing Pigeons",label:"Racing Pigeons"},{value:"Racquetball",label:"Racquetball"},{value:"Radio-controlled car racing",label:"Radio-controlled car racing"},{value:"Rafting",label:"Rafting"},{value:"Railfans",label:"Railfans"},{value:"Rappelling",label:"Rappelling"},{value:"Rapping",label:"Rapping"},{value:"Reading",label:"Reading"},{value:"Reading To The Elderly",label:"Reading To The Elderly"},{value:"Record collecting",label:"Record collecting"},{value:"Relaxing",label:"Relaxing"},{value:"Renaissance Faire",label:"Renaissance Faire"},{value:"Renting movies",label:"Renting movies"},{value:"Rescuing Abused Or Abandoned Animals",label:"Rescuing Abused Or Abandoned Animals"},{value:"Robotics",label:"Robotics"},{value:"Rock balancing",label:"Rock balancing"},{value:"Rock climbing",label:"Rock climbing"},{value:"Rock Collecting",label:"Rock Collecting"},{value:"Rockets",label:"Rockets"},{value:"Rocking AIDS Babies",label:"Rocking AIDS Babies"},{value:"Roleplaying",label:"Roleplaying"},{value:"Roller derby",label:"Roller derby"},{value:"Roller skating",label:"Roller skating"},{value:"Rugby",label:"Rugby"},{value:"Rugby league football",label:"Rugby league football"},{value:"Running",label:"Running"},{value:"Sailing",label:"Sailing"},{value:"Saltwater Aquariums",label:"Saltwater Aquariums"},{value:"Sand art",label:"Sand art"},{value:"Sand Castles",label:"Sand Castles"},{value:"Scrapbooking",label:"Scrapbooking"},{value:"Scuba diving",label:"Scuba diving"},{value:"Sculling or Rowing",label:"Sculling or Rowing"},{value:"Sculpting",label:"Sculpting"},{value:"Sea glass collecting",label:"Sea glass collecting"},{value:"Seashell collecting",label:"Seashell collecting"},{value:"Self Defense",label:"Self Defense"},{value:"Sewing",label:"Sewing"},{value:"Shark Fishing",label:"Shark Fishing"},{value:"Shooting",label:"Shooting"},{value:"Shooting sport",label:"Shooting sport"},{value:"Shopping",label:"Shopping"},{value:"Shortwave listening",label:"Shortwave listening"},{value:"Singing",label:"Singing"},{value:"Singing In Choir",label:"Singing In Choir"},{value:"Skateboarding",label:"Skateboarding"},{value:"Skeet Shooting",label:"Skeet Shooting"},{value:"Sketching",label:"Sketching"},{value:"Skiing",label:"Skiing"},{value:"Skimboarding",label:"Skimboarding"},{value:"Sky Diving",label:"Sky Diving"},{value:"Skydiving",label:"Skydiving"},{value:"Slack Lining",label:"Slack Lining"},{value:"Slacklining",label:"Slacklining"},{value:"Sleeping",label:"Sleeping"},{value:"Slingshots",label:"Slingshots"},{value:"Slot car racing",label:"Slot car racing"},{value:"Snorkeling",label:"Snorkeling"},{value:"Snowboarding",label:"Snowboarding"},{value:"Soap Making",label:"Soap Making"},{value:"Soapmaking",label:"Soapmaking"},{value:"Soccer",label:"Soccer"},{value:"Socializing with friends/neighbors",label:"Socializing with friends/neighbors"},{value:"Speed Cubing (rubix cube)",label:"Speed Cubing (rubix cube)"},{value:"Speed skating",label:"Speed skating"},{value:"Spelunkering",label:"Spelunkering"},{value:"Spending time with family/kids",label:"Spending time with family/kids"},{value:"Sports",label:"Sports"},{value:"Squash",label:"Squash"},{value:"Stamp Collecting",label:"Stamp Collecting"},{value:"Stand-up comedy",label:"Stand-up comedy"},{value:"Stone collecting",label:"Stone collecting"},{value:"Stone skipping",label:"Stone skipping"},{value:"Storm Chasing",label:"Storm Chasing"},{value:"Storytelling",label:"Storytelling"},{value:"String Figures",label:"String Figures"},{value:"Sudoku",label:"Sudoku"},{value:"Surf Fishing",label:"Surf Fishing"},{value:"Surfing",label:"Surfing"},{value:"Survival",label:"Survival"},{value:"Swimming",label:"Swimming"},{value:"Table football",label:"Table football"},{value:"Table tennis",label:"Table tennis"},{value:"Taekwondo",label:"Taekwondo"},{value:"Tai chi",label:"Tai chi"},{value:"Tatting",label:"Tatting"},{value:"Taxidermy",label:"Taxidermy"},{value:"Tea Tasting",label:"Tea Tasting"},{value:"Tennis",label:"Tennis"},{value:"Tesla Coils",label:"Tesla Coils"},{value:"Tetris",label:"Tetris"},{value:"Textiles",label:"Textiles"},{value:"Texting",label:"Texting"},{value:"Tombstone Rubbing",label:"Tombstone Rubbing"},{value:"Tool Collecting",label:"Tool Collecting"},{value:"Tour skating",label:"Tour skating"},{value:"Toy Collecting",label:"Toy Collecting"},{value:"Train Collecting",label:"Train Collecting"},{value:"Train Spotting",label:"Train Spotting"},{value:"Trainspotting",label:"Trainspotting"},{value:"Traveling",label:"Traveling"},{value:"Treasure Hunting",label:"Treasure Hunting"},{value:"Trekkie",label:"Trekkie"},{value:"Triathlon",label:"Triathlon"},{value:"Tutoring Children",label:"Tutoring Children"},{value:"TV watching",label:"TV watching"},{value:"Ultimate Frisbee",label:"Ultimate Frisbee"},{value:"Urban exploration",label:"Urban exploration"},{value:"Vehicle restoration",label:"Vehicle restoration"},{value:"Video game collecting",label:"Video game collecting"},{value:"Video Games",label:"Video Games"},{value:"Video gaming",label:"Video gaming"},{value:"Videophilia",label:"Videophilia"},{value:"Vintage cars",label:"Vintage cars"},{value:"Violin",label:"Violin"},{value:"Volleyball",label:"Volleyball"},{value:"Volunteer",label:"Volunteer"},{value:"Walking",label:"Walking"},{value:"Warhammer",label:"Warhammer"},{value:"Watching movies",label:"Watching movies"},{value:"Watching sporting events",label:"Watching sporting events"},{value:"Water sports",label:"Water sports"},{value:"Weather Watcher",label:"Weather Watcher"},{value:"Web surfing",label:"Web surfing"},{value:"Weightlifting",label:"Weightlifting"},{value:"Windsurfing",label:"Windsurfing"},{value:"Wine Making",label:"Wine Making"},{value:"Wingsuit Flying",label:"Wingsuit Flying"},{value:"Wood carving",label:"Wood carving"},{value:"Woodworking",label:"Woodworking"},{value:"Working In A Food Pantry",label:"Working In A Food Pantry"},{value:"Working on cars",label:"Working on cars"},{value:"World Record Breaking",label:"World Record Breaking"},{value:"Worldbuilding",label:"Worldbuilding"},{value:"Wrestling",label:"Wrestling"},{value:"Writing",label:"Writing"},{value:"Writing Music",label:"Writing Music"},{value:"Writing Songs",label:"Writing Songs"},{value:"Yo-yoing",label:"Yo-yoing"},{value:"Yoga",label:"Yoga"},{value:"YoYo",label:"YoYo"},{value:"Ziplining",label:"Ziplining"},{value:"Zumba",label:"Zumba"}],G=function(e){var t=e.getValue().length||0;return l.a.createElement(W.z.Menu,e,t<5?e.children:l.a.createElement("div",null,"Please just choose 5"))},J=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).isValidNewOption=function(e,t){return e.length>0&&t.length<5},e}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement(V.a,{components:{Menu:G},isMulti:!0,onChange:this.props.onSelect,options:H,isValidNewOption:this.isValidNewOption})}}]),a}(n.Component),z=a(18),q=a.n(z),K=a(5),Y=a.n(K),X=function(){function e(){Object(d.a)(this,e)}return Object(m.a)(e,null,[{key:"changeRelationStatus",value:function(e,t,a,n){return q.a.put(Y.a.RELATION_SET_FOLLOWER_URL,{action:e,targetUsername:t,currentUsername:a,id:n})}},{key:"checkUsernameAvailable",value:function(e){return console.log(Y.a.CHECK_USERNAME_URL),q.a.get(Y.a.CHECK_USERNAME_URL,{params:{username:e}})}},{key:"createPost",value:function(e){return q.a.post(Y.a.POST_BASE_URL,e)}},{key:"createProject",value:function(e){return q.a.post(Y.a.PROJECT_BASE_URL,e)}},{key:"createUserProfile",value:function(e){return q.a.post(Y.a.USER_BASE_URL,e)}},{key:"deleteAccountPhoto",value:function(e,t){return q.a.delete("COVER"===t?Y.a.COVER_PHOTO_URL:Y.a.DISPLAY_PHOTO_URL,{data:{username:e,contentType:t}})}},{key:"deletePost",value:function(e,t,a){return q.a.delete(Y.a.POST_BASE_URL,{data:{userId:e,indexUserId:t,postId:a}})}},{key:"getUserPreviewId",value:function(e){return q.a.get(Y.a.USER_PREVIEW_ID_URL,e)}},{key:"returnUserRelationInfo",value:function(e){return q.a.get(Y.a.RELATION_INFO_URL,{params:{username:e}})}},{key:"returnTinyDisplayPhoto",value:function(e){return q.a.get(Y.a.TINY_DISPLAY_PHOTO_URL,{params:{username:e}})}},{key:"setProfilePrivacy",value:function(e,t){return q.a.put(Y.a.USER_PRIVACY,{username:e,private:t})}},{key:"setFollowerStatus",value:function(e){return q.a.put(Y.a.RELATION_STATUS_URL,e)}},{key:"setDraftPreviewTitle",value:function(e){return q.a.post(Y.a.DRAFT_BASE_URL,{previewTitle:e})}},{key:"returnPursuitNames",value:function(e){return q.a.get(Y.a.INDEX_USER_PURSUITS_URL,{params:{username:e}})}},{key:"returnIndexUser",value:function(e){return q.a.get(Y.a.INDEX_BASE_URL,{params:{username:e}})}},{key:"returnUser",value:function(e){return q.a.get(Y.a.USER_BASE_URL,{params:{username:e}})}},{key:"returnFollowerStatus",value:function(e,t){return q.a.get(Y.a.RELATION_BASE_URL,{params:{visitorUsername:e,userRelationArrayId:t}})}},{key:"returnMultipleProjects",value:function(e){return q.a.get(Y.a.MULTIPLE_PROJECTS_URL,{params:{projectIdList:e}})}},{key:"returnMultiplePostInfo",value:function(e,t){return q.a.get(Y.a.MULTIPLE_POSTS_URL,{params:{targetUserDataId:e,postIdList:t}})}},{key:"returnMultiplePosts",value:function(e,t){return q.a.get(Y.a.MULTIPLE_POSTS_URL,{params:{postIdList:e,includePostText:t}})}},{key:"retrievePost",value:function(e,t){return q.a.get(Y.a.SINGLE_POST_TEXT_DATA_URL,{params:{postId:e,textOnly:t}})}},{key:"returnSocialFeedPosts",value:function(e,t){return q.a.get(Y.a.SOCIAL_FEED_POSTS_URL,{params:{indexUserId:e,postIdList:t}})}},{key:"returnAccountSettingsInfo",value:function(e){return q.a.get(Y.a.USER_ACCOUNT_SETTINGS_INFO,{params:{username:e}})}},{key:"updateBio",value:function(e){return q.a.put(Y.a.USER_BIO_URL,e)}},{key:"updatePost",value:function(e){return q.a.put(Y.a.POST_BASE_URL,e)}},{key:"updateAccountImage",value:function(e,t){return q.a.post("COVER"===t?Y.a.COVER_PHOTO_URL:Y.a.DISPLAY_PHOTO_URL,e)}},{key:"getComments",value:function(e){return q.a.get(Y.a.COMMENT_BASE_URL,e)}},{key:"postComment",value:function(e){return q.a.post(Y.a.ROOT_COMMENT_URL,e)}},{key:"postReply",value:function(e){return q.a.post(Y.a.REPLY_COMMENT_URL,e)}},{key:"retrieveNewPostInfo",value:function(e){return q.a.get(Y.a.DRAFT_BASE_URL,{params:{username:e}})}},{key:"refreshComments",value:function(e){return q.a.get(Y.a.REFRESH_COMMENTS_URL,e)}},{key:"saveDraft",value:function(e,t){return q.a.put(Y.a.DRAFT_BASE_URL,{username:e,draft:JSON.stringify(t)})}},{key:"saveDraftMetaInfo",value:function(e){return q.a.put(Y.a.DRAFT_BASE_URL,e)}},{key:"updatePostDisplayPhotos",value:function(e){return q.a.patch(Y.a.POST_DISPLAY_PHOTO_URL,e)}},{key:"voteOnComment",value:function(e){return q.a.put(Y.a.VOTE_ON_COMMENT_URL,e)}}]),e}(),Q=(a(317),{firstName:"",lastName:"",username:"",pursuits:[],experienceSelects:[],isTaken:!1,isUpperCase:!1,croppedImage:null,fullImage:null,imageScale:1,imageRotation:0}),Z=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).setEditorRef=function(e){return n.editor=e},n.handleTextChange=n.handleTextChange.bind(Object(h.a)(n)),n.handleExperienceSelect=n.handleExperienceSelect.bind(Object(h.a)(n)),n.handleProfileSubmit=n.handleProfileSubmit.bind(Object(h.a)(n)),n.handlePursuitExperienceChange=n.handlePursuitExperienceChange.bind(Object(h.a)(n)),n.handleProfilePhotoChange=n.handleProfilePhotoChange.bind(Object(h.a)(n)),n.handleImageDrop=n.handleImageDrop.bind(Object(h.a)(n)),n.testForSpecialCharacter=n.testForSpecialCharacter.bind(Object(h.a)(n)),n.state=Object(c.a)({},Q),n}return Object(m.a)(a,[{key:"handleTextChange",value:function(e){var t=this;e.preventDefault(),this.setState(Object(u.a)({},e.target.name,e.target.value)),"username"===e.target.name&&(e.target.value===e.target.value.toLowerCase()?X.checkUsernameAvailable(e.target.value).then(function(e){var a=null;200===e.status?a=!0:204===e.state&&(a=!1),t.setState({isTaken:a,isUpperCase:!1})}).catch(function(e){console.log(e)}):this.setState({isUpperCase:!0}))}},{key:"handleExperienceSelect",value:function(e){var t=[],a=[];if(e){var n,i=Object(N.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;t.push({name:r.value,experience:""}),a.push(l.a.createElement("span",{key:r.value},l.a.createElement("label",null,r.value),l.a.createElement("select",{className:"initialcustomization-select",name:r.value,onChange:this.handlePursuitExperienceChange},l.a.createElement("option",{value:""}),l.a.createElement("option",{value:"Beginner"},"Beginner"),l.a.createElement("option",{value:"Familiar"},"Familiar"),l.a.createElement("option",{value:"Experienced"},"Experienced"),l.a.createElement("option",{value:"Expert"},"Expert"))))}}catch(o){i.e(o)}finally{i.f()}}this.setState({pursuits:t,experienceSelects:a})}},{key:"handleProfileSubmit",value:function(e){var t=this;if(e.preventDefault(),this.editor){var a=this.editor.getImage();Promise.all([this.props.firebase.writeBasicUserData(this.state.username,this.state.firstName,this.state.lastName),this.props.firebase.doUsernameUpdate(this.state.username),B.a.canvasToFile(a)]).then(function(e){return Promise.all([Object(B.a)(e[2],{maxWidthOrHeight:250,maxSizeMB:1,fileType:"image/jpeg"}),Object(B.a)(e[2],{maxWidthOrHeight:125,maxSizeMB:1,fileType:"image/jpeg"}),Object(B.a)(e[2],{maxWidthOrHeight:62,maxSizeMB:1,fileType:"image/jpeg"})])}).then(function(e){for(var t=["normal","small","tiny"],a=[],n=0;n<3;n++)a.push(new File([e[n]],t[n],{type:"image/jpeg"}));return a}).then(function(e){var a=new FormData;return a.append("username",t.state.username),a.append("pursuits",JSON.stringify(t.state.pursuits)),a.append("croppedImage",e[0]),a.append("smallCroppedImage",e[1]),a.append("tinyCroppedImage",e[2]),X.createUserProfile(a)}).then(function(e){201===e.status&&window.location.reload()}).catch(function(e){return console.log(e)})}else Promise.all([this.props.firebase.writeBasicUserData(this.state.username,this.state.firstName,this.state.lastName),this.props.firebase.doUsernameUpdate(this.state.username)]).then(function(e){var a=new FormData;return a.append("username",t.state.username),a.append("firstName",t.state.firstName),a.append("lastName",t.state.lastName),a.append("pursuits",JSON.stringify(t.state.pursuits)),X.createUserProfile(a)}).then(function(e){201===e.status?window.location.reload():alert("Something unexpected happen: (",e.status)}).catch(function(e){return console.log(e)})}},{key:"handlePursuitExperienceChange",value:function(e){var t,a=this.state.pursuits,n=Object(N.a)(a);try{for(n.s();!(t=n.n()).done;){var l=t.value;l.name===e.target.name&&(l.experience=e.target.value)}}catch(i){n.e(i)}finally{n.f()}this.setState({pursuits:a})}},{key:"testForSpecialCharacter",value:function(e){return/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g.test(e)}},{key:"handleProfilePhotoChange",value:function(e){this.setState({profilePhoto:e})}},{key:"handleImageDrop",value:function(e){this.setState({profilePhoto:e[0]})}},{key:"render",value:function(){var e=this,t=""===this.state.username||this.state.isTaken?"Taken":"Available",a=this.state.isUpperCase?"But Please Choose Only Lower Case Characters":"",n=this.testForSpecialCharacter(this.state.username),i=n?" But No Special Characters":"",r=this.state,o=r.username,s=r.firstName,u=r.lastName,c=r.pursuits,d=""===o||""===s||""===u||null===c||0===c.length||this.state.isTaken||this.state.isUpperCase||n,m=0!==this.state.pursuits.length?this.state.experienceSelects:l.a.createElement(l.a.Fragment,null),h=l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{onDrop:this.handleImageDrop,noClick:!0,noKeyboard:!0,style:{width:"200px",height:"200px"}},function(t){var a=t.getRootProps,n=t.getInputProps;return l.a.createElement("div",a(),l.a.createElement(L.a,{ref:e.setEditorRef,image:e.state.profilePhoto,width:170,height:170,borderRadius:200,border:50,color:[215,215,215,.8],scale:e.state.imageScale,rotate:e.state.imageRotation}),l.a.createElement("input",n()))}),l.a.createElement("label",null,"Rotation"),l.a.createElement("input",{type:"range",id:"points",name:"points",min:"-20",max:"20",value:this.state.imageRotation,onChange:function(t){return e.setState({imageRotation:parseFloat(t.target.value)})}}),l.a.createElement("label",null,"Scale"),l.a.createElement("input",{type:"range",id:"points",name:"points",step:"0.1",min:"1",max:"10",value:this.state.imageScale,onChange:function(t){return e.setState({imageScale:parseFloat(t.target.value)})}}));return l.a.createElement("div",{className:"initialcustomization-container"},l.a.createElement("form",{onSubmit:this.handleProfileSubmit},l.a.createElement("h2",null,"Let us know about you!"),l.a.createElement("label",null,"Don't worry this won't be public if you don't want it to."),l.a.createElement("div",{className:"initialcustomization-content-container"},l.a.createElement("label",null,"Choose a display profile!"),l.a.createElement("input",{type:"file",name:"displayPhoto",onChange:function(t){return e.handleProfilePhotoChange(t.target.files[0])}}),this.state.profilePhoto?h:l.a.createElement("div",{id:"initialcustomization-display-photo-container"})),l.a.createElement("div",{className:"initialcustomization-content-container"},l.a.createElement("label",null,"Choose a username!",t,a,i),l.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:this.handleTextChange}),l.a.createElement("label",null,"First Name"),l.a.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",onChange:this.handleTextChange}),l.a.createElement("label",null,"Last Name"),l.a.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",onChange:this.handleTextChange})),l.a.createElement("div",{className:"initialcustomization-content-container"},l.a.createElement("label",null,"Tell us what you want to pursue or choose one from the list!"),l.a.createElement(J,{name:"pursuits",onSelect:this.handleExperienceSelect}),m,l.a.createElement("button",{disabled:d,type:"submit"},"Submit"))))}}]),a}(l.a.Component),$=E(Z),ee=a(128),te=l.a.createContext(null),ae=te,ne=function(e){var t=function(t){Object(p.a)(n,t);var a=Object(g.a)(n);function n(e){var t;return Object(d.a)(this,n),(t=a.call(this,e)).state={authUser:null,isLoading:!1},t}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.listener=this.props.firebase.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t,isLoading:!1}):e.setState({authUser:null,isLoading:!1})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return this.state.isLoading?l.a.createElement("p",null,"Loading ... "):l.a.createElement(ae.Provider,{value:this.state.authUser},l.a.createElement(e,this.props))}}]),n}(l.a.Component);return E(t)},le=a(98),ie=function(e){return function(t){var a=function(a){Object(p.a)(i,a);var n=Object(g.a)(i);function i(){return Object(d.a)(this,i),n.apply(this,arguments)}return Object(m.a)(i,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(a){e(a)||t.props.history.push("")})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var a=this;return l.a.createElement(ae.Consumer,null,function(n){return e(n)?l.a.createElement(t,a.props):null})}}]),i}(l.a.Component);return Object(le.a)(s.f,E)(a)}},re=a(140),oe=a(36),se=function(e){return l.a.createElement(oe.a,{className:e.classStyle,minRows:e.minRows,onChange:function(t){return e.handleTextChange(t.target.value)},value:e.commentText})},ue=(a(318),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={overallVoteScore:n.props.score,previousVote:0,isReplyBoxToggled:!1,replyText:""},n.toggleReplyBox=n.toggleReplyBox.bind(Object(h.a)(n)),n.setReplyText=n.setReplyText.bind(Object(h.a)(n)),n.handleVote=n.handleVote.bind(Object(h.a)(n)),n.postReply=n.postReply.bind(Object(h.a)(n)),n.isReplyTextInvalid=n.isReplyTextInvalid.bind(Object(h.a)(n)),n.renderThreadIndicators=n.renderThreadIndicators.bind(Object(h.a)(n)),n.cancelTextInput=n.cancelTextInput.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.likes.includes(this.props.visitorProfilePreviewId)?this.setState({previousVote:1}):this.props.dislikes.includes(this.props.visitorProfilePreviewId)&&this.setState({previousVote:-1})}},{key:"setReplyText",value:function(e){this.setState({replyText:e})}},{key:"toggleReplyBox",value:function(){this.setState(function(e){return{isReplyBoxToggled:!e.isReplyBoxToggled}})}},{key:"handleVote",value:function(e){var t=this,a=this.state.overallVoteScore,n=this.state.previousVote,l=n+e,i=l>-1&&l<1?e:l,r=e,o=e;return(l<-1||l>1)&&(r=0),l<-1&&(o=1),l>1?o=-1:0===l&&(-1===n?o=2:1===n&&(o=-2)),this.setState({overallVoteScore:a+o,previousVote:r}),X.voteOnComment({visitorProfilePreviewId:this.props.visitorProfilePreviewId,commentId:this.props.commentId,voteValue:i}).then(function(e){console.log(e)}).catch(function(e){console.log(e),console.log("Something went wrong with the server."),t.setState({overallVoteScore:a,previousVote:n})})}},{key:"isReplyTextInvalid",value:function(){return 0===this.state.replyText.replaceAll("\\s+","").length||0===this.state.replyText.length}},{key:"postReply",value:function(){var e=this;if(!this.isReplyTextInvalid()){var t=this.props.ancestors;return t.push(this.props.commentId),X.postReply({postId:this.props.postId,visitorProfilePreviewId:this.props.visitorProfilePreviewId,ancestors:JSON.stringify(t),comment:this.state.replyText}).then(function(t){alert(t),e.toggleReplyBox(!1)})}alert("You need to write something")}},{key:"cancelTextInput",value:function(){this.isReplyTextInvalid()?this.setState({replyText:"",isReplyBoxToggled:!1}):window.confirm("Are you sure you want discard your comment?")&&this.setState({isReplyBoxToggled:!1})}},{key:"renderThreadIndicators",value:function(e){for(var t=[],a=0;a<e;a++)t.push(l.a.createElement("div",{className:"singlecomment-thread-indicator"}));return t}},{key:"render",value:function(){var e=this,t=this.props.level>1?"singlecomment-multiple-thread-style":"";return l.a.createElement("div",{className:t},this.props.level>1?l.a.createElement("div",{className:"singlecomment-thread-indicator-container"},this.renderThreadIndicators(this.props.level-1)):null,l.a.createElement("div",{className:"singlecomment-main-container"},l.a.createElement("div",{className:"singlecomment-header-container"},l.a.createElement("div",{className:"singlecomment-display-photo-container"},l.a.createElement("img",{alt:"Single Comment Display Photo Url",src:Object(K.returnUserImageURL)(this.props.displayPhoto)})),l.a.createElement("div",{className:"singlecomment-username-container"},l.a.createElement("p",null,this.props.username))),l.a.createElement("div",{className:"singlecomment-body-container"},l.a.createElement("div",{className:"singlecomment-thread-indicator-container"},this.renderThreadIndicators(1)),l.a.createElement("div",{className:"singlecomment-main-content-container"},l.a.createElement("div",{className:"singlecomment-comment-container",key:this.props.commentId,onMouseOver:function(){return e.props.onMouseOver(e.props.commentId)},onMouseOut:function(){return e.props.onMouseOut(e.props.commentId)},onClick:function(){return e.props.onMouseClick(e.props.commentId)}},l.a.createElement("p",null,this.props.commentText)),l.a.createElement("div",{className:"singlecomment-management-container"},l.a.createElement("button",{onClick:function(){return e.handleVote(1)}},"Upvote"),l.a.createElement("p",null,this.state.overallVoteScore),l.a.createElement("button",{onClick:function(){return e.handleVote(-1)}},"Downvote"),l.a.createElement("button",{onClick:function(){return e.toggleReplyBox()}},"Reply")),l.a.createElement("div",null,this.state.isReplyBoxToggled?l.a.createElement(l.a.Fragment,null,l.a.createElement(se,{classStyle:"",minRows:4,handleTextChange:this.setReplyText,commentText:this.state.replyText}),l.a.createElement("button",{onClick:this.cancelTextInput},"Cancel"),l.a.createElement("button",{onClick:this.postReply},"Reply")):l.a.createElement(l.a.Fragment,null))))))}}]),a}(l.a.Component)),ce="INITIAL_STATE",de="POST",me="COLLAPSED",he="NONE",pe="SHORT",ge="LONG",ve=(a(319),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={windowType:n.props.windowType,commentText:"",loadingComments:!0},n.renderCommentSectionType=n.renderCommentSectionType.bind(Object(h.a)(n)),n.renderCommentInput=n.renderCommentInput.bind(Object(h.a)(n)),n.renderCommentThreads=n.renderCommentThreads.bind(Object(h.a)(n)),n.recursiveRenderComments=n.recursiveRenderComments.bind(Object(h.a)(n)),n.handleCommentTextChange=n.handleCommentTextChange.bind(Object(h.a)(n)),n.handleCommentPost=n.handleCommentPost.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;return this.props.commentIDArray.length>0?X.getComments({params:{visitorUsername:this.props.visitorUsername,rootCommentIdArray:JSON.stringify(this.props.commentIDArray),viewingMode:this.state.windowType}}).then(function(t){e.setState({visitorProfilePreviewId:t.data.userPreviewId,loadingComments:!1},function(){e.props.postType===pe&&e.props.passAnnotationData(t.data.rootComments,t.data.userPreviewId)})}):X.getUserPreviewId({params:{username:this.props.visitorUsername}}).then(function(t){e.setState({visitorProfilePreviewId:t.data.userPreviewId,loadingComments:!1},function(){e.props.postType===pe&&e.props.passAnnotationData(null,t.data.userPreviewId)})})}},{key:"handleCommentTextChange",value:function(e){this.setState({commentText:e})}},{key:"handleCommentPost",value:function(){var e=this,t={visitorProfilePreviewId:this.state.visitorProfilePreviewId,comment:this.state.commentText,postId:this.props.postId,imagePageNumber:0};return X.postComment(t).then(function(t){var a=t.data.rootCommentIdArray;return X.refreshComments({params:{rootCommentIdArray:JSON.stringify(a)}}).then(function(t){e.props.handleCommentInjection(e.props.postIndex,t.data.rootComments,e.props.selectedPostFeedType),e.setState({currentComments:t.data.rootComments})})}).then(function(){return alert("Success!")})}},{key:"renderCommentSectionType",value:function(e){if(this.state.loadingComments||!this.props.fullCommentData)return l.a.createElement("div",null,"Loading...");if(e===me)return this.renderCommentThreads(this.props.fullCommentData);if("EXPANDED"===e)return this.renderCommentThreads(this.props.fullCommentData);throw new Error("No viewing modes matched")}},{key:"recursiveRenderComments",value:function(e,t){var a=t+1,n=e.annotation?JSON.parse(e.annotation.data):null,i=e.comment?e.comment:n.text;if(e.replies){var r=[];e.replies.sort(function(e,t){return e.createdAt<t.createdAt?-1:e.createdAt>t.createdAt?1:0});var o,s=Object(N.a)(e.replies);try{for(s.s();!(o=s.n()).done;){var u=o.value;r.push(this.recursiveRenderComments(u,a))}}catch(c){s.e(c)}finally{s.f()}return l.a.createElement("div",null,l.a.createElement(ue,{level:a,postId:this.props.postId,visitorProfilePreviewId:this.state.visitorProfilePreviewId,visitorUsername:this.props.visitorUsername,commentId:e._id,ancestors:e.ancestor_post_ids,username:e.username,commentText:i,score:e.score,likes:e.likes,dislikes:e.dislikes,displayPhoto:e.display_photo_key,annotation:n,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,onMouseClick:this.props.onMouseClick}),l.a.createElement("div",{className:"comments-reply-container"},r))}return l.a.createElement(ue,{level:a,postId:this.props.postId,visitorProfilePreviewId:this.state.visitorProfilePreviewId,commentId:e._id,ancestors:e.ancestor_post_ids,username:e.username,commentText:i,likes:e.likes,dislikes:e.dislikes,displayPhoto:e.display_photo_key,score:e.score,annotation:n,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,onMouseClick:this.props.onMouseClick})}},{key:"renderCommentThreads",value:function(e){var t=[];console.log(e);var a,n=Object(N.a)(e);try{for(n.s();!(a=n.n()).done;){var l=a.value;t.push(this.recursiveRenderComments(l,0))}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"renderCommentInput",value:function(e){return this.props.visitorUsername?l.a.createElement("div",{className:e===me?"comments-collapsed-input-container":"comments-expanded-input-container"},l.a.createElement(se,{classStyle:e===me?"comments-collapsed-input":"comments-expanded-input",minRows:4,handleTextChange:this.handleCommentTextChange,commentText:this.state.commentText}),l.a.createElement("div",null,l.a.createElement("button",{onClick:this.handleCommentPost},"Add Comment"),l.a.createElement("button",{onClick:this.props.onPromptAnnotation},"Annotate"))):l.a.createElement("div",null,l.a.createElement("p",null,"You must sign in before you can leave a comment."))}},{key:"render",value:function(){return this.state.windowType===me?l.a.createElement("div",{className:"comments-main-container"},this.renderCommentSectionType(me),this.renderCommentInput(me)):"EXPANDED"===this.state.windowType?l.a.createElement("div",{className:"comments-main-container"},this.renderCommentInput("EXPANDED"),this.renderCommentSectionType("EXPANDED")):void 0}}]),a}(l.a.Component)),be=(a(320),function(e){var t=Object(n.useState)(!1),a=Object(j.a)(t,2),i=a[0],r=a[1];return l.a.createElement("div",{className:"postheader-main-container"},l.a.createElement("div",{className:"postheader-author-information"},l.a.createElement("div",{className:"postheader-display-photo-container"},l.a.createElement("img",{src:Object(K.returnUserImageURL)(e.displayPhoto)})),l.a.createElement("h4",null,e.username)),e.isOwnProfile?function(){var t=i?l.a.createElement("div",{id:"postheader-button-pop-up"},l.a.createElement("button",{onClick:e.onDeletePost},"Remove"),l.a.createElement("button",{onClick:function(){return e.onEditClick("EDIT")}},"Edit")):l.a.createElement(l.a.Fragment,null);return l.a.createElement("div",{id:"postheader-main-button-container"},l.a.createElement("button",{onClick:function(){return r(!i)}},"..."),t)}():null)}),fe=(a(321),function(e){return e.length<1e3?l.a.createElement("div",{id:"tiny-amount-text-container"},l.a.createElement("p",null,e.text)):l.a.createElement("div",{id:"medium-amount-text-container"},l.a.createElement("p",null,e.text))}),Ee=function(e){var t=new Date(e);return{month:["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],day:t.getDate(),year:t.getFullYear()}},ye=function(e){var t=e.date?Ee(e.date):null;return l.a.createElement("div",null,l.a.createElement("div",null,e.isMilestone?l.a.createElement("p",null,"Milestone :)"):l.a.createElement(l.a.Fragment,null),t?l.a.createElement("p",null,t.month,", ",t.day,", ",t.year," "):l.a.createElement(l.a.Fragment,null),e.pursuit?l.a.createElement("p",null,e.pursuit):l.a.createElement(l.a.Fragment,null),e.min?l.a.createElement("p",null,e.min," minutes"):l.a.createElement(l.a.Fragment,null)),l.a.createElement("p",null,e.isPaginated&&e.textData?e.textData[e.index]:e.textData))},Pe=(a(322),function(e){return l.a.createElement("div",null,l.a.createElement("h4",null,e.username),e.validFilesLength>0&&!e.isPaginated?l.a.createElement("button",{onClick:e.onPaginatedChange},"Caption Photos Individually"):l.a.createElement(l.a.Fragment,null),e.validFilesLength>0&&e.isPaginated?l.a.createElement("button",{onClick:e.onPaginatedChange},"Return to Single Caption"):l.a.createElement(l.a.Fragment,null),l.a.createElement(oe.a,{id:"textcontainer-text-input",placeholder:"Write something here.",onChange:e.onTextChange,minRows:5,value:e.isPaginated?e.textPageText[e.imageIndex]:e.textPageText}))}),Se=function(e){var t=e.className,a=e.style,n=e.onClick;return l.a.createElement("div",{className:t,style:"left"===e.direction?Object(c.a)(Object(c.a)({},a),{},{display:"block",background:"red",left:"5%",zIndex:"1"}):Object(c.a)(Object(c.a)({},a),{},{display:"block",background:"red",right:"5%",zIndex:"1"}),onClick:n})},Ce=a(129),we=a.n(Ce),ke=(a(143),a(144),a(338),function(e){var t={dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,nextArrow:l.a.createElement(Se,{direction:"right"}),prevArrow:l.a.createElement(Se,{direction:"left"})},a=function(){return l.a.createElement(Pe,{validFilesLength:e.eventData.image_data.length,isPaginated:e.isPaginated,onPaginatedChange:e.onPaginatedChange,onTextChange:e.onTextChange,textPageText:e.textData,imageIndex:e.imageIndex})};if(e.eventData.image_data.length){var n=e.eventData.image_data.map(function(e,t){return l.a.createElement("img",{alt:"Image for Slider",src:e})});return l.a.createElement("div",{id:"shortreeditor-main-container"},l.a.createElement("div",{className:"shortreeditor-hero-container"},l.a.createElement(we.a,Object.assign({afterChange:function(t){return e.onIndexChange(t)}},t),n)),l.a.createElement("div",{className:"shortreeditor-side-container"},a()))}return a()}),Oe=a(75),Te=a.n(Oe),De=(a(339),function(e){var t=Object(n.useState)(e.date),a=Object(j.a)(t,2),i=a[0],r=a[1],o=Object(n.useState)(null),s=Object(j.a)(o,2),u=s[0],c=s[1],d=Object(n.useState)(e.isMilestone),m=Object(j.a)(d,2),h=m[0],p=m[1],g=Object(n.useState)(e.previewTitle),v=Object(j.a)(g,2),b=v[0],f=v[1],E=Object(n.useState)(""),y=Object(j.a)(E,2),P=y[0],S=y[1],C=Object(n.useState)(e.preferredPostType),w=Object(j.a)(C,2),k=w[0],O=w[1],T=Object(n.useState)(e.selectedPursuit?e.selectedPursuit:null),D=Object(j.a)(T,2),I=D[0],R=D[1],x=Object(n.useState)(!1),_=Object(j.a)(x,2),M=_[0],A=_[1],F=Object(n.useState)(!1),L=Object(j.a)(F,2),U=L[0],B=L[1],V=Object(n.useState)(null),W=Object(j.a)(V,2),H=W[0],G=W[1],J=[],z=function(){alert("Post Successful! You will see your post soon."),e.closeModal(),window.location.reload()},q=function(){A(!1),B(!0)},K=e.postType===pe?l.a.createElement("h2",null,"Placeholder for Short"):l.a.createElement("h2",null,"Placeholder for Long"),Y=e.postType===ge?l.a.createElement(oe.a,{name:"subtitle",id:"review-post-text",placeholder:"Create an Optional Description",onChange:function(e){return S(e.target.value)},maxLength:140}):null,Q=e.coverPhoto?l.a.createElement("label",null,"Upload New Cover Photo?"):l.a.createElement("label",null,"Upload a Cover Photo");J.push(l.a.createElement("option",{value:null}));var Z,$=Object(N.a)(e.pursuitNames);try{for($.s();!(Z=$.n()).done;){var ee=Z.value;J.push(l.a.createElement("option",{key:ee,value:ee},ee))}}catch(te){$.e(te)}finally{$.f()}return l.a.createElement("div",{id:"reviewpost-small-window"},l.a.createElement("div",null,l.a.createElement("div",null,K,l.a.createElement("div",null,l.a.createElement("span",null,l.a.createElement("button",{value:e.previousState,onClick:function(t){return function(t){if(e.postType===pe)e.setPostStage(t);else{if(e.postType!==ge)throw new Error("No value matched for return click.");e.setPostStage(t,!1)}}(t.target.value)}},"Return")))),l.a.createElement("div",{className:"reviewpost-button-container"},l.a.createElement("label",null,"Preview Title"),l.a.createElement(oe.a,{name:"title",placeholder:"Create an Optional Preview Title Text",value:b||null,onChange:function(e){return f(e.target.value)},maxLength:100}),Y,Q,l.a.createElement("input",{type:"file",onChange:function(e){return G(e.target.files[0])}}),l.a.createElement("label",null,"Date"),l.a.createElement("input",{type:"date",value:i,onChange:function(e){return r(e.target.value)}}),l.a.createElement("label",null,"Pursuit"),l.a.createElement("select",{name:"pursuit-category",value:I,onChange:function(e){return R(e.target.value)}},J),l.a.createElement("label",null,"Total Minutes"),l.a.createElement("input",{type:"number",value:e.min,onChange:function(e){return c(e.target.value)}}),l.a.createElement("label",null,"Is Milestone"),l.a.createElement("input",{type:"checkbox",value:h,onClick:function(){return p(!h)}})),l.a.createElement("div",{className:"reviewpost-button-container"},l.a.createElement("p",null,"Post to:"),l.a.createElement("div",null,l.a.createElement("select",{name:"posts",id:"cars",value:e.preferredPostType?e.preferredPostType:"PUBLIC_FEED",onChange:function(e){return O(e.target.value)}},l.a.createElement("option",{value:"PRIVATE"},"Make post private on your page"),l.a.createElement("option",{value:"PERSONAL_PAGE"},"Make post public on your page:"),l.a.createElement("option",{value:"PUBLIC_FEED"},"Post to your feed and page"))),l.a.createElement("button",{onClick:function(t){return function(){var t=new FormData;if(t.append("displayPhoto",e.displayPhoto),t.append("postType",e.postType),t.append("username",e.username),t.append("isPaginated",e.isPaginated),t.append("isMilestone",h||!1),b&&t.append("title",Te.a.trim(b)),k&&t.append("postPrivacyType",k),I&&t.append("pursuitCategory",I),i&&t.append("date",i),u&&t.append("minDuration",u),H&&t.append("coverPhoto",H),P&&t.append("subtitle",Te.a.trim(P)),e.textData&&t.append("textData",e.postType===pe?e.textData:JSON.stringify(e.textData)),e.imageArray&&e.imageArray.length>0){console.log("image array");var a,n=Object(N.a)(e.imageArray);try{for(n.s();!(a=n.n()).done;){var l=a.value;t.append("images",l)}}catch(te){n.e(te)}finally{n.f()}}return e.isUpdateToPost?(console.log(JSON.stringify(e.textData)),e.postId&&t.append("postId",e.postId),X.updatePost(t).then(function(e){200===e.status?z():q()}).catch(function(e){console.log(e.error),alert(e)})):(console.log("Posting"),X.createPost(t).then(function(e){201===e.status?z():q()}).catch(function(e){console.log(e.error),alert(e)}))}()}},e.isUpdateToPost?"Update!":"Post!")),U?l.a.createElement("p",null,"An Error Occured. Please try again. "):l.a.createElement(l.a.Fragment,null),M?l.a.createElement("div",null,"  ",l.a.createElement("p",null," Loading..."),"  "):l.a.createElement(l.a.Fragment,null)))}),Ie=a(134),Re=(a(341),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={annotation:{}},n.activeAnnotationComparator=n.activeAnnotationComparator.bind(Object(h.a)(n)),n.onAnnotationChange=n.onAnnotationChange.bind(Object(h.a)(n)),n.onAnnotationSubmit=n.onAnnotationSubmit.bind(Object(h.a)(n)),n.renderEditor=n.renderEditor.bind(Object(h.a)(n)),n.renderPromptOverlay=n.renderPromptOverlay.bind(Object(h.a)(n)),n.renderImageControls=n.renderImageControls.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentWillUnmount",value:function(){console.log("Image Slider unmount")}},{key:"onAnnotationChange",value:function(e){this.setState({annotation:e})}},{key:"onAnnotationSubmit",value:function(e){this.setState({annotation:{}},this.props.onAnnotationSubmit(e))}},{key:"renderEditor",value:function(e){var t=e.annotation.geometry;return t?l.a.createElement("div",{style:{background:"white",borderRadius:3,position:"absolute",zIndex:9999,left:"".concat(t.x,"%"),top:"".concat(t.y+t.height,"%")}},l.a.createElement("div",null,"Custom Editor"),l.a.createElement(oe.a,{onChange:function(t){return e.onChange(Object(c.a)(Object(c.a)({},e.annotation),{},{data:Object(c.a)(Object(c.a)({},e.annotation.data),{},{text:t.target.value})}))}}),l.a.createElement("button",{onClick:e.onSubmit},"Comment")):null}},{key:"renderPromptOverlay",value:function(){return l.a.createElement("div",{style:{background:"rgba(0, 0, 0, 0.3)",color:"white",padding:5,pointerEvents:"none",position:"absolute",top:5,left:5}},"Click and Drag to create an annotation!")}},{key:"activeAnnotationComparator",value:function(e,t){return e.data.id===t}},{key:"renderImageControls",value:function(e){var t=this;return l.a.createElement("div",null,this.props.imageArray.length>1?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{onClick:function(){return t.props.handleArrowPress(-1)}},"Previous"),l.a.createElement("button",{onClick:function(){return t.props.handleArrowPress(1)}},"Next")):null,"EXPANDED"===e?l.a.createElement("button",{onClick:this.props.toggleAnnotations},this.props.areAnnotationsHidden?"Show Annotations":"Hide Annotations"):l.a.createElement(l.a.Fragment,null))}},{key:"render",value:function(){var e=this.props.hideAnnotations?[]:this.props.annotations;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"customimageslider-hero-container"},l.a.createElement(Ie.a,{src:this.props.imageArray[this.props.imageIndex],alt:"Image Display Goes Here",activeAnnotations:this.props.activeAnnotations,annotations:e,disableOverlay:this.props.hideAnnotations,disableAnnotation:this.props.windowType===me,value:this.state.annotation,renderEditor:this.renderEditor,activeAnnotationComparator:this.activeAnnotationComparator,onChange:this.onAnnotationChange,onSubmit:this.onAnnotationSubmit})),this.props.showPromptOverlay?l.a.createElement("p",null,"Click on a point in the image and drag!"):null,this.renderImageControls(this.props.windowType))}}]),a}(l.a.Component)),xe=(a(188),a(342),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={annotations:null,activeAnnotations:[],fullCommentData:[],visitorProfilePreviewId:"",areAnnotationsHidden:!0,selectedAnnotationIndex:null,imageIndex:0,selectedFiles:[],validFiles:[],unsupportedFiles:[],showPromptOverlay:!1,textData:n.props.textData,date:n.props.eventData.date,min:n.props.eventData.min_duration,pursuitCategory:n.props.eventData.pursuit_category,isPaginated:n.props.eventData.is_paginated,isMilestone:n.props.eventData.is_milestone,postDisabled:!0,window:ce},n.heroRef=l.a.createRef(),n.toggleAnnotations=n.toggleAnnotations.bind(Object(h.a)(n)),n.passAnnotationData=n.passAnnotationData.bind(Object(h.a)(n)),n.returnValidAnnotations=n.returnValidAnnotations.bind(Object(h.a)(n)),n.renderComments=n.renderComments.bind(Object(h.a)(n)),n.renderImageSlider=n.renderImageSlider.bind(Object(h.a)(n)),n.handleArrowPress=n.handleArrowPress.bind(Object(h.a)(n)),n.handlePromptAnnotation=n.handlePromptAnnotation.bind(Object(h.a)(n)),n.handleMouseOver=n.handleMouseOver.bind(Object(h.a)(n)),n.handleMouseOut=n.handleMouseOut.bind(Object(h.a)(n)),n.handleMouseClick=n.handleMouseClick.bind(Object(h.a)(n)),n.handleAnnotationSubmit=n.handleAnnotationSubmit.bind(Object(h.a)(n)),n.handleWindowChange=n.handleWindowChange.bind(Object(h.a)(n)),n.handleIndexChange=n.handleIndexChange.bind(Object(h.a)(n)),n.handleTextChange=n.handleTextChange.bind(Object(h.a)(n)),n.handlePaginatedChange=n.handlePaginatedChange.bind(Object(h.a)(n)),n.handleModalLaunch=n.handleModalLaunch.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){for(var e=[],t=0;t<this.props.eventData.image_data.length;t++)e.push([]);this.setState({annotations:e})}},{key:"toggleAnnotations",value:function(){this.state.areAnnotationsHidden?this.setState({areAnnotationsHidden:!1}):this.setState({areAnnotationsHidden:!0,selectedAnnotationIndex:null})}},{key:"passAnnotationData",value:function(e,t){var a=this.state.annotations;if(e){var n,l=Object(N.a)(e);try{for(l.s();!(n=l.n()).done;){var i=n.value;if(i.annotation){var r=JSON.parse(i.annotation.data),o=JSON.parse(i.annotation.geometry);a[i.annotation.image_page_number].push({geometry:o,data:Object(c.a)(Object(c.a)({},r),{},{id:i._id})})}}}catch(s){l.e(s)}finally{l.f()}}this.setState({fullCommentData:e,annotations:a,visitorProfilePreviewId:t})}},{key:"returnValidAnnotations",value:function(){if(this.state.annotations){var e=this.state.annotations[this.state.imageIndex];return null!==this.state.selectedAnnotationIndex?[e[this.state.selectedAnnotationIndex]]:e}return[]}},{key:"renderComments",value:function(e){return"EXPANDED"===e?l.a.createElement(ve,{postType:pe,commentIDArray:this.props.eventData.comments,fullCommentData:this.state.fullCommentData,windowType:e,visitorUsername:this.props.visitorUsername,postId:this.props.postId,postIndex:this.props.postIndex,handleCommentInjection:this.props.handleCommentInjection,selectedPostFeedType:this.props.selectedPostFeedType,onPromptAnnotation:this.handlePromptAnnotation,passAnnotationData:this.passAnnotationData,onMouseClick:this.handleMouseClick,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut}):e===me?l.a.createElement("p",null,this.props.eventData.comment_count," Comments"):void 0}},{key:"renderImageSlider",value:function(e){var t=this.returnValidAnnotations(),a=this.props.largeViewMode?"shortpostviewer-large-hero-image-container":"shortpostviewer-inline-hero-container",n=this.props.eventData.image_data.map(function(e,t){return Object(K.returnUserImageURL)(e)});return this.state.annotations?l.a.createElement("div",{className:a},l.a.createElement(Re,{windowType:e,hideAnnotations:this.state.areAnnotationsHidden,imageArray:n,annotations:t,activeAnnotations:this.state.activeAnnotations,imageIndex:this.state.imageIndex,showPromptOverlay:this.state.showPromptOverlay,areAnnotationsHidden:this.state.areAnnotationsHidden,onAnnotationSubmit:this.handleAnnotationSubmit,toggleAnnotations:this.toggleAnnotations,handleArrowPress:this.handleArrowPress})):l.a.createElement(l.a.Fragment,null)}},{key:"handleArrowPress",value:function(e){var t=this.state.imageIndex+e;return t===this.state.annotations.length?this.setState({imageIndex:0,selectedAnnotationIndex:null}):-1===t?this.setState({imageIndex:this.state.annotations.length-1,selectedAnnotationIndex:null}):this.setState({imageIndex:t,selectedAnnotationIndex:null})}},{key:"handlePromptAnnotation",value:function(){var e=this;this.heroRef.current.scrollIntoView({block:"center"}),this.setState({showPromptOverlay:!0}),setTimeout(function(){e.setState({showPromptOverlay:!1})},3e3)}},{key:"handleMouseOver",value:function(e){this.setState({activeAnnotations:[].concat(Object(re.a)(this.state.activeAnnotations),[e])})}},{key:"handleMouseOut",value:function(e){var t=this.state.activeAnnotations.indexOf(e);this.setState({activeAnnotations:[].concat(Object(re.a)(this.state.activeAnnotations.slice(0,t)),Object(re.a)(this.state.activeAnnotations.slice(t+1)))})}},{key:"handleMouseClick",value:function(e){var t,a=0,n=Object(N.a)(this.state.annotations);try{for(n.s();!(t=n.n()).done;){var l=t.value;if(l.length>0){var i,r=0,o=Object(N.a)(l);try{for(o.s();!(i=o.n()).done;){if(i.value.data.id===e)return this.setState({imageIndex:a,selectedAnnotationIndex:r,areAnnotationsHidden:!1},this.heroRef.current.scrollIntoView({block:"center"}));r++}}catch(s){o.e(s)}finally{o.f()}}a++}}catch(s){n.e(s)}finally{n.f()}}},{key:"handleAnnotationSubmit",value:function(e){var t=this,a=e.geometry,n=e.data,l={postId:this.props.eventData._id,visitorProfilePreviewId:this.state.visitorProfilePreviewId,imagePageNumber:this.state.imageIndex,annotationData:JSON.stringify(n),annotationGeometry:JSON.stringify(a)};X.postComment(l).then(function(e){var l=e.data.rootCommentIdArray,i=e.data.newRootComment,r=t.state.annotations[t.state.imageIndex].concat({geometry:a,data:Object(c.a)(Object(c.a)({},n),{},{id:l[0]})}),o=t.state.annotations,s=t.state.fullCommentData;return s.push(i),o[t.state.imageIndex]=r,console.log(i),console.log(s),t.setState({annotations:o,commentArray:l,fullCommentData:s})}).catch(function(e){console.log(e),alert("Sorry, your annotation could not be added.")})}},{key:"handleWindowChange",value:function(e){this.setState({window:e})}},{key:"handleIndexChange",value:function(e){this.setState({imageIndex:e})}},{key:"handleTextChange",value:function(e){var t="";this.state.isPaginated?t[this.state.imageIndex]=e:t=e,this.setState({textData:t})}},{key:"handlePaginatedChange",value:function(){this.setState(function(e){return{isPaginated:!e.isPaginated}})}},{key:"handleModalLaunch",value:function(){if(!this.props.isPostOnlyView)return this.props.passDataToModal(this.props.eventData,pe,this.props.postIndex)}},{key:"render",value:function(){var e=this;if(this.state.window===ce)return this.props.eventData.image_data.length?this.props.largeViewMode?l.a.createElement("div",{className:"shortpostviewer-window"},l.a.createElement("div",{id:"shortpostviewer-large-main-container"},this.renderImageSlider("EXPANDED"),l.a.createElement("div",{className:"shortpostviewer-large-side-container",ref:this.heroRef},l.a.createElement(be,{isOwnProfile:this.props.isOwnProfile,username:this.props.username,displayPhoto:this.props.eventData.display_photo_key,onEditClick:this.handleWindowChange,onDeletePost:this.props.onDeletePost}),l.a.createElement(ye,{index:this.state.imageIndex,isPaginated:this.state.isPaginated,isMilestone:this.state.isMilestone,date:this.state.date,pursuit:this.state.pursuitCategory,min:this.state.min,textData:this.props.textData}))),this.renderComments("EXPANDED")):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"shortpostviewer-inline-main-container",onClick:this.handleModalLaunch},l.a.createElement(be,{isOwnProfile:this.props.isOwnProfile,username:this.props.username,displayPhoto:this.props.eventData.display_photo_key}),this.renderImageSlider(me),l.a.createElement("div",{className:"shortpostviewer-inline-side-container"},l.a.createElement(ye,{index:this.state.imageIndex,isPaginated:this.state.isPaginated,isMilestone:this.state.isMilestone,date:this.state.date,pursuit:this.state.pursuitCategory,min:this.state.min,textData:this.props.textData}))),this.renderComments(me)):this.props.largeViewMode?l.a.createElement("div",{className:"shortpostviewer-window"},l.a.createElement("div",{id:"shortpostviewer-large-main-container"},l.a.createElement("div",{className:"shortpostviewer-large-hero-text-container"},l.a.createElement(fe,{text:this.props.textData})),l.a.createElement("div",{className:"shortpostviewer-large-side-container"},l.a.createElement(be,{isOwnProfile:this.props.isOwnProfile,username:this.props.username,displayPhoto:this.props.eventData.display_photo_key,onEditClick:this.handleWindowChange,onDeletePost:this.props.onDeletePost}),l.a.createElement(ye,{index:this.state.imageIndex,isPaginated:this.state.isPaginated,isMilestone:this.state.isMilestone,date:this.state.date,pursuit:this.state.pursuitCategory,min:this.state.min,textData:null}))),this.renderComments("EXPANDED")):l.a.createElement("div",{onClick:this.handleModalLaunch},l.a.createElement("div",{className:"shortpostviewer-inline-main-container"},l.a.createElement("div",{className:"shortpostviewer-inline-hero-container"},l.a.createElement(be,{isOwnProfile:this.props.isOwnProfile,username:this.props.username,displayPhoto:this.props.eventData.display_photo_key}),l.a.createElement(fe,{text:this.props.textData})),l.a.createElement("div",{className:"shortpostviewer-inline-side-container"},l.a.createElement(ye,{index:this.state.imageIndex,isPaginated:this.state.isPaginated,isMilestone:this.state.isMilestone,date:this.state.date,pursuit:this.state.pursuitCategory,min:this.state.min,textData:null}))),this.renderComments(me));if("EDIT_STATE"===this.state.window)return l.a.createElement("div",{className:"shortpostviewer-window"},l.a.createElement("div",{className:"shortpostviewer-button-container"},l.a.createElement("button",{onClick:function(){return e.handleWindowChange(ce)}},"Return"),l.a.createElement("button",{onClick:function(){return e.handleWindowChange("REVIEW_STATE")}},"Review Post")),l.a.createElement(ke,{imageIndex:this.state.imageIndex,eventData:this.props.eventData,textData:this.props.textData,isPaginated:this.state.isPaginated,onIndexChange:this.handleIndexChange,onTextChange:this.handleTextChange,onPaginatedChange:this.handlePaginatedChange}));var t=null;return this.props.eventData.date&&(t=new Date(this.props.eventData.date).toISOString().substring(0,10)),l.a.createElement(De,{isUpdateToPost:!0,previousState:"EDIT_STATE",postId:this.props.eventData._id,displayPhoto:this.props.displayPhoto,isPaginated:this.state.isPaginated,isMilestone:this.props.eventData.is_milestone,previewTitle:this.props.eventData.title,previewSubtitle:this.props.eventData.subtitle,coverPhoto:this.props.eventData.cover_photo_key,date:t,min:this.props.eventData.min_duration,selectedPursuit:this.props.eventData.pursuit_category,pursuitNames:this.props.pursuitNames,closeModal:this.props.closeModal,postType:pe,textData:this.props.textData,username:this.props.username,preferredPostType:this.props.preferredPostType,handlePreferredPostTypeChange:this.handlePreferredPostTypeChange,onClick:this.handleWindowChange})}}]),a}(l.a.Component)),je=a(82),_e=a.n(je),Me=a(136),Ae=a(133),Ne=(a(634),E(function(e){var t=Object(n.useState)(0),a=Object(j.a)(t,2),i=a[0],r=a[1],o=Object(n.useState)(ce),s=Object(j.a)(o,2),u=s[0],c=s[1],d=Object(n.useState)(e.textData),m=Object(j.a)(d,2),h=m[0],p=m[1],g=Object(n.useState)(e.textData),v=Object(j.a)(g,2),b=v[0],f=v[1],E=function(t){t===ce&&(p(e.textData),r(i+1)),c(t)};if(u===ce){var y=["January","February","March","April","May","June","July","August","September","October","November","December"],P=e.eventData.date?new Date(e.eventData.date):null,S=Object(K.returnUserImageURL)(e.eventData.cover_photo_key);return e.largeViewMode?l.a.createElement("div",{className:e.isPostOnlyView?"":"longpostviewer-window"},l.a.createElement("div",{className:"longpostviewer-meta-info-container"},l.a.createElement("div",null,e.eventData.title?l.a.createElement("div",{id:"longpostviewer-top-title-bar"},l.a.createElement("h1",{id:"longpostviewer-title"},e.eventData.title),e.isOwnProfile?l.a.createElement("div",{className:"longpostviewer-button-container"},l.a.createElement("button",{onClick:function(){return E("EDIT_STATE")}},"Edit"),l.a.createElement("button",{onClick:e.onDeletePost},"Remove")):l.a.createElement(l.a.Fragment,null)):l.a.createElement(l.a.Fragment,null),e.eventData.subtitle?l.a.createElement("h4",{id:"longpostviewer-subtitle"},e.eventData.subtitle):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{className:"longpostviewer-author-info-container"},l.a.createElement("div",null,l.a.createElement("img",{className:"longpostviewer-display-photo",src:Object(K.returnUserImageURL)(e.displayPhoto)}),e.eventData.date?l.a.createElement("p",null,y[P.getMonth()],P.getDate()+1,",",P.getFullYear()):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"longpostviewer-author-info"},l.a.createElement("h4",null,e.username),e.eventData.pursuit_category?l.a.createElement("p",null,"For ",e.eventData.pursuit_category):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"longpostviewer-stats-container"},e.eventData.is_milestone?l.a.createElement("p",null,"Milestone :)"):l.a.createElement(l.a.Fragment,null),e.eventData.min_duration?l.a.createElement("p",null,e.eventData.min_duration," minutes"):l.a.createElement(l.a.Fragment,null))),l.a.createElement("div",{className:"longpostviewer-cover-photo-container"},e.eventData.cover_photo_key?l.a.createElement("img",{alt:"cover photo",className:"longpostviewer-cover-photo",src:S}):l.a.createElement(l.a.Fragment,null)))),l.a.createElement("div",{className:"longpostviewer-editor-container"},l.a.createElement(_e.a,{key:i,content:e.textData,read_only:!0})),"EXPANDED"===(C="EXPANDED")?l.a.createElement(ve,{postType:ge,commentIDArray:e.eventData.comments,windowType:C,visitorUsername:e.visitorUsername,postId:e.postId,postIndex:e.postIndex,handleCommentInjection:e.handleCommentInjection,selectedPostFeedType:e.selectedPostFeedType}):C===me?l.a.createElement("p",null,e.eventData.comment_count," Comments"):void 0):l.a.createElement("div",{onClick:function(){if(!e.isPostOnlyView)return e.passDataToModal(e.eventData,ge,e.postIndex)}},l.a.createElement(be,{isOwnProfile:e.isOwnProfile,username:e.username,displayPhoto:e.eventData.display_photo_key}),l.a.createElement("div",null,e.eventData.title?l.a.createElement("h2",null,e.eventData.title):l.a.createElement(l.a.Fragment,null),e.eventData.subtitle?l.a.createElement("h4",null,e.eventData.subtitle):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"longpostviewer-stats-container"},e.eventData.is_milestone?l.a.createElement("p",null,"Milestone :)"):l.a.createElement(l.a.Fragment,null),e.eventData.date?l.a.createElement("p",null,y[P.getMonth()],P.getDate()+1,",",P.getFullYear()):l.a.createElement(l.a.Fragment,null),e.eventData.pursuit_category?l.a.createElement("p",null,e.eventData.pursuit_category):l.a.createElement(l.a.Fragment,null),e.eventData.min_duration?l.a.createElement("p",null,e.eventData.min_duration," minutes"):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{id:"longpostviewer-inline-editor-container",className:"longpostviewer-editor-container"},e.eventData.cover_photo_key?l.a.createElement("img",{alt:"cover photo",className:"longpostviewer-cover-photo",src:S}):l.a.createElement(l.a.Fragment,null),l.a.createElement(_e.a,{key:i,content:e.textData,read_only:!0})))}if("EDIT_STATE"===u)return console.log("EDIT STATE"),l.a.createElement("div",{className:"longpostviewer-window"},l.a.createElement("div",{className:"longpostviewer-button-container"},e.isOwnProfile?l.a.createElement("button",{onClick:function(){f(e.textData),p(e.textData),E(ce)}},"Cancel Edit"):l.a.createElement(l.a.Fragment,null),e.isOwnProfile?l.a.createElement("button",{onClick:function(){f(h),E("REVIEW_STATE")}},"Review"):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"longpostviewer-editor-container"},l.a.createElement(_e.a,{key:i,onChange:function(e){p(e.emitSerializedOutput())},content:b,default_wrappers:[{className:"my-custom-h1",block:"header-one"},{className:"my-custom-h2",block:"header-two"},{className:"my-custom-h3",block:"header-three"}],widgets:[Object(Me.a)({options:{upload_url:K.IMAGE_BASE_URL,upload_callback:function(e,t){console.log(e),console.log(t),alert("file uploaded: "+e.data.url)},upload_error_callback:function(e,t){console.log(e),alert("Failed to Upload Image")}}}),Object(Ae.a)()]})));var C,w=null;return e.eventData.date&&(console.log(e.eventData.date),w=new Date(e.eventData.date).toISOString().substring(0,10)),l.a.createElement(De,{isUpdateToPost:!0,previousState:"EDIT_STATE",displayPhoto:e.displayPhoto,isPaginated:!1,textData:b,closeModal:e.closeModal,postType:ge,setPostStage:c,username:e.username,preferredPostType:e.preferredPostType,pursuitNames:e.pursuitNames,handlePreferredPostTypeChange:e.handlePreferredPostTypeChange,postId:e.eventData._id,isMilestone:e.eventData.is_milestone,previewTitle:e.eventData.title,previewSubtitle:e.eventData.subtitle,coverPhoto:e.eventData.cover_photo_url,date:w,min:e.eventData.min_duration,selectedPursuit:e.eventData.pursuit_category,onClick:function(){return E("EDIT_STATE")}})})),Fe=E(function(e){var t=e.eventData.username===e.firebase.returnUsername();switch(e.eventData.post_format){case pe:return l.a.createElement(xe,{postId:e.eventData._id,postIndex:e.postIndex,displayPhoto:e.displayPhoto,username:e.username,visitorUsername:e.visitorUsername,pursuitNames:e.pursuitNames,preferredPostType:e.preferredPostType,textData:e.textData,largeViewMode:e.largeViewMode,isOwnProfile:t,isPostOnlyView:e.isPostOnlyView,eventData:e.eventData,onDeletePost:e.onDeletePost,closeModal:e.closeModal,passDataToModal:e.passDataToModal,handleCommentInjection:e.handleCommentInjection,selectedPostFeedType:e.selectedPostFeedType});case ge:return l.a.createElement(Ne,{postId:e.eventData._id,postIndex:e.postIndex,displayPhoto:e.displayPhoto,username:e.username,visitorUsername:e.visitorUsername,pursuitNames:e.pursuitNames,preferredPostType:e.preferredPostType,largeViewMode:e.largeViewMode,textData:e.textData,isOwnProfile:t,isPostOnlyView:e.isPostOnlyView,eventData:e.eventData,onDeletePost:e.onDeletePost,closeModal:e.closeModal,passDataToModal:e.passDataToModal,handleCommentInjection:e.handleCommentInjection,selectedPostFeedType:e.selectedPostFeedType});default:throw new Error("No content type matched in event-modal.js")}}),Le=(a(635),function(e){var t=e.post,a=t.date?Ee(t.date):null;if(t.cover_photo_key){var n=t.is_milestone?"MileStone":"Progress";return l.a.createElement("div",null,l.a.createElement("div",{className:"shortevent-with-cover-photo-container"},l.a.createElement("img",{alt:"short event cover photo",className:"shortevent-cover-photo",src:t.cover_photo_key?Object(K.returnUserImageURL)(t.cover_photo_key):Object(K.returnUserImageURL)(t.image_data[0])})),l.a.createElement("div",{className:"shortevent-text-container"},t.title?l.a.createElement("h4",null,t.title):l.a.createElement(l.a.Fragment,null),t.pursuit_category?l.a.createElement("h4",null,t.pursuit_category," ",n," "):l.a.createElement(l.a.Fragment,null),l.a.createElement("p",null,e.commentCount," Comments")))}var i=t.text_snippet,r=t.is_milestone?"MileStone":"Progress";return l.a.createElement("div",null,l.a.createElement("div",{className:"shortevent-no-cover-photo-container"},l.a.createElement("p",{className:"shortevent-cover"},i)),l.a.createElement("div",{className:"shortevent-text-container"},t.title?l.a.createElement("h4",null,t.title):l.a.createElement(l.a.Fragment,null),t.pursuit_category?l.a.createElement("p",null,t.pursuit_category," ",r):l.a.createElement(l.a.Fragment,null),a?l.a.createElement("p",null,a.month,", ",a.day,", ",a.year," "):l.a.createElement(l.a.Fragment,null),l.a.createElement("p",null,e.commentCount," Comments")))}),Ue=(a(636),function(e){if(void 0===e.post.text_data)return l.a.createElement(l.a.Fragment,null);var t=e.post,a=t.date?Ee(t.date):null,n=t.text_snippet,i=l.a.createElement("img",{alt:"Cover Photo",className:"longevent-cover-photo",src:Object(K.returnUserImageURL)(t.cover_photo_key)});return l.a.createElement("div",null,l.a.createElement("div",{className:t.cover_photo_key?"longevent-with-cover-photo-container":"longevent-no-cover-photo-container"},t.cover_photo_key?i:l.a.createElement("p",null,n)),l.a.createElement("div",{className:"longevent-text-container"},l.a.createElement("h4",{className:"longevent-title-container"},t.title?t.title:t.pursuit_category),t.subtitle?l.a.createElement("p",{className:"longevent-subtitle-container"},t.subtitle):l.a.createElement(l.a.Fragment,null),a?l.a.createElement("p",null,a.month,", ",a.day,", ",a.year," "):l.a.createElement(l.a.Fragment,null),l.a.createElement("p",null,e.commentCount," Comments")))}),Be=function(e){var t=e.post;return l.a.createElement("div",null,l.a.createElement("div",{className:"event-cover-container"},t.cover_photo_key?l.a.createElement("img",{alt:"event cover photo",className:"event-cover-photo",src:Object(K.returnUserImageURL)(t.cover_photo_key)}):l.a.createElement("p",{className:"no-select"})),l.a.createElement("h4",{className:"event-title-container"},t.title?t.title:t.pursuit_category),t.overview?l.a.createElement("h6",{className:"event-overview-container"},t.overview):l.a.createElement(l.a.Fragment,null))},Ve=(a(637),function(e){switch(e){case 0:return"event-first-container";case 1:case 2:return"event-middle-container";case 3:return"event-last-container";default:throw new Error("Element Index in Timeline Event is incorrect: ",e)}}),We=function(e){var t=e.eventData,a=null,n=function(a){return e.newProjectView?l.a.createElement("input",{type:"checkbox",defaultChecked:e.isSelected,onClick:function(a){return e.onProjectEventSelect(t,a.target.value)}}):l.a.createElement(l.a.Fragment,null)};if(e.mediaType===de){switch(t.post_format){case pe:a=l.a.createElement(Le,{post:t,commentCount:t.comment_count});break;case ge:a=l.a.createElement(Ue,{post:t,commentCount:t.comment_count});break;default:throw Error("No matching post type: "+t.post_format)}return e.isRecentEvents?l.a.createElement("div",{className:"event-middle-container"},l.a.createElement("div",{onClick:function(){e.disableModalPreview?console.log("Selected, but disabled"):e.onEventClick(t,e.index)}},a),n()):l.a.createElement("div",{className:null!==e.index?Ve(e.index):"event-middle-container"},l.a.createElement("div",{onClick:e.disableModalPreview?function(){return console.log("Selected")}:function(){return e.onEventClick(t,e.index)}},a),n())}if("PROJECT"===e.mediaType)return a=l.a.createElement(Be,{post:t}),l.a.createElement("div",{className:null!==e.index?Ve(e.index):"event-middle-container"},l.a.createElement("div",{onClick:e.disableModalPreview?function(){return console.log("Selected")}:function(){return e.onProjectClick(t)}},a),n());throw new Error("No props.mediaType matched")},He=(a(638),void 0),Ge=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={username:n.props.firebase.returnUsername(),firstName:null,lastName:null,pursuits:null,pursuitNames:null,croppedDisplayPhoto:null,smallCroppedDisplayPhoto:null,indexUserDataId:null,fullUserDataId:null,preferredPostType:null,allPostsIdArray:[],hasMore:!0,fixedDataLoadLength:4,nextOpenPostIndex:0,feedData:[],isModalShowing:!1,selectedEvent:null,textData:"",recentPosts:null},n.modalRef=l.a.createRef(),n.handlePursuitClick=n.handlePursuitClick.bind(Object(h.a)(n)),n.handleRecentWorkClick=n.handleRecentWorkClick.bind(Object(h.a)(n)),n.handleEventClick=n.handleEventClick.bind(Object(h.a)(n)),n.openModal=n.openModal.bind(Object(h.a)(n)),n.createPursuits=n.createPursuits.bind(Object(h.a)(n)),n.passDataToModal=n.passDataToModal.bind(Object(h.a)(n)),n.closeModal=n.closeModal.bind(Object(h.a)(n)),n.handleDeletePost=n.handleDeletePost.bind(Object(h.a)(n)),n.fetchNextPosts=n.fetchNextPosts.bind(Object(h.a)(n)),n.createFeed=n.createFeed.bind(Object(h.a)(n)),n.renderModal=n.renderModal.bind(Object(h.a)(n)),n.renderRecentPosts=n.renderRecentPosts.bind(Object(h.a)(n)),n.injectComment=n.injectComment.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,this._isMounted&&this.state.username){var t=this.props.firebase.returnName(),a=t?t.firstName:null,n=t.lastName?t.lastName:null,l=null,i=null,r="",o="",s=null,u=null,c=null,d=[],m=null,h=0,p=[];return X.returnIndexUser(this.state.username).then(function(t){var a=t.data,n=t.data.following_feed.slice(e.state.nextOpenPostIndex,e.state.nextOpenPostIndex+e.state.fixedDataLoadLength);if(l=a.following_feed,i=a.preferred_post_type,r=a.cropped_display_photo_key,o=a.small_cropped_display_photo_key,s=a._id,u=a.user_profile_id,c=t.data.pursuits,console.log(l),m=!(!l||0===l.length),t.data.pursuits){var g=e.createPursuits(t.data.pursuits);d=g.pursuitNames,p=g.pursuitInfoArray,h=g.totalMin}return!1===m?t.data.recent_posts.length>0?X.returnMultiplePosts(t.data.recent_posts,!1).then(function(e){return{isRecentPostsOnly:!0,recentPosts:e.data.posts}}):{isRecentPostsOnly:!0,recentPosts:[]}:Promise.all([X.returnMultiplePosts(t.data.recent_posts,!1),X.returnMultiplePosts(n,!0)]).then(function(e){return{isRecentPostsOnly:!1,recentPosts:e[0].data.posts,feedData:e[1].data.posts}})}).then(function(t){var g=t.recentPosts.length>0?t.recentPosts:[],v=t.isRecentPostsOnly?[]:t.feedData,b=e.state.nextOpenPostIndex+e.state.fixedDataLoadLength;e.setState({firstName:a,lastName:n,allPostsIdArray:l,preferredPostType:i,indexUserDataId:s,fullUserDataId:u,croppedDisplayPhoto:r,smallCroppedDisplayPhoto:o,pursuits:c,pursuitNames:d,pursuitInfoArray:p,totalMin:h,recentPosts:g,feedData:v,nextOpenPostIndex:b,hasMore:m})}).catch(function(e){console.log(e),alert("Could Not Load Feed."+e)})}}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"renderRecentPosts",value:function(e){var t,a=0,n=[],i=Object(N.a)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;n.push(l.a.createElement(We,{isRecentEvents:!0,index:a,mediaType:de,key:a,eventData:r,onEventClick:this.handleEventClick})),a++}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"injectComment",value:function(e,t,a){if("RECENT_POSTS"===a){var n=this.state.recentPosts;n[e].comments=t,this.setState({recentPosts:n})}else if("FRIEND_POSTS"===a){var l=this.state.feedData;l[e].comments=t,this.setState({feedData:l})}}},{key:"createFeed",value:function(e){if(e&&0!==e.length){var t,a=[],n=this.state.nextOpenPostIndex,i=0,r=Object(N.a)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,s=o.username===this.state.username?this.state.preferredPostType:null,u=o.post_format===pe?o.text_data:JSON.parse(o.text_data),c=o.username===this.state.username?this.handleDeletePost:null;a.push(l.a.createElement(Fe,{key:n++,postIndex:i++,postId:o._id,visitorUsername:this.state.username,isOwnProfile:o.username===this.state.username,displayPhoto:o.display_photo_key,preferredPostType:s,closeModal:null,pursuitNames:this.state.pursuitNames,username:o.username,eventData:o,textData:u,onDeletePost:c,passDataToModal:this.passDataToModal,largeViewMode:!1}))}}catch(d){r.e(d)}finally{r.f()}return a}}},{key:"fetchNextPosts",value:function(){var e=this,t=this.state.nextOpenPostIndex+this.state.fixedDataLoadLength,a=this.state.allPostsIdArray.slice(this.state.nextOpenPostIndex,t),n=!0;return t>=this.state.allPostsIdArray.length&&(n=!1),X.returnMultiplePosts(a,!1).then(function(a){a.data?e.setState(function(e){return{feedData:e.feedData.concat(a.data.posts),nextOpenPostIndex:t,hasMore:n}}):e.setState({hasMore:!1})}).catch(function(e){console.log(e),alert(e)})}},{key:"handleDeletePost",value:function(){return X.deletePost(this.state.fullUserDataId,this.state.indexUserDataId,this.state.selectedEvent._id).then(function(e){console.log(e),alert(e)})}},{key:"passDataToModal",value:function(e,t,a){var n=t===pe?e.text_data:JSON.parse(e.text_data);this.setState({selectedEvent:e,textData:n,selectedPostFeedType:"FRIEND_POSTS",selectedPostIndex:a},this.openModal())}},{key:"openModal",value:function(){this.modalRef.current.style.display="block",document.body.style.overflow="hidden",this.setState({isModalShowing:!0})}},{key:"closeModal",value:function(){this.modalRef.current.style.display="none",document.body.style.overflow="visible",this.setState({isModalShowing:!1,selectedEvent:null})}},{key:"handlePursuitClick",value:function(e){e.preventDefault(),this.props.history.push(this.state.username)}},{key:"handleRecentWorkClick",value:function(e,t){e.preventDefault(),alert(t)}},{key:"handleEventClick",value:function(e,t){var a=this;return X.retrievePost(e._id,!0).then(function(n){a._isMounted&&a.setState({selectedEvent:e,selectedPostIndex:t,selectedPostFeedType:"RECENT_POSTS",textData:n.data},a.openModal())}).catch(function(e){return console.log(e)})}},{key:"createPursuits",value:function(e){var t,a=[],n=[],i=0,r=Object(N.a)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.push(o.name),i+=o.total_min,a.push(l.a.createElement("tr",{key:o.name},l.a.createElement("th",{key:o.name+" name"},o.name),l.a.createElement("td",{key:o.name+" experience"},o.experience_level),l.a.createElement("td",{key:o.total_min+"minutes"},o.total_min),l.a.createElement("td",{key:o.num_posts+"posts"},o.num_posts),l.a.createElement("td",{key:o.num_milestones+" milestones"},o.num_milestones)))}}catch(s){r.e(s)}finally{r.f()}return{pursuitNames:n,pursuitInfoArray:a,totalMin:i}}},{key:"renderModal",value:function(){return l.a.createElement(Fe,{largeViewMode:!0,visitorUsername:this.state.username,key:this.state.selectedEvent._id,postIndex:this.state.selectedPostIndex,isOwnProfile:!0,isPostOnlyView:!1,displayPhoto:this.state.smallCroppedDisplayPhoto,preferredPostType:this.state.preferredPostType,closeModal:this.closeModal,pursuitNames:this.state.pursuitNames,username:this.state.selectedEvent.username,eventData:this.state.selectedEvent,selectedPostFeedType:this.state.selectedPostFeedType,textData:this.state.textData,onDeletePost:this.handleDeletePost,handleCommentInjection:this.injectComment})}},{key:"render",value:function(){var e=this,t=this.state.feedData.length>0?this.createFeed(this.state.feedData):null,a=this.state.croppedDisplayPhoto?Object(K.returnUserImageURL)(this.state.croppedDisplayPhoto):K.TEMP_PROFILE_PHOTO_URL,n=this.state.recentPosts?this.renderRecentPosts(this.state.recentPosts):null,i=this.state.isModalShowing&&this.state.selectedEvent?this.renderModal():null;return l.a.createElement("div",null,l.a.createElement("div",{id:"returninguser-profile-container",className:"returninguser-main-row"},l.a.createElement("div",{className:"returninguser-profile-column"},l.a.createElement("img",{alt:"",id:"returninguser-profile-photo",src:a}),l.a.createElement("div",{className:"returninguser-profile-text-container"},l.a.createElement("p",null,this.state.username),l.a.createElement("p",null,this.state.firstName))),l.a.createElement("div",{className:"returninguser-profile-column"},l.a.createElement("div",{className:"returninguser-profile-text-container"},"Total Hours Spent: ",Math.floor(this.state.totalMin/60)),l.a.createElement("div",{className:"returninguser-profile-text-container"})),l.a.createElement("div",{className:"returninguser-profile-column"},l.a.createElement("table",{id:"returninguser-pursuit-info-table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",null,"Level"),l.a.createElement("th",null,"Minutes Spent"),l.a.createElement("th",null,"Posts"),l.a.createElement("th",null,"Milestones")),this.state.pursuitInfoArray)))),l.a.createElement("div",{id:"returninguser-recent-work-container",className:"returninguser-main-row"},l.a.createElement("div",{className:"returninguser-row"},l.a.createElement(o.b,{id:"returninguser-recent-work-title",className:"returninguser-title",to:"/"+this.state.username},"Your Recent Work")),l.a.createElement("div",{id:"returninguser-recent-posts-container",className:"returninguser-row"},n)),l.a.createElement("div",{id:"returninguser-feed-container",className:"returninguser-main-row"},l.a.createElement("h4",{className:"returninguser-title"},"Your Feed"),l.a.createElement("div",{id:"returninguser-infinite-scroll-container"},l.a.createElement(ee.a,{dataLength:this.state.nextOpenPostIndex,next:this.fetchNextPosts,hasMore:this.state.hasMore,loader:l.a.createElement("h4",null,"Loading..."),endMessage:l.a.createElement("p",{style:{textAlign:"center"}},l.a.createElement("b",null,"Yay! You have seen it all"))},t?t.map(function(e){return l.a.createElement("div",{className:"returninguser-feed-object-container"},e)}):null))),l.a.createElement("div",{className:"modal",ref:this.modalRef},l.a.createElement("div",{className:"overlay",onClick:function(){return e.closeModal()}}),l.a.createElement("span",{className:"close",onClick:function(){return e.closeModal()}},"X"),i))}}]),a}(l.a.Component),Je=function(){He.props.firebase.checkIsExistingUser()},ze=ie(function(e){return!!e&&E(Je)})(E(Ge)),qe=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={isNewUser:null},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.props.firebase.checkIsExistingUser().then(function(t){e._isMounted&&(t?e.setState({isNewUser:!1}):e.setState({isNewUser:!0}))})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return null===this.state.isNewUser?l.a.createElement("div",null,"Grabbing User Info"):this.state.isNewUser?l.a.createElement($,null):l.a.createElement(ze,null)}}]),a}(l.a.Component),Ke=ie(function(e){return!!e})(E(qe)),Ye=Object(le.a)(s.f,E)(A),Xe=Object(le.a)(s.f,E)(Ke),Qe=E(function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ae.Consumer,null,function(e){return e&&e.emailVerified?l.a.createElement(Xe,null):l.a.createElement(Ye,{emailVerifiedStatus:!1})}))}),Ze=(a(639),{passwordOne:"",passwordTwo:"",error:null}),$e=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state=Object(c.a)({},Ze),n.handlePasswordUpdateSubmit=n.handlePasswordUpdateSubmit.bind(Object(h.a)(n)),n.handleTextUpdate=n.handleTextUpdate.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"handlePasswordUpdateSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.passwordOne;this.props.firebase.doPasswordUpdate(a).then(function(){t.setState(Object(c.a)({},Ze))}).catch(function(e){t.setState({error:e})})}},{key:"handleTextUpdate",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state,t=e.passwordOne,a=e.passwordTwo,n=e.error,i=t!==a||""===t;return l.a.createElement("form",{onSubmit:this.handlePasswordUpdateSubmit},l.a.createElement("input",{name:"passwordOne",value:t,onChange:this.handleTextUpdate,type:"password",placeholder:"New Password"}),l.a.createElement("input",{name:"passwordTwo",value:a,onChange:this.handleTextUpdate,type:"password",placeholder:"Confirm New Password"}),l.a.createElement("button",{id:"passwordchange-reset-button",disabled:i,type:"submit"},"Reset My Password"),n&&l.a.createElement("p",null,n.message))}}]),a}(n.Component),et=E($e),tt=(a(640),ie(function(e){return!!e})(E(function(e){var t=Object(n.useState)(null),a=Object(j.a)(t,2),i=a[0],r=a[1],o=Object(n.useState)(null),s=Object(j.a)(o,2),u=s[0],c=s[1],d=Object(n.useState)(""),m=Object(j.a)(d,2),h=m[0],p=m[1],g=Object(n.useState)(1),v=Object(j.a)(g,2),b=v[0],f=v[1],E=Object(n.useState)(0),y=Object(j.a)(E,2),P=y[0],S=y[1],C=Object(n.useState)(null),w=Object(j.a)(C,2),k=w[0],O=w[1],T=Object(n.useState)(null),D=Object(j.a)(T,2),I=D[0],R=D[1],x=l.a.createRef(),_=l.a.createRef();Object(n.useEffect)(function(){X.returnAccountSettingsInfo(e.firebase.returnUsername()).then(function(e){p(e.data.bio),R(e.data.private)})},[e.firebase]);var M=function(e){r(e)},A=function(e){""===e.current.style.display?e.current.style.display="flex":e.current.style.display=""},N=function(t){var a=e.firebase.returnUsername();window.confirm("Are you sure you want to remove your photo?")&&X.deleteAccountPhoto(a,t).then(function(e){var t=new FormData;return t.append("username",a),t.append("imageKey",""),X.updatePostDisplayPhotos(t)}).then(function(){"DISPLAY"===t?window.alert("Your Display Photo has been removed. \n              You should see the changes take effect soon."):"COVER"===t&&window.alert("Your cover photo has been removed. You should\n               see the changes take effect immediately."),window.location.reload()}).catch(function(e){console.log(e),window.alert("Something went wrong while deleting your image.\n             Please wait and try again later")})},F=function(t,a){var n=e.firebase.returnUsername();return X.deleteAccountPhoto(n,a).then(function(e){return console.log(e),X.updateAccountImage(t,a)}).then(function(e){var t={username:n,imageKey:e.data.imageKey};return X.updatePostDisplayPhotos(t)}).then(function(e){console.log(e),alert("Successfully updated!"),window.location.reload()}).catch(function(e){console.log(e),alert("Something has gone wrong while updating :(")})},V=function(){return X.updateBio({bio:h,username:e.firebase.returnUsername()}).then(function(){alert("Successfully updated your bio!"),window.location.reload()}).catch(function(e){return console.log(e)})},W=function(t){var a=new FormData;if(a.append("username",e.firebase.returnUsername()),"DISPLAY"===t){var n=["normal","small","tiny"],l=k.getImage();B.a.canvasToFile(l).then(function(e){return Promise.all([Object(B.a)(e,{maxWidthOrHeight:250,maxSizeMB:1,fileType:"image/jpeg"}),Object(B.a)(e,{maxWidthOrHeight:125,maxSizeMB:1,fileType:"image/jpeg"}),Object(B.a)(e,{maxWidthOrHeight:62,maxSizeMB:1,fileType:"image/jpeg"})])}).then(function(e){for(var l=[],i=0;i<3;i++)l.push(new File([e[i]],n[i],{type:"image/jpeg"}));return a.append("croppedImage",e[0]),a.append("smallCroppedImage",e[1]),a.append("tinyCroppedImage",e[2]),F(a,t)})}else if("COVER"===t)return u.size>1e6?Object(B.a)(u,{maxSizeMB:1,fileType:"image/jpeg"}).then(function(e){a.append("coverPhoto",e),F(a,t)}):(a.append("coverPhoto",u),F(a,t))};return l.a.createElement(ae.Consumer,null,function(t){return l.a.createElement("div",{id:"account-container"},l.a.createElement("h1",null,"Account: ",t.email),l.a.createElement(et,null),l.a.createElement("select",{name:"pursuit-category",value:I?"PRIVATE":"PUBLIC",onChange:function(t){return function(t){var a="PRIVATE"===t;return R(a),X.setProfilePrivacy(e.firebase.returnUsername(),a).catch(function(e){console.log(e),alert("Unable to update Profile Privacy.")})}(t.target.value)}},l.a.createElement("option",{key:"private",value:"PRIVATE"},"Private"),l.a.createElement("option",{key:"public",value:"PUBLIC"},"Public")),l.a.createElement("button",{onClick:function(){return A(x)}},"Edit your Display Photo"),l.a.createElement("div",{ref:x,className:"account-photo-edit-container"},l.a.createElement("label",null,"Change your display photo!"),l.a.createElement("input",{type:"file",onChange:function(e){return r(e.target.files[0])}}),i?l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{onDrop:M,noClick:!0,noKeyboard:!0,style:{width:"200px",height:"200px"}},function(e){var t=e.getRootProps,a=e.getInputProps;return l.a.createElement("div",t(),l.a.createElement(L.a,{ref:function(e){return O(e)},image:i,width:170,height:170,borderRadius:200,border:50,color:[215,215,215,.8],scale:b,rotate:P}),l.a.createElement("input",a()))}),l.a.createElement("label",null,"Rotation"),l.a.createElement("input",{type:"range",id:"points",name:"points",min:"-20",max:"20",value:P,onChange:function(e){return S(parseFloat(e.target.value))}}),l.a.createElement("label",null,"Scale"),l.a.createElement("input",{type:"range",id:"points",name:"points",step:"0.1",min:"1",max:"10",value:b,onChange:function(e){return f(parseFloat(e.target.value))}})):l.a.createElement("div",null),l.a.createElement("button",{onClick:function(){return W("DISPLAY")}},"Submit your display photo!"),l.a.createElement("button",{onClick:function(){return N("DISPLAY")}},"Remove display Photo?")),l.a.createElement("button",{onClick:function(){return A(_)}},"Edit your Cover Photo"),l.a.createElement("div",{ref:_,className:"account-photo-edit-container"},l.a.createElement("label",null,"Change your cover photo!"),l.a.createElement("input",{type:"file",onChange:function(e){c(e.target.files[0])}}),l.a.createElement("button",{onClick:function(){return W("COVER")}},"Submit your cover photo!"),l.a.createElement("button",{onClick:function(){return N("COVER")}},"Remove your cover photo")),l.a.createElement("label",null,"Edit your bio"),l.a.createElement("textarea",{type:"text",onChange:function(e){return p(e.target.value)},value:h,maxLength:500}),l.a.createElement("button",{onClick:V},"Submit Bio"))})}))),at=(a(641),function(e){return l.a.createElement("div",{id:"newpost-window"},l.a.createElement("div",{className:"newpost-button-container"},l.a.createElement("h3",null,"Document Your Progress"),l.a.createElement("h4",null,"Begin a New Check-In!"),l.a.createElement("button",{value:pe,onClick:function(t){return e.onPostTypeSet(t.target.value,null)}},"New Short"),l.a.createElement("h4",null," Begin a New Post! (Will Delete Saved data)"),l.a.createElement("button",{value:"NEW_LONG",onClick:function(t){return function(t){e.onlineDraft?window.confirm("Starting a new Long Post will\n                            erase your saved draft. Continue anyway?")&&e.onPostTypeSet(t.target.value,null):e.onPostTypeSet(t.target.value,null)}(t)}},"New Entry"),l.a.createElement("button",{value:"OLD_LONG",onClick:function(t){return e.onPostTypeSet(t.target.value,null)}},"Continue Previous Draft?")))}),nt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={annotation:{}},n.onChange=n.onChange.bind(Object(h.a)(n)),n.onSubmit=n.onSubmit.bind(Object(h.a)(n)),n.renderEditor=n.renderEditor.bind(Object(h.a)(n)),n.activeAnnotationComparator=n.activeAnnotationComparator.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"onChange",value:function(e){this.setState({annotation:e})}},{key:"onSubmit",value:function(e){this.setState({annotation:{}},this.props.onAnnotationSubmit(e))}},{key:"renderEditor",value:function(e){var t=e.annotation.geometry;return t?(console.log(t),l.a.createElement("div",{style:{background:"white",borderRadius:3,position:"absolute",zIndex:9999,left:"".concat(t.x,"%"),top:"".concat(t.y+t.height,"%")}},l.a.createElement("div",null,"Custom Editor"),l.a.createElement(oe.a,{onChange:function(t){return e.onChange(Object(c.a)(Object(c.a)({},e.annotation),{},{data:Object(c.a)(Object(c.a)({},e.annotation.data),{},{text:t.target.value})}))}}),l.a.createElement("button",{onClick:e.onSubmit},"Comment"))):null}},{key:"activeAnnotationComparator",value:function(e,t){return e.data.id===t}},{key:"render",value:function(){return l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(Ie.a,{src:this.props.imageSource,alt:"Two pebbles anthropomorphized holding hands",annotations:this.props.annotations,activeAnnotationComparator:this.activeAnnotationComparator,activeAnnotations:this.props.activeAnnotations,type:this.state.type,value:this.state.annotation,onChange:this.onChange,onSubmit:this.onSubmit,renderEditor:this.renderEditor}))}}]),a}(l.a.Component),lt={className:"slider-settings",speed:500,slidesToShow:1,slidesToScroll:1,centerPadding:0,nextArrow:l.a.createElement(Se,{direction:"right"}),prevArrow:l.a.createElement(Se,{direction:"left"})},it=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={imageArray:null,displayedItemCount:0},n.renderImageContainers=n.renderImageContainers.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._isMounted&&this.setState({imageArray:this.props.imageArray})}},{key:"componentDidUpdate",value:function(e){this.props.imageArray!==e.imageArray&&this.setState({imageArray:this.props.imageArray})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"renderImageContainers",value:function(e){var t=this,a=0;return e?(console.log(this.state.imageArray),this.state.imageArray.map(function(e){return l.a.createElement("div",{className:"imageslider-image-container",key:a++},t.props.disableAnnotations?l.a.createElement("img",{alt:"",key:a++,src:e}):l.a.createElement(nt,{imageSource:e,annotations:t.props.annotations,activeAnnotations:t.props.activeAnnotations,onAnnotationSubmit:t.props.onAnnotationSubmit}))})):l.a.createElement("p",null,"IMAGE IS STILL LOADING")}},{key:"render",value:function(){var e=this;return l.a.createElement(we.a,Object.assign({afterChange:function(t){return e.props.onIndexChange(t)}},lt),this.renderImageContainers(!!this.state.imageArray))}}]),a}(l.a.Component),rt=l.a.memo(it),ot=(a(642),function(e){return l.a.createElement("div",{className:"imagedrop-container",onDragOver:e.dragOver,onDragEnter:e.dragEnter,onDragLeave:e.dragLeave,onDrop:e.fileDrop,onClick:e.fileInputClicked},l.a.createElement("div",{id:"imagedrop-message"},l.a.createElement("div",{id:"imagedrop-upload-icon"}),"Drag and Drop files here or click to select file(s)"),l.a.createElement("input",{ref:e.reference,type:"file",multiple:!0,onChange:e.filesSelected}))}),st=a(84),ut=(a(643),l.a.memo(function(e){var t=Object(st.b)(function(e){var t=e.data,a=e.fileType,n=e.fileSize,i=e.errorMessage,r=e.removeFile,o=t.invalid?"sortableitem-error":"";return l.a.createElement("div",{className:"sortableitem-status-bar"},l.a.createElement("div",null,l.a.createElement("div",{className:"sortableitem-type-logo"}),l.a.createElement("div",{className:"sortableitem-type"},a(t.name)),l.a.createElement("span",{className:"sortableitem-name ".concat(o)},t.name),l.a.createElement("span",{className:"sortableitem-size"},"(",n(t.size),")"),t.invalid&&l.a.createElement("span",{className:"sortableitem-error-message"},"(",i,")")),l.a.createElement("button",{onClick:function(){return r(t.name)}},"X"))}),a=Object(st.a)(function(e){var a=e.items,n=e.onSortEnd,i=e.fileType,r=e.fileSize,o=e.errorMessage,s=e.removeFile;return l.a.createElement("ul",null,a.map(function(e,a){return l.a.createElement(t,{key:"item-".concat(a),index:a,data:e,onSortEnd:n,fileType:i,fileSize:r,errorMessage:o,removeFile:s})}))});return l.a.createElement(a,{items:e.validFiles,onSortEnd:e.onSortEnd,fileType:e.fileType,fileSize:e.fileSize,errorMessage:e.errorMessage,removeFile:e.removeFile})})),ct=(a(644),function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window}()),dt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).preventDefault=function(e){e.preventDefault()},n.dragOver=function(e){n.preventDefault(e)},n.dragEnter=function(e){n.preventDefault(e)},n.dragLeave=function(e){n.preventDefault(e)},n.fileDrop=function(e){n.preventDefault(e);var t=e.dataTransfer.files;t.length&&n.handleFiles(t)},n.filesSelected=function(){n.fileInputRef.current.files.length&&n.handleFiles(n.fileInputRef.current.files)},n.fileInputClicked=function(){n.fileInputRef.current.click()},n.handleFiles=function(e){for(var t=!1,a=0;a<e.length;a++)n.validateFile(e[a])?n.props.onSelectedFileChange(e[a]):(t=!0,e[a].invalid=!0,n.props.onSelectedFileChange(e[a]),n.setErrorMessage("File type not permitted"),n.props.onUnsupportedFileChange(e[a]));n.updateDisabilityState(t)},n.fileSize=function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},n.fileType=function(e){return e.substring(e.lastIndexOf(".")+1,e.length)||e},n.removeFile=function(e){console.log(e),console.log("asdfadf");var t=n.props.validFiles.findIndex(function(t){return t.name===e}),a=n.props.selectedFiles.findIndex(function(t){return t.name===e}),l=n.props.unsupportedFiles.findIndex(function(t){return t.name===e}),i=n.props.validFiles,r=n.props.selectedFiles,o=n.props.unsupportedFiles;i.splice(t,1),r.splice(a,1),n.props.setValidFiles(i),n.props.setSelectedFiles(r),-1!==l&&(o.splice(l,1),n.props.setUnsupportedFiles(o)),i.length>0&&0===o.length?n.updateDisabilityState(!1):n.updateDisabilityState(!0)},n.updateDisabilityState=function(e){e&&0===n.props.textPageText.length?n.props.onDisablePost(!0):n.props.onDisablePost(!1)},n.openImageModal=function(e){var t=Object(h.a)(n),a=new FileReader;n.modalRef.current.style.display="block",a.readAsDataURL(e),a.onload=function(e){t.modalImageRef.current.style.backgroundImage="url(".concat(e.target.result,")")}},n.closeModal=function(){n.modalRef.current.style.display="none",n.modalImageRef.current.style.backgroundImage="none"},n.fileInputRef=l.a.createRef(),n.state={errorMessage:""},n.setErrorMessage=n.setErrorMessage.bind(Object(h.a)(n)),n.validateFile=n.validateFile.bind(Object(h.a)(n)),n.renderTextContainer=n.renderTextContainer.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"setErrorMessage",value:function(e){this.setState({value:e})}},{key:"validateFile",value:function(e){return-1!==["image/jpeg","image/jpg","image/png","image/gif","image/x-icon"].indexOf(e.type)}},{key:"renderTextContainer",value:function(){return console.log(this.props.imageIndex),l.a.createElement(Pe,{validFilesLength:this.props.validFiles.length,isPaginated:this.props.isPaginated,onPaginatedChange:this.props.onPaginatedChange,onTextChange:this.props.onTextChange,textPageText:this.props.textPageText,imageIndex:this.props.imageIndex})}},{key:"render",value:function(){return ct||console.log("Sorry, this is not a modern browser! Try another browser."),0===this.props.validFiles.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"shorteditor-text-container"},this.renderTextContainer()),this.props.unsupportedFiles.length?l.a.createElement("p",null,"Please remove all unsupported files."):"",l.a.createElement(ot,{reference:this.fileInputRef,dragOver:this.dragOver,dragEnter:this.dragEnter,dragLeave:this.dragLeave,fileDrop:this.fileDrop,fileInputClicked:this.fileInputClicked,filesSelected:this.filesSelected})):(console.log("short-editor"),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"shorteditor-main-container"},l.a.createElement("div",{id:"shorteditor-hero-container"},this.props.unsupportedFiles.length?l.a.createElement("p",null,"Please remove all unsupported files."):"",l.a.createElement("div",{id:"shorteditor-image-slider-container"},l.a.createElement(rt,{disableAnnotations:!0,onIndexChange:this.props.onIndexChange,imageArray:this.props.imageArray}))),l.a.createElement("div",{id:"shorteditor-side-container"},this.renderTextContainer())),l.a.createElement("div",{id:"shorteditor-file-manager-container"},l.a.createElement(ot,{reference:this.fileInputRef,dragOver:this.dragOver,dragEnter:this.dragEnter,dragLeave:this.dragLeave,fileDrop:this.fileDrop,fileInputClicked:this.fileInputClicked,filesSelected:this.filesSelected}),l.a.createElement(ut,{onSortEnd:this.props.onSortEnd,validFiles:this.props.validFiles,openImageModal:this.openImageModal,removeFile:this.removeFile,fileType:this.fileType,fileSize:this.fileSize,errorMessage:this.state.errorMessage}))))}}]),a}(l.a.Component),mt=E(dt),ht=(a(645),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={selectedFiles:[],validFiles:[],unsupportedFiles:[],imageArray:[],imageIndex:0,textData:"",isPaginated:!1,postDisabled:!0,window:ce,previewTitle:null},n.handleIndexChange=n.handleIndexChange.bind(Object(h.a)(n)),n.setSelectedFiles=n.setSelectedFiles.bind(Object(h.a)(n)),n.setValidFiles=n.setValidFiles.bind(Object(h.a)(n)),n.setUnsupportedFiles=n.setUnsupportedFiles.bind(Object(h.a)(n)),n.setImageArray=n.setImageArray.bind(Object(h.a)(n)),n.handleTextChange=n.handleTextChange.bind(Object(h.a)(n)),n.handleUnsupportedFileChange=n.handleUnsupportedFileChange.bind(Object(h.a)(n)),n.handleSelectedFileChange=n.handleSelectedFileChange.bind(Object(h.a)(n)),n.handleDisablePost=n.handleDisablePost.bind(Object(h.a)(n)),n.handleClick=n.handleClick.bind(Object(h.a)(n)),n.generateValidFiles=n.generateValidFiles.bind(Object(h.a)(n)),n.handlePaginatedChange=n.handlePaginatedChange.bind(Object(h.a)(n)),n.handleSortEnd=n.handleSortEnd.bind(Object(h.a)(n)),n.loadImage=n.loadImage.bind(Object(h.a)(n)),n.transformImageProp=n.transformImageProp.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"transformImageProp",value:function(e){var t=this,a=e;Promise.all(a.map(function(e){return t.loadImage(e)})).then(function(a){t.setState({imageArray:a,displayedItemCount:a.length,validFiles:e})})}},{key:"loadImage",value:function(e){return new Promise(function(t,a){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(){a(n.error)},n.readAsDataURL(e)})}},{key:"handleIndexChange",value:function(e){this.setState({imageIndex:e})}},{key:"handlePaginatedChange",value:function(){if(!1===this.state.isPaginated){var e=[],t=this.state.validFiles.length;e.push(this.state.textData);for(var a=1;a<t;a++)e.push([]);this.setState({textData:e,isPaginated:!0})}else if(window.confirm("Switching back will remove all your captions except \n                          for the first one. Keep going?")){var n=this.state.textData[0];this.setState({textData:n,isPaginated:!1})}}},{key:"setImageArray",value:function(e){this.setState({imageArray:e})}},{key:"setSelectedFiles",value:function(e){this.setState({selectedFiles:e},this.generateValidFiles)}},{key:"setValidFiles",value:function(e){this.transformImageProp(e)}},{key:"setUnsupportedFiles",value:function(e){this.setState({unsupportedFiles:e})}},{key:"handleTextChange",value:function(e){var t=e.target.value;if("TITLE"===e.target.name)this.setState({previewTitle:t});else{var a,n=0===this.state.validFiles.length||this.state.unsupportedFiles.length>0;if(this.state.isPaginated){var l=this.state.textData;l[this.state.imageIndex]=t,a=l}else a=t;this.setState({textData:a,postDisabled:0===t.length&&n})}}},{key:"handleUnsupportedFileChange",value:function(e){this.setState(function(t){return{unsupportedFiles:t.unsupportedFiles.concat(e)}})}},{key:"handleSelectedFileChange",value:function(e){this.setState(function(t){return{selectedFiles:t.selectedFiles.concat(e)}},this.generateValidFiles)}},{key:"handleDisablePost",value:function(e){this.setState({postDisabled:e})}},{key:"handleClick",value:function(e){this.setState({window:e})}},{key:"generateValidFiles",value:function(){var e=this.state.selectedFiles.reduce(function(e,t){return e.find(function(e){return e.name===t.name})?e:e.concat([t])},[]);this.setValidFiles(e)}},{key:"handleSortEnd",value:function(e){var t=e.oldIndex,a=e.newIndex,n=Array.from(this.state.validFiles),l=n.splice(t,1),i=Object(j.a)(l,1)[0];n.splice(a,0,i),this.transformImageProp(n)}},{key:"render",value:function(){var e=this;return this.state.window===ce?l.a.createElement("div",{id:"shortpost-window"},l.a.createElement("div",{className:"shortpost-button-container"},l.a.createElement("h2",null,"Placeholder for short"),l.a.createElement("div",null,l.a.createElement("span",null,l.a.createElement("button",{value:he,onClick:function(t){return e.props.onPostTypeSet(t.target.value,!1)}},"Return")),l.a.createElement("span",null,l.a.createElement("button",{value:"REVIEW_STATE",disabled:this.state.postDisabled,onClick:function(t){return e.handleClick(t.target.value)}},"Review Post")))),l.a.createElement(mt,{username:this.props.username,selectedFiles:this.state.selectedFiles,validFiles:this.state.validFiles,imageArray:this.state.imageArray,unsupportedFiles:this.state.unsupportedFiles,isPaginated:this.state.isPaginated,textPageText:this.state.textData,imageIndex:this.state.imageIndex,onSortEnd:this.handleSortEnd,setImageArray:this.setImageArray,onPaginatedChange:this.handlePaginatedChange,onIndexChange:this.handleIndexChange,onTextChange:this.handleTextChange,onSelectedFileChange:this.handleSelectedFileChange,onUnsupportedFileChange:this.handleUnsupportedFileChange,onDisablePost:this.handleDisablePost,setValidFiles:this.setValidFiles,setSelectedFiles:this.setSelectedFiles,setUnsupportedFiles:this.setUnsupportedFiles})):l.a.createElement(De,{previousState:ce,displayPhoto:this.props.displayPhoto,isPaginated:this.state.isPaginated,previewTitle:this.state.previewTitle,closeModal:this.props.closeModal,postType:pe,setPostStage:this.handleClick,imageArray:this.state.validFiles,textData:this.state.textData,username:this.props.username,preferredPostType:this.props.preferredPostType,pursuitNames:this.props.pursuitNames,handlePreferredPostTypeChange:this.props.handlePreferredPostTypeChange})}}]),a}(l.a.Component)),pt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={username:n.props.username,isInitial:!0,needOnlineSync:!1,lastBlockText:""},n.handleSave=n.handleSave.bind(Object(h.a)(n)),n.handleSaveSuccess=n.handleSaveSuccess.bind(Object(h.a)(n)),n.handleSaveError=n.handleSaveError.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"handleSave",value:function(e,t){var a=this;this.props.isSavePending?(console.log("Saving"),this.props.onSavePending(!0),X.saveDraft(this.props.username,t).then(function(e){return a.handleSaveSuccess(e)}).catch(function(e){return a.handleSaveError(e)})):console.log("Catch uneccessary save")}},{key:"handleSaveSuccess",value:function(e){console.log("Reached",e),this.props.onSavePending(!1)}},{key:"handleSaveError",value:function(e){console.log("Fail"),this.props.onSavePending(!1),alert("Draft Failed to Save. Please check your\n               connection or save your draft locally for now. : (")}},{key:"render",value:function(){var e=this;return l.a.createElement(_e.a,{onChange:function(t){var a=t.emitSerializedOutput();if(!1===e.props.hasContent){var n,l=Object(N.a)(a.blocks);try{for(l.s();!(n=l.n()).done;){if(""!==n.value.text){e.props.setHasContent(!0);break}}}catch(o){l.e(o)}finally{l.f()}}else if(e.state.isInitial)e.setState({isInitial:!1}),e.props.setLocalDraft(a);else{if(e.state.needOnlineSync)return e.props.onSavePending(!0),e.props.syncChanges(),void e.setState({needOnlineSync:!1});if(!Te.a.isEqual(a,e.props.localDraft)){var i=a.blocks[a.blocks.length-1].text,r=a.blocks[a.blocks.length-2].text;a.blocks.length>=2&&e.props.setLastTwoBlockIdentical(i===r),e.props.setLastBlockChanged(e.state.lastBlockText===i),e.props.setLastBlockText(i),e.props.onSavePending(!0),e.props.setLocalDraft(a)}}},content:this.props.onlineDraft,default_wrappers:[{className:"my-custom-h1",block:"header-one"},{className:"my-custom-h2",block:"header-two"},{className:"my-custom-h3",block:"header-three"}],widgets:[Object(Me.a)({options:{upload_url:K.IMAGE_BASE_URL,upload_callback:function(t,a){console.log(t),console.log(a),alert("file uploaded: "+t.data.url),e.setState({needOnlineSync:!0})},upload_error_callback:function(e,t){console.log(e)}}}),Object(Ae.a)()],data_storage:{save_handler:this.handleSave,interval:4e3,success_handler:this.handleSaveSuccess,failure_handler:this.handleSaveError}})}}]),a}(l.a.Component),gt=E(pt),vt=(a(646),function(e){var t=Object(n.useState)(ce),a=Object(j.a)(t,2),i=a[0],r=a[1],o=Object(n.useState)(null!==e.onlineDraft),s=Object(j.a)(o,2),u=s[0],c=s[1],d=Object(n.useState)(!1),m=Object(j.a)(d,2),h=m[0],p=m[1],g=Object(n.useState)(e.onlineDraft),v=Object(j.a)(g,2),b=v[0],f=v[1],E=Object(n.useState)(0),y=Object(j.a)(E,2),P=y[0],S=y[1],C=Object(n.useState)(!1),w=Object(j.a)(C,2),k=w[0],O=w[1],T=Object(n.useState)(""),D=Object(j.a)(T,2),I=D[0],R=D[1],x=Object(n.useState)(!1),_=Object(j.a)(x,2),M=_[0],A=_[1],N=Object(n.useRef)(null),F=Object(n.useRef)(null),L=Object(n.useRef)(null);Object(n.useEffect)(function(){if(N.current){var e=N.current.offsetHeight+F.current.offsetHeight;(N.current.offsetHeight&&N.current.offsetHeight!==P&&e>window.innerHeight&&M||N.current.offsetHeight!==P&&e>window.innerHeight&&k)&&L.current.scrollIntoView(),S(N.current.offsetHeight)}});var U=function(){e.onLocalOnlineSync(b).then(function(e){e?(console.log("SAVING SIDE WAY"),p(!1)):alert("Save unsucessful")})},B=function(t,a){if(a)window.confirm("Do you want to leave while changes are being saved?")?t===he?e.onPostTypeSet(t,null):r(t):U();else switch(t){case he:e.onPostTypeSet(t,b);break;case ce:r(t);break;case"REVIEW_STATE":r(t),e.onLocalSync(b);break;default:throw new Error("No Windows Matched")}};return i===ce?l.a.createElement("div",{className:"longpost-window"},l.a.createElement("div",{ref:F},l.a.createElement("h2",null,"Long Entry"),h?l.a.createElement("p",null,"Saving"):l.a.createElement("p",null,"Saved"),l.a.createElement("div",{className:"longpost-button-container"},l.a.createElement("span",null,l.a.createElement("button",{value:he,onClick:function(e){return B(e.target.value,h)}},"Return")),l.a.createElement("span",null,l.a.createElement("button",{value:"REVIEW_STATE",disabled:!u,onClick:function(e){return B(e.target.value,h)}},"Review Post")))),e.onlineDraftRetrieved&&!e.loading?l.a.createElement("div",{id:"longpost-container",ref:N},l.a.createElement(gt,{username:e.username,isSavePending:h,hasContent:u,setHasContent:c,onSavePending:function(e){p(e)},onlineDraft:e.onlineDraft,localDraft:b,syncChanges:U,setLocalDraft:f,lastTwoBlockIdentical:k,setLastTwoBlockIdentical:O,lastBlockChanged:M,setLastBlockChanged:A,lastBlockText:I,setLastBlockText:R}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{ref:L})):l.a.createElement("div",null,l.a.createElement("p",null," Loading.... "))):l.a.createElement(De,{previousState:ce,displayPhoto:e.displayPhoto,isPaginated:!1,textData:e.onlineDraft,closeModal:e.closeModal,postType:ge,setPostStage:B,username:e.username,preferredPostType:e.preferredPostType,pursuitNames:e.pursuitNames,handlePreferredPostTypeChange:e.handlePreferredPostTypeChange,previewTitle:null})}),bt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={onlineDraftRetrieved:!1,onlineDraft:null,displayPhoto:null,updatingOnlineDraft:!0,postType:he,pursuitNames:null,indexUserData:null,errorRetrievingDraft:!1,errorSaving:!1},n.handleDisablePost=n.handleDisablePost.bind(Object(h.a)(n)),n.handleSubmitPost=n.handleSubmitPost.bind(Object(h.a)(n)),n.handleLocalSync=n.handleLocalSync.bind(Object(h.a)(n)),n.handleLocalOnlineSync=n.handleLocalOnlineSync.bind(Object(h.a)(n)),n.handlePostTypeSet=n.handlePostTypeSet.bind(Object(h.a)(n)),n.handleDraftRetrieval=n.handleDraftRetrieval.bind(Object(h.a)(n)),n.handleIndexUserDataSet=n.handleIndexUserDataSet.bind(Object(h.a)(n)),n.onPreferredPostTypeChange=n.onPreferredPostTypeChange.bind(Object(h.a)(n)),n.renderWindow=n.renderWindow.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._isMounted&&this.props.username&&this.handleIndexUserDataSet()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"onPreferredPostTypeChange",value:function(e){this.setState({preferredPostType:e})}},{key:"handleInitialPageLaunch",value:function(e,t,a){e.preventDefault(),a&&this.setState({onlineDraft:null}),this.setState({postType:t})}},{key:"handleLocalSync",value:function(e){this.setState({onlineDraft:e})}},{key:"handleLocalOnlineSync",value:function(e){var t=this;if(e!==this.state.onlineDraft)return this.setState({updatingOnlineDraft:!0}),X.saveDraft(this.props.username,e).then(function(a){return 200!==a.status&&(console.log("Error"),t.setState({errorSaving:!0})),t.setState({onlineDraft:e,updatingOnlineDraft:!1}),!0}).catch(function(e){console.log(e),t.setState({updatingOnlineDraft:!1})})}},{key:"handleIndexUserDataSet",value:function(){var e=this;X.returnIndexUser(this.props.username).then(function(t){var a,n=[],l=Object(N.a)(t.data.pursuits);try{for(l.s();!(a=l.n()).done;){var i=a.value;n.push(i.name)}}catch(r){l.e(r)}finally{l.f()}e.setState({updatingOnlineDraft:!1,onlineDraftRetrieved:!0,pursuitNames:n,indexUserData:t.data,displayPhoto:t.data.small_cropped_display_photo_key,onlineDraft:JSON.parse(t.data.draft.text)})}).catch(function(t){console.log(t),e.setState({onlineDraftRetrieved:!0,updatingOnlineDraft:!1,errorRetrievingDraft:!0}),alert("Something went wrong retrieving your long post draft. \n              Please do not edit your old draft or you will your saved data. \n              Refresh your page or contact support for more help.")})}},{key:"handleDraftRetrieval",value:function(e){var t=this;this.setState({updatingOnlineDraft:!0}),X.retrieveNewPostInfo(this.props.username).then(function(a){200===a.status?(e&&t.setState({onlineDraftRetrieved:!0}),t.setState({displayPhoto:a.data.smallDisplayPhoto,onlineDraft:JSON.parse(a.data.draft),updatingOnlineDraft:!1})):(t.setState({onlineDraftRetrieved:!0,updatingOnlineDraft:!1,errorRetrievingDraft:!0}),alert("Something went wrong retrieving your long post draft. \n            Please do not edit your old draft or you will your saved data. \n            Refresh your page or contact support for more help."))}).catch(function(e){console.log(e)})}},{key:"handleSubmitPost",value:function(e){alert("PRESSED SUBMIT")}},{key:"handleDisablePost",value:function(e){this.setState({postDisabled:e})}},{key:"handlePostTypeSet",value:function(e,t){switch(e){case he:t?this.setState({postType:e,onlineDraft:t}):this.setState({postType:e});break;case pe:this.setState({postType:e});break;case"NEW_LONG":this.setState({postType:ge,onlineDraft:null});break;case"OLD_LONG":this.setState({postType:ge});break;default:throw Error("No postType options matched :(")}}},{key:"renderWindow",value:function(e){switch(e){case he:return l.a.createElement(at,{onlineDraft:this.state.onlineDraft,onPostTypeSet:this.handlePostTypeSet});case pe:return l.a.createElement(ht,{displayPhoto:this.state.displayPhoto,username:this.props.username,closeModal:this.props.closeModal,pursuitNames:this.state.pursuitNames,disablePost:this.handleDisablePost,setImageArray:this.setImageArray,onPostTypeSet:this.handlePostTypeSet,preferredPostType:this.state.indexUserData.preferredPostType,handlePreferredPostTypeChange:this.onPreferredPostTypeChange});case ge:return l.a.createElement(vt,{displayPhoto:this.state.displayPhoto,username:this.props.username,onlineDraft:this.state.onlineDraft,pursuitNames:this.state.pursuitNames,onlineDraftRetrieved:this.state.onlineDraftRetrieved,preferredPostType:this.state.indexUserData.preferredPostType,updatingOnlineDraft:this.state.updatingOnlineDraft,onLocalDraftChange:this.handleLocalDraftChange,onLocalOnlineSync:this.handleLocalOnlineSync,onLocalSync:this.handleLocalSync,onPostTypeSet:this.handlePostTypeSet,disablePost:this.handleDisablePost,handlePreferredPostTypeChange:this.onPreferredPostTypeChange,closeModal:this.props.closeModal});default:throw Error("No postType options matched :(")}}},{key:"render",value:function(){var e=this;return this.state.indexUserData?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"close",onClick:function(){return e.props.closeModal()}},"X"),this.renderWindow(this.state.postType)):l.a.createElement(l.a.Fragment,null,"updatingOnlineDraft...")}}]),a}(l.a.Component),ft=E(bt),Et=(a(647),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this))._isMounted=!1,e.state={userRelationId:null,following:[],followers:[],requested:[]},e.handleStatusChange=e.handleStatusChange.bind(Object(h.a)(e)),e.handleRenderRelation=e.handleRenderRelation.bind(Object(h.a)(e)),e.renderFollower=e.renderFollower.bind(Object(h.a)(e)),e.renderFollow=e.renderFollow.bind(Object(h.a)(e)),e.renderRequester=e.renderRequester.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,X.returnUserRelationInfo(this.props.username).then(function(t){if(e._isMounted){var a=e.handleRenderRelation(e.renderFollow,t.data.following),n=e.handleRenderRelation(e.renderFollower,t.data.followers),l=e.handleRenderRelation(e.renderRequester,t.data.requested);e.setState({userRelationId:t.data._id,following:a,followers:n,requested:l})}})}},{key:"handleStatusChange",value:function(e,t){var a=this;return X.changeRelationStatus(e,t,this.props.username,this.state.userRelation._id).then(function(){return X.returnUserRelationInfo(a.props.username)}).then(function(e){a._isMounted&&a.setState({userRelation:e.data})}).catch(function(e){return window.alert("Something went wrong :(")})}},{key:"renderFollower",value:function(e){var t,a=this,n=[],i=Object(N.a)(e);try{var r=function(){var e=t.value;n.push(l.a.createElement("div",{className:"relationmodal-profile-row"},l.a.createElement("div",{className:"relationmodal-profile-info-container",onClick:function(){return console.log("THING")}},l.a.createElement("img",{src:Object(K.returnUserImageURL)(e.display_photo)}),l.a.createElement("p",null,e.username)),l.a.createElement("button",{onClick:function(){return a.handleStatusChange("UNFOLLOW",e.username)}},"Following")))};for(i.s();!(t=i.n()).done;)r()}catch(o){i.e(o)}finally{i.f()}return n}},{key:"renderFollow",value:function(e){var t,a=this,n=[],i=Object(N.a)(e);try{var r=function(){var e=t.value;n.push(l.a.createElement("div",{className:"relationmodal-profile-row"},l.a.createElement("div",{className:"relationmodal-profile-info-container"},l.a.createElement("img",{src:Object(K.returnUserImageURL)(e.display_photo)}),l.a.createElement("p",null,e.username),l.a.createElement("button",{onClick:function(){return a.handleStatusChange("UNFOLLOW",e.username)}},"Following"))))};for(i.s();!(t=i.n()).done;)r()}catch(o){i.e(o)}finally{i.f()}return n}},{key:"renderRequester",value:function(e){var t,a=this,n=[],i=Object(N.a)(e);try{var r=function(){var e=t.value;n.push(l.a.createElement("div",{className:"relationmodal-profile-row"},l.a.createElement("div",{className:"relationmodal-profile-info-container"},l.a.createElement("img",{src:Object(K.returnUserImageURL)(e.display_photo)}),l.a.createElement("p",null,e.username)),l.a.createElement("button",{onClick:function(){return a.handleStatusChange("ACCEPT",e.username)}},"Accept Request"),l.a.createElement("button",{onClick:function(){return a.handleStatusChange("DECLINE",e.username)}},"Decline Request")))};for(i.s();!(t=i.n()).done;)r()}catch(o){i.e(o)}finally{i.f()}return n}},{key:"handleRenderRelation",value:function(e,t){return t?e(t):null}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"relationmodal-window"},l.a.createElement("span",{className:"close",onClick:function(){return e.props.closeModal("REQUEST")}},"X"),l.a.createElement("div",{id:"relationmodal-hero-container"},l.a.createElement("div",{className:"relationmodal-column"},l.a.createElement("h2",null,"Requests"),this.state.requested),l.a.createElement("div",{className:"relationmodal-column"},l.a.createElement("h2",null,"Followers"),this.state.followers),l.a.createElement("div",{className:"relationmodal-column"},l.a.createElement("h2",null,"Following"),this.state.following)))}}]),a}(l.a.Component)),yt=(a(648),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={showMenu:!1},e.showMenu=e.showMenu.bind(Object(h.a)(e)),e.closeMenu=e.closeMenu.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"showMenu",value:function(e){var t=this;e.preventDefault(),this.setState({showMenu:!0},function(){document.addEventListener("click",t.closeMenu)})}},{key:"closeMenu",value:function(){var e=this;this.setState({showMenu:!1},function(){document.removeEventListener("click",e.closeMenu)})}},{key:"render",value:function(){return l.a.createElement("div",{id:"optionsmenu-main-container"},l.a.createElement("button",{onClick:this.showMenu},l.a.createElement("h4",null,"...")),this.state.showMenu?l.a.createElement("div",{id:"optionsmenu-inner-menu-container"},l.a.createElement("div",{className:"optionsmenu-button-container"},l.a.createElement(o.b,{to:"/account"}," Settings ")),l.a.createElement("div",{className:"optionsmenu-button-container"},l.a.createElement("button",{onClick:this.props.firebase.doSignOut},l.a.createElement("h4",null,"Sign Out")))):null)}}]),a}(l.a.Component)),Pt=E(yt),St=(a(649),function(){return l.a.createElement("nav",null,l.a.createElement("div",null,l.a.createElement(o.b,{to:"/",className:"navbar-navigation-link"},"interestHub")))}),Ct=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={username:n.props.firebase.returnUsername(),tinyDisplayPhoto:null,previousLongDraft:null,isInitialUser:!0,existingUserLoading:!0,isPostModalShowing:!1,isRequestModalShowing:!1},n.modalRef=l.a.createRef(),n.renderModal=n.renderModal.bind(Object(h.a)(n)),n.closeModal=n.closeModal.bind(Object(h.a)(n)),n.openModal=n.openModal.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=!0;this.props.firebase.checkIsExistingUser().then(function(a){return a&&(t=!1),X.returnTinyDisplayPhoto(e.state.username)}).then(function(a){e.setState({existingUserLoading:t,tinyDisplayPhoto:a.data?Object(K.returnUserImageURL)(a.data):K.TEMP_PROFILE_PHOTO_URL})})}},{key:"openModal",value:function(e){this.modalRef.current.style.display="block",document.body.style.overflow="hidden",e===de?this.setState({isPostModalShowing:!0}):"REQUEST"===e&&this.setState({isRequestModalShowing:!0})}},{key:"closeModal",value:function(e){this.modalRef.current.style.display="none",document.body.style.overflow="visible",e?this.setState({isRequestModalShowing:!1}):this.setState({isPostModalShowing:!1})}},{key:"renderModal",value:function(){var e=this,t=null;return this.state.isPostModalShowing?t=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"overlay",onClick:function(){return e.closeModal()}}),l.a.createElement(ft,{username:this.state.username,closeModal:this.closeModal})):this.state.isRequestModalShowing&&(t=l.a.createElement(Et,{username:this.state.username,closeModal:this.closeModal})),l.a.createElement("div",{className:"modal",ref:this.modalRef},l.a.createElement("div",{className:"overlay"}),t)}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("nav",null,l.a.createElement("div",{id:"navbar-left-container"},l.a.createElement(o.b,{to:"/",className:"navbar-navigation-link"},l.a.createElement("div",{id:"navbar-logo-container"},l.a.createElement("h3",null,"Everfire"))),l.a.createElement("button",{onClick:function(){return e.openModal(de)}},l.a.createElement("h4",null,"New Entry"))),l.a.createElement("div",{id:"navbar-right-container"},this.state.existingUserLoading?l.a.createElement(l.a.Fragment,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"navbar-profile-home"},l.a.createElement("div",{id:"navbar-display-photo-container"},l.a.createElement("img",{src:this.state.tinyDisplayPhoto})),l.a.createElement("p",null,this.state.username)),l.a.createElement("div",{id:"navbar-main-action-buttons-container"},l.a.createElement("button",{onClick:function(){return e.openModal("REQUEST")}},l.a.createElement("h4",null,"Friends")))),l.a.createElement(Pt,null))),this.state.existingUserLoading?l.a.createElement(l.a.Fragment,null):this.renderModal())}}]),a}(l.a.Component),wt=E(Ct),kt=function(){return l.a.createElement(ae.Consumer,null,function(e){return e&&e.emailVerified?l.a.createElement(wt,null):l.a.createElement(St,null)})},Ot=(a(650),Object(s.f)(function(e){return l.a.createElement("div",{className:"pursuitholder-container",key:e.name,onClick:function(){return e.onFeedSwitch(e.value)}},l.a.createElement("h4",null,"  ",e.name,"  "),e.numEvents?l.a.createElement("p",null,"  Events: ",e.numEvents,"  "):l.a.createElement(l.a.Fragment,null))})),Tt=(a(651),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={hasMore:!0,feedData:[[]],fixedDataLoadLength:4,nextOpenPostIndex:0},n.fetchNextPosts=n.fetchNextPosts.bind(Object(h.a)(n)),n.createTimelineRow=n.createTimelineRow.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.allPosts?this.fetchNextPosts(this.props.allPosts):this.setState({hasMore:!1})}},{key:"createTimelineRow",value:function(e,t){for(var a=this.state.feedData,n=a.length-1,i=this.state.nextOpenPostIndex,r=0,o=a[n].length;r<e.length;){for(;o<4;){var s=!1;if(!e[r])break;if(this.props.selectedPosts){var u,c=Object(N.a)(this.props.selectedPosts);try{for(c.s();!(u=c.n()).done;){u.value.key===e[r]._id&&(s=!0)}}catch(d){c.e(d)}finally{c.f()}}a[n].push(l.a.createElement(We,{index:o,mediaType:t,isSelected:s,newProjectView:this.props.newProjectView,key:i,eventIndex:i,eventData:e[r],onEventClick:this.props.onEventClick,onProjectClick:this.props.onProjectClick,onProjectEventSelect:this.props.onProjectEventSelect})),i++,o++,r++}if(4===o&&a.push([]),!e[r])break;n++,o=0}this.setState({feedData:a,nextOpenPostIndex:i})}},{key:"fetchNextPosts",value:function(){var e=this;return this.state.nextOpenPostIndex+this.state.fixedDataLoadLength>=this.props.allPosts.length&&(console.log("Length of All Posts Exceeded"),this.setState({hasMore:!1})),"PROJECT"===this.props.mediaType?X.returnMultipleProjects(this.props.allPosts.slice(this.state.nextOpenPostIndex,this.state.nextOpenPostIndex+this.state.fixedDataLoadLength)).then(function(t){console.log(t.data),e._isMounted&&e.createTimelineRow(t.data,e.props.mediaType)}).catch(function(e){return console.log(e)}):X.returnMultiplePosts(this.props.allPosts.slice(this.state.nextOpenPostIndex,this.state.nextOpenPostIndex+this.state.fixedDataLoadLength),!1).then(function(t){e._isMounted&&e.createTimelineRow(t.data.posts,e.props.mediaType)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("p",{style:{textAlign:"center"}},"Yay! You have seen it all"));return this._isMounted&&this.props.allPosts?l.a.createElement("div",null,this.props.allPosts&&this.props.allPosts.length>0?l.a.createElement(ee.a,{dataLength:this.state.nextOpenPostIndex,next:this.fetchNextPosts,hasMore:this.state.hasMore,loader:l.a.createElement("h4",null,"Loading..."),endMessage:e},this.state.feedData.map(function(e,t){return l.a.createElement("div",{className:"timeline-infinite-scroll-row",key:t},e)}),l.a.createElement("br",null)):l.a.createElement("p",null,"There doesn't seem to be anything here")):l.a.createElement("div",null,l.a.createElement("p",null,"Loading"))}}]),a}(l.a.Component)),Dt=l.a.createElement("div",null,"404"),It=function(e){if(!e.followerStatus||e.isOwner)return l.a.createElement(l.a.Fragment,null);var t="",a=!0;switch(e.followerStatus){case"NOT_A_FOLLOWER":t="Follow",a=!1;break;case"FOLLOW_REQUESTED":t="Requested";break;case"FOLLOWING":t="Followed"}return a?l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){return e.onFollowClick("UNFOLLOW")}},t)):l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){return e.onFollowClick("FOLLOW")}},t))},Rt=(a(652),function(e){return l.a.createElement("div",{id:"project-hero-title-overview-container"},l.a.createElement(oe.a,{id:"project-title",placeholder:"Write a Title for your Post!",maxLength:140,onChange:function(t){return e.onTextChange("TITLE",t.target.value)},value:e.titleValue}),l.a.createElement(oe.a,{id:"project-overview",placeholder:"Write an Overview for your Project!",maxLength:140,onChange:function(t){return e.onTextChange("OVERVIEW",t.target.value)},value:e.descriptionValue}))}),xt=(a(653),"MAIN"),jt=function(e){return 4===++e?0:e},_t=Object(st.b)(function(e){var t=e.mediaType,a=e.value,n=e.classColumnIndex;return l.a.createElement("div",{className:"projectcontroller-event-container"},l.a.createElement(We,{index:n,mediaType:t,eventData:a,newProjectView:!1,key:a._id,disableModalPreview:!0}))}),Mt=Object(st.a)(function(e){var t=e.mediaType,a=e.items,n=e.onSortEnd;return l.a.createElement("ul",null,a.map(function(e,a){return l.a.createElement(_t,{key:"item-".concat(a),index:a,classColumnIndex:e.column_index,value:e,mediaType:t,onSortEnd:n})}))}),At=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={window:xt,selectedPosts:[],title:"",overview:"",pursuitCategory:n.props.pursuitNames?n.props.pursuitNames[0]:null,startDate:"",endDate:"",isComplete:!1,minDuration:null,coverPhoto:null,newProject:!1,projectSelected:null},n.handleBackClick=n.handleBackClick.bind(Object(h.a)(n)),n.handleProjectClick=n.handleProjectClick.bind(Object(h.a)(n)),n.handleProjectEventSelect=n.handleProjectEventSelect.bind(Object(h.a)(n)),n.handleWindowSwitch=n.handleWindowSwitch.bind(Object(h.a)(n)),n.handleSortEnd=n.handleSortEnd.bind(Object(h.a)(n)),n.handlePost=n.handlePost.bind(Object(h.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"handleBackClick",value:function(){this.state.projectSelected?this.setState({projectSelected:null}):this.props.onNewBackProjectClick()}},{key:"handleInputChange",value:function(e,t){switch(e){case"TITLE":this.setState({title:t});break;case"OVERVIEW":this.setState({overview:t});break;case"PURSUIT":this.setState({pursuitCategory:t});break;case"START_DATE":this.setState({startDate:t});break;case"END_DATE":this.setState({endDate:t});break;case"IS_COMPLETE":this.setState({isComplete:t});break;case"MINUTES":this.setState({minDuration:t});break;case"COVER_PHOTO":this.setState({coverPhoto:t});break;default:throw new Error("NO TEXT ID'S Matched in POST")}}},{key:"handleWindowSwitch",value:function(e){var t=0;if("REVIEW"===e){var a,n=Object(N.a)(this.state.selectedPosts);try{for(n.s();!(a=n.n()).done;){var l=a.value;l.min_duration&&(t+=l.min_duration)}}catch(i){n.e(i)}finally{n.f()}}this.setState({window:e,min:0!==t?t:null})}},{key:"handleProjectEventSelect",value:function(e){var t,a=[],n=!1,l=-1,i=Object(N.a)(this.state.selectedPosts);try{for(i.s();!(t=i.n()).done;){var r=t.value;r._id!==e._id?(l=jt(l),r.column_index=l,a.push(r)):n=!0}}catch(o){i.e(o)}finally{i.f()}n||(l=jt(l),e.column_index=l,a.push(e)),console.log(a),this.setState({selectedPosts:a})}},{key:"handleSortEnd",value:function(e){var t=e.oldIndex,a=e.newIndex;console.log(t,a);var n=this.state.selectedPosts,l=n.splice(t,1),i=Object(j.a)(l,1)[0],r=-1;n.splice(a,0,i);var o,s=Object(N.a)(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=jt(r),u.column_index=r}}catch(c){s.e(c)}finally{s.f()}console.log(n),this.setState({selectedPosts:n})}},{key:"handlePost",value:function(){var e=new FormData;if(e.append("username",this.props.username),e.append("displayPhoto",this.props.displayPhoto),e.append("userId",this.props.targetProfileId),e.append("indexUserId",this.props.targetIndexUserId),e.append("title",this.state.title),this.state.overview&&e.append("overview",this.state.overview),this.state.pursuitCategory&&e.append("pursuitCategory",this.state.pursuitCategory),this.state.startDate&&e.append("startDate",this.state.startDate),this.state.endDate&&e.append("endDate",this.state.endDate),this.state.isComplete&&e.append("isComplete",this.state.isComplete),this.state.minDuration&&e.append("minDuration",this.state.minDuration),this.state.coverPhoto&&e.append("coverPhoto",this.state.coverPhoto),this.state.selectedPosts){var t=JSON.stringify(this.state.selectedPosts);e.append("selectedPosts",t)}return X.createProject(e).then(function(e){console.log(e),alert("Success!"),window.location.reload()}).catch(function(e){return console.log(e)})}},{key:"handleProjectClick",value:function(e){this.setState({projectSelected:e})}},{key:"render",value:function(){var e=this;switch(this.state.window){case xt:var t=this.props.newProject||this.state.projectSelected;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:""},t?l.a.createElement("button",{onClick:this.handleBackClick},"Back"):l.a.createElement("button",{onClick:this.props.onNewBackProjectClick},"New"),this.props.newProject?l.a.createElement("button",{id:"project-info-button",onClick:function(){return e.handleWindowSwitch("EDIT")}},"Next Step"):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:""},this.props.newProject?l.a.createElement(Rt,{titleValue:this.state.title,descriptionValue:this.state.overview,onTextChange:this.handleInputChange}):l.a.createElement(l.a.Fragment,null),this.props.newProject?l.a.createElement("p",null,"Select the posts you want to include in this project!"):l.a.createElement(l.a.Fragment,null),l.a.createElement(Tt,{mediaType:t?de:this.props.mediaType,selectedPosts:this.state.selectedPosts,newProjectView:this.props.newProject,onProjectEventSelect:this.handleProjectEventSelect,onProjectClick:this.handleProjectClick,key:this.state.projectSelected?this.state.projectSelected._id:this.props.feedId,allPosts:this.state.projectSelected?this.state.projectSelected.post_ids:this.props.allPosts,onEventClick:this.props.onEventClick,targetProfileId:this.props.targetProfileId})));case"EDIT":return l.a.createElement("div",null,l.a.createElement("div",{className:""},l.a.createElement("button",{onClick:function(){return e.handleWindowSwitch(xt)}},"Return"),l.a.createElement("button",{onClick:function(){return e.handleWindowSwitch("REVIEW")}},"Finalize")),l.a.createElement("div",{id:"projectcontroller-sortable-list-container"},l.a.createElement(Mt,{mediaType:de,items:this.state.selectedPosts,onSortEnd:this.handleSortEnd,axis:"xy"})));case"REVIEW":var a,n=[],i=Object(N.a)(this.props.pursuitNames);try{for(i.s();!(a=i.n()).done;){var r=a.value;n.push(l.a.createElement("option",{key:r,value:r},r))}}catch(o){i.e(o)}finally{i.f()}return l.a.createElement("div",null,l.a.createElement("div",{className:""},l.a.createElement("button",{onClick:function(){return e.handleWindowSwitch(xt)}},"Return"),l.a.createElement("button",{onClick:function(){return e.handlePost()}},"Post!")),l.a.createElement("div",{id:"projectcontroller-submit-container"},l.a.createElement(oe.a,{value:this.state.title,onChange:function(t){return e.handleInputChange("TITLE",t.target.value)}}),l.a.createElement(oe.a,{value:this.state.overview,onChange:function(t){return e.handleInputChange("OVERVIEW",t.target.value)}}),l.a.createElement("label",null,"Pursuit"),l.a.createElement("select",{name:"pursuit-category",value:this.state.pursuitCategory,onChange:function(t){return e.handleInputChange("PURSUIT",t.target.value)}},n),l.a.createElement("label",null,"Start Date"),l.a.createElement("input",{type:"date",value:this.state.startDate,onChange:function(t){return e.handleInputChange("START_DATE",t.target.value)}}),l.a.createElement("label",null,"End Date"),l.a.createElement("input",{type:"date",value:this.state.endDate,onChange:function(t){return e.handleInputChange("END_DATE",t.target.value)}}),l.a.createElement("label",null,"Total Minutes"),l.a.createElement("input",{type:"number",value:this.state.minDuration,onChange:function(t){return e.handleInputChange("MINUTES",t.target.value)}}),l.a.createElement("label",null,"Is Complete"),l.a.createElement("input",{type:"checkbox",onClick:function(){return e.handleInputChange("IS_COMPLETE",!e.state.isComplete)}}),l.a.createElement("label",null,"Cover Photo"),l.a.createElement("input",{type:"file",onChange:function(t){return e.handleInputChange("COVER_PHOTO",t.target.files[0])}}),l.a.createElement("button",{onClick:this.handlePost},"Submit")));default:throw new Error("No Window Options Matched in post-project-controller")}}}]),a}(l.a.Component),Nt=(a(654),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={visitorUsername:null,targetProfileId:null,targetProfilePreviewId:null,targetUsername:n.props.match.params.username,isPrivate:!0,croppedDisplayPhoto:null,tinyCroppedcroppedDisplayPhoto:null,coverPhoto:"",bio:"",pursuits:null,recentPosts:null,allPosts:null,allProjects:null,fail:!1,selectedEvent:null,textData:null,userRelationId:null,followerStatus:null,feedId:null,feedData:null,mediaType:de,selectedPursuitIndex:-1,lastRetrievedPostIndex:0,preferredPostType:null,isModalShowing:!1,newProject:!1,postOnlyView:null},n.modalRef=l.a.createRef(),n.miniModalRef=l.a.createRef(),n.handleEventClick=n.handleEventClick.bind(Object(h.a)(n)),n.renderHeroContent=n.renderHeroContent.bind(Object(h.a)(n)),n.closeModal=n.closeModal.bind(Object(h.a)(n)),n.openModal=n.openModal.bind(Object(h.a)(n)),n.returnPublicPosts=n.returnPublicPosts.bind(Object(h.a)(n)),n.handleFollowClick=n.handleFollowClick.bind(Object(h.a)(n)),n.handleFollowerStatusChange=n.handleFollowerStatusChange.bind(Object(h.a)(n)),n.handleOptionsClick=n.handleOptionsClick.bind(Object(h.a)(n)),n.handleDeletePost=n.handleDeletePost.bind(Object(h.a)(n)),n.handleFeedSwitch=n.handleFeedSwitch.bind(Object(h.a)(n)),n.handleMediaTypeSwitch=n.handleMediaTypeSwitch.bind(Object(h.a)(n)),n.handleNewBackProjectClick=n.handleNewBackProjectClick.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,this._isMounted&&this.state.targetUsername)this.props.firebase.auth.onAuthStateChanged(function(t){if(t){var a=null;X.returnUser(e.state.targetUsername).then(function(n){return a=n.data,t.displayName!==e.state.targetUsername?X.returnFollowerStatus(t.displayName,a.user_relation_id):null}).then(function(n){e.handleResponseData(t,a,n||null)}).catch(function(e){return console.log(e)})}else X.returnUser(e.state.targetUsername).then(function(a){return e.handleResponseData(t,a.data,null)}).catch(function(e){return console.log(e)})});else{if(!this._isMounted||!this.props.match.params.postId)throw new Error("No profile or post matched");this.props.firebase.auth.onAuthStateChanged(function(t){return Promise.all([X.retrievePost(e.props.match.params.postId,!1),X.returnUser(t.displayName)]).then(function(a){var n,l=[],i=Object(N.a)(a[1].data.pursuits);try{for(i.s();!(n=i.n()).done;){var r=n.value;l.push(r.name)}}catch(o){i.e(o)}finally{i.f()}e._isMounted&&e.setState({selectedEvent:a[0].data,postOnlyView:!0,postType:a[0].data.post_format,visitorUsername:t?t.displayName:null,targetUsername:a[0].data.username,pursuitNames:l})})})}}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"handleMediaTypeSwitch",value:function(e){if(this.state.newProject){if(!window.confirm("Do you want to discard your new project?"))return;this.setState({newProject:!1})}-1===this.state.selectedPursuitIndex?this.setState(function(t){return{feedId:"ALL"+e,mediaType:e,feedData:e===de?t.allPosts:t.allProjects}}):this.setState(function(t){return{feedId:t.pursuits[t.selectedPursuitIndex].name+e,mediaType:e,feedData:e===de?t.pursuits[t.selectedPursuitIndex].all_posts?t.pursuits[t.selectedPursuitIndex].all_posts:[]:t.pursuits[t.selectedPursuitIndex].all_projects?t.pursuits[t.selectedPursuitIndex].all_projects:[]}})}},{key:"handleFeedSwitch",value:function(e){if(this.state.newProject){if(!window.confirm("Do you want to discard your new project?"))return;this.setState({newProject:!1})}-1===e?this.setState(function(e){return{selectedPursuitIndex:-1,feedId:"ALL"+e.mediaType,feedData:e.mediaType===de?e.allPosts:e.allProjects}}):this.setState(function(t){return{selectedPursuitIndex:e,feedId:t.pursuits[e].name+t.mediaType,feedData:t.mediaType===de?t.pursuits[e].all_posts?t.pursuits[e].all_posts:[]:t.pursuits[e].all_projects?t.pursuits[e].all_projects:[]}})}},{key:"handleDeletePost",value:function(){return X.deletePost(this.state.targetProfileId,this.state.targetIndexUserId,this.state.selectedEvent._id).then(function(e){return console.log(e)})}},{key:"handleFollowerStatusResponse",value:function(e){if(200===e.status){if(e.data.success){if("FOLLOWING"===e.data.success)return"FOLLOWING";if("FOLLOW_REQUESTED"===e.data.success)return"FOLLOW_REQUESTED";throw Error}if(e.data.error)return"NOT_A_FOLLOWER"===e.data.error||"UNFOLLOWED"===e.data.error?"NOT_A_FOLLOWER":"FOLLOW_REQUESTED"}}},{key:"returnPublicPosts",value:function(e){return e.reduce(function(e,t){return"PRIVATE"!==t.post_privacy_type&&e.push(t),e},[])}},{key:"handleResponseData",value:function(e,t,a){var n,l=[],i=[],r=e.displayName===t.username?t.all_posts:this.returnPublicPosts(t.all_posts),o=a?this.handleFollowerStatusResponse(a):null,s=Object(N.a)(t.pursuits);try{for(s.s();!(n=s.n()).done;){var u=n.value;if(l.push(u.name),u.projects){var c,d=Object(N.a)(u.projects);try{for(d.s();!(c=d.n()).done;){var m=c.value;i.push(m)}}catch(h){d.e(h)}finally{d.f()}}}}catch(h){s.e(h)}finally{s.f()}this._isMounted&&this.setState({visitorUsername:e?e.displayName:null,targetUsername:t.username,targetProfileId:t._id,targetIndexUserId:t.index_user_id,targetProfilePreviewId:t.user_preview_id,isPrivate:t.private,coverPhoto:t.cover_photo_key,croppedDisplayPhoto:t.cropped_display_photo_key,smallCroppedDisplayPhoto:t.small_cropped_display_photo_key,bio:t.bio,pinned:t.pinned,pursuits:t.pursuits,pursuitNames:l,allPosts:r,allProjects:i,feedData:r,mediaType:de,feedId:"ALL"+de,userRelationId:t.user_relation_id,followerStatus:o,postOnlyView:!1})}},{key:"openModal",value:function(e){this.modalRef.current.style.display="block",document.body.style.overflow="hidden",this.setState({isModalShowing:!0},this.props.history.replace("/p/"+e))}},{key:"closeModal",value:function(){this.modalRef.current.style.display="none",document.body.style.overflow="visible",this.setState({isModalShowing:!1},this.props.history.replace("/"+this.state.targetUsername))}},{key:"handleEventClick",value:function(e){var t=this;return X.retrievePost(e._id,!0).then(function(a){t._isMounted&&t.setState({selectedEvent:e,textData:a.data,postType:e.post_format},t.openModal(e._id))}).catch(function(e){return console.log(e)})}},{key:"renderHeroContent",value:function(){return this.state.mediaType===de?l.a.createElement(Tt,{mediaType:this.state.mediaType,key:this.state.feedId,allPosts:this.state.feedData,onEventClick:this.handleEventClick,targetProfileId:this.state.targetProfileId}):l.a.createElement(At,{username:this.state.targetUsername,displayPhoto:this.state.smallCroppedDisplayPhoto,targetProfileId:this.state.targetProfileId,targetIndexUserId:this.state.targetIndexUserId,mediaType:this.state.mediaType,newProject:this.state.newProject,key:this.state.feedId,allPosts:this.state.feedData,onEventClick:this.handleEventClick,onNewBackProjectClick:this.handleNewBackProjectClick,pursuitNames:this.state.pursuitNames})}},{key:"handleNewBackProjectClick",value:function(){this.state.newProject?this.setState({newProject:!1},this.handleMediaTypeSwitch(this.state.mediaType)):this.setState(function(e){return{newProject:!e.newProject,feedId:"NEW PROJECT",feedData:e.allPosts}})}},{key:"handleFollowerStatusChange",value:function(e){var t=this;X.setFollowerStatus({visitorUsername:this.state.visitorUsername,targetUserRelationId:this.state.userRelationId,targetProfilePreviewId:this.state.targetProfilePreviewId,isPrivate:this.state.isPrivate,action:e}).then(function(e){200===e.status&&(e.data.success?t.setState({followerStatus:e.data.success}):t.setState({followerStatus:e.data.error}))}).catch(function(e){console.log(e)})}},{key:"handleFollowClick",value:function(e){"FOLLOW"===e?this.handleFollowerStatusChange(e):window.confirm("Are you sure you want to unfollow?")&&this.handleFollowerStatusChange(e)}},{key:"handleOptionsClick",value:function(){}},{key:"render",value:function(){var e=this,t=null===this.state.visitorUsername&&this.state.isPrivate||this.state.visitorUsername!==this.state.targetUsername&&this.state.isPrivate&&"FOLLOWING"!==this.state.followerStatus&&"REQUEST_ACCEPTED"!==this.state.followerStatus,a=[l.a.createElement(Ot,{key:"ALL",name:"ALL",value:-1,onFeedSwitch:this.handleFeedSwitch})];if(this.state.fail)return Dt;if(this.state.pursuits){var n,i=0,r=Object(N.a)(this.state.pursuits);try{for(r.s();!(n=r.n()).done;){var o=n.value;a.push(l.a.createElement(Ot,{name:o.name,numEvents:o.num_posts,key:o.name,value:i++,onFeedSwitch:this.handleFeedSwitch}))}}catch(s){r.e(s)}finally{r.f()}}return this.state.postOnlyView?l.a.createElement(Fe,{key:this.state.selectedEvent._id,isOwnProfile:this.state.visitorUsername===this.state.selectedEvent.username,visitorUsername:this.state.visitorUsername,largeViewMode:!0,isPostOnlyView:!0,displayPhoto:this.state.selectedEvent.display_photo_key,preferredPostType:this.state.preferredPostType,postType:this.state.postType,pursuitNames:this.state.pursuitNames,username:this.state.selectedEvent.username,eventData:this.state.selectedEvent,textData:this.state.selectedEvent.post_format===ge?JSON.parse(this.state.selectedEvent.text_data):this.state.selectedEvent.text_data,closeModal:this.closeModal,onDeletePost:this.handleDeletePost}):this.state.postOnlyView?new Error("State condition for postOnlyView was null"):l.a.createElement("div",null,l.a.createElement("div",{id:"profile-main-container"},l.a.createElement("div",{id:"profile-cover-photo-container"},this.state.coverPhoto?l.a.createElement("img",{alt:"cover photo",src:Object(K.returnUserImageURL)(this.state.coverPhoto)}):l.a.createElement("div",{id:"profile-temp-cover"})),l.a.createElement("div",{id:"profile-intro-container"},l.a.createElement("div",{id:"profile-display-photo-container"},this.state.croppedDisplayPhoto?l.a.createElement("img",{alt:"user profile photo",src:Object(K.returnUserImageURL)(this.state.croppedDisplayPhoto)}):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{id:"profile-name-container"},l.a.createElement("h4",null,this.state.targetUsername)),l.a.createElement("div",{id:"profile-follow-actions-container"},l.a.createElement(It,{isOwner:this.state.targetUsername===this.state.visitorUsername,followerStatus:this.state.followerStatus,onFollowClick:this.handleFollowClick,onOptionsClick:this.handleOptionsClick}))),l.a.createElement("div",{id:"profile-biography"},this.state.bio?l.a.createElement("p",null,this.state.bio):l.a.createElement("p",null)),l.a.createElement("div",{id:"profile-pursuits-container"},a)),l.a.createElement("div",{id:"profile-content-switch-container"},l.a.createElement("button",{disabled:this.state.mediaType===de,onClick:function(){return e.handleMediaTypeSwitch(de)}},"Posts"),l.a.createElement("button",{disabled:"PROJECT"===this.state.mediaType,onClick:function(){return e.handleMediaTypeSwitch("PROJECT")}},"Projects")),t?l.a.createElement("p",null,"This profile is private. To see these posts, please request access. "):this.renderHeroContent()),l.a.createElement("div",{className:"modal",ref:this.modalRef},l.a.createElement("div",{className:"overlay",onClick:function(){return e.closeModal()}}),l.a.createElement("span",{className:"close",onClick:function(){return e.closeModal()}},"X"),this.state.isModalShowing&&this.state.selectedEvent?l.a.createElement(Fe,{key:this.state.selectedEvent._id,isOwnProfile:this.state.visitorUsername===this.state.targetUsername,visitorUsername:this.state.visitorUsername,isPostOnlyView:!1,displayPhoto:this.state.smallCroppedDisplayPhoto,preferredPostType:this.state.preferredPostType,postType:this.state.postType,largeViewMode:!0,pursuitNames:this.state.pursuitNames,username:this.state.targetUsername,eventData:this.state.selectedEvent,textData:this.state.textData,onDeletePost:this.handleDeletePost,closeModal:this.closeModal}):l.a.createElement(l.a.Fragment,null)))}}]),a}(l.a.Component)),Ft=E(Nt),Lt=(a(655),ne(function(){return l.a.createElement(o.a,null,l.a.createElement(kt,null),l.a.createElement(s.c,null,l.a.createElement(s.a,{exact:!0,path:"/",component:Qe}),l.a.createElement(s.a,{exact:!0,path:"/account",component:tt}),l.a.createElement(s.a,{exact:!0,path:"/:username",component:Ft}),l.a.createElement(s.a,{exact:!0,path:"/p/:postId",component:Ft})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(y.Provider,{value:new k},l.a.createElement(Lt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}},[[278,1,2]]]);
//# sourceMappingURL=main.32e6c2ff.chunk.js.map