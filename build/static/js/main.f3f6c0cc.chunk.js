(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(e,t,a){},327:function(e,t,a){e.exports=a(738)},343:function(e,t,a){},344:function(e,t,a){},351:function(e,t,a){},352:function(e,t,a){},369:function(e,t,a){},370:function(e,t,a){},371:function(e,t,a){},372:function(e,t,a){},373:function(e,t,a){},374:function(e,t,a){},375:function(e,t,a){},376:function(e,t,a){},377:function(e,t,a){},378:function(e,t,a){},379:function(e,t,a){},396:function(e,t,a){},397:function(e,t,a){},398:function(e,t,a){},399:function(e,t,a){},6:function(e,t){e.exports={TEMP_PROFILE_PHOTO_URL:"https://qph.fs.quoracdn.net/main-qimg-2b21b9dd05c757fe30231fac65b504dd",returnUsernameObject:function(e){return{params:{username:e}}},returnUsernameURL:function(e){return"/u/"+e},returnUserImageURL:function(e){return"http://eumyth-bucket-1.s3.us-west-1.amazonaws.com/"+e},returnPostURL:function(e){return"/p/"+e},ROOT_URL:"/api",IMAGE_BASE_URL:"/api/image",MULTIPLE_IMAGES_URL:"/api/image/multiple",DISPLAY_PHOTO_URL:"/api/image/display-photo",COVER_PHOTO_URL:"/api/image/cover",DRAFT_BASE_URL:"/api/draft",DRAFT_TITLE_URL:"/api/draft/title",TINY_DISPLAY_PHOTO_URL:"/api/image/navbar-display-photo",COMPRESS_PHOTO_URL:"/api/image/compress",USER_BASE_URL:"/api/user",USER_BIO_URL:"/api/user/bio",USER_ACCOUNT_SETTINGS_INFO_URL:"/api/user/account-settings-info",USER_PRIVACY_URL:"/api/user/private",USER_PREVIEW_BASE_URL:"/api/user-preview",USER_PREVIEW_ID_URL:"/api/user-preview/id",USER_TEMPLATE_URL:"/api/user/template",RELATION_BASE_URL:"/api/relation",RELATION_STATUS_URL:"/api/relation/status",RELATION_INFO_URL:"/api/relation/info",RELATION_SET_FOLLOWER_URL:"/api/relation/set",POST_BASE_URL:"/api/post",PROJECT_BASE_URL:"/api/project",MULTIPLE_PROJECTS_URL:"/api/project/multiple",MULTIPLE_POSTS_URL:"/api/post/multiple",WITH_IMAGE_POST_URL:"/api/post/with-image",NO_IMAGE_POST_URL:"/api/post/no-image",SOCIAL_FEED_POSTS_URL:"/api/post/feed",POST_DISPLAY_PHOTO_URL:"/api/post/display-photo",SINGLE_POST_TEXT_DATA_URL:"/api/post/single",INDEX_BASE_URL:"/api/index-user",CHECK_USERNAME_URL:"/api/index-user/username",INDEX_USER_PURSUITS_URL:"/api/index-user/pursuits",COMMENT_BASE_URL:"/api/comment",ROOT_COMMENT_URL:"/api/comment/root",REPLY_COMMENT_URL:"/api/comment/reply",REFRESH_COMMENTS_URL:"/api/comment/refresh",VOTE_ON_COMMENT_URL:"/api/comment/vote"}},717:function(e,t,a){},718:function(e,t,a){},719:function(e,t,a){},720:function(e,t,a){},721:function(e,t,a){},722:function(e,t,a){},723:function(e,t,a){},724:function(e,t,a){},725:function(e,t,a){},726:function(e,t,a){},727:function(e,t,a){},728:function(e,t,a){},729:function(e,t,a){},730:function(e,t,a){},731:function(e,t,a){},732:function(e,t,a){},733:function(e,t,a){},734:function(e,t,a){},735:function(e,t,a){},736:function(e,t,a){},738:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(29),r=a.n(l),o=a(11),s=a(40),u=a(37),c=a(64),d=a(20),p=a(12),h=a(13),m=a(4),v=a(15),g=a(14),f=a(195),b=a.n(f),E="INITIAL_STATE",y="POST",P="COLLAPSED",S="EXPANDED",D="SHORT",O="LONG",I=(a(343),function(e){return i.a.createElement("section",null,i.a.createElement("div",{id:"welcomeloginform-form-container"},i.a.createElement("form",{onSubmit:e.onLoginSubmit},i.a.createElement("div",{className:"welcomeloginform-text-input-container"},i.a.createElement("input",{type:"text",placeholder:"Email",name:"email",autoComplete:"off",onChange:e.onLoginEmailChange})),i.a.createElement("div",{className:"welcomeloginform-text-input-container"},i.a.createElement("input",{type:"password",placeholder:"Password",name:"password",autoComplete:"off",onChange:e.onLoginPasswordChange})),i.a.createElement("input",{id:"welcomeloginform-login-button",className:"welcomeloginform-button",type:"submit",value:"Log in"})),i.a.createElement("button",{id:"welcomelogin-forgot-button",value:"PASSWORD_STATE",onClick:e.onToggleLoginRegisterWindow},"Forget Password?")),i.a.createElement("p",null,"Don't Have An Account?"),i.a.createElement("button",{id:"welcomeloginform-switch-button",value:"REGISTER_STATE",onClick:e.onToggleLoginRegisterWindow},"Create Account"))}),C=(a(344),function(e){var t=Object(n.useState)(!0),a=Object(o.a)(t,2),l=a[0],r=a[1];return i.a.createElement("section",null,i.a.createElement("div",{id:"welcomeregisterform-form-container"},i.a.createElement("form",{onSubmit:e.onRegisterSubmit},i.a.createElement("div",{className:"welcomeregisterform-text-input-container"},i.a.createElement("input",{type:"text",placeholder:"Email",name:"email",autoComplete:"off",onChange:e.onRegisterEmailChange})),i.a.createElement("div",{className:"welcomeregisterform-text-input-container"},i.a.createElement("input",{type:"password",placeholder:"Password",name:"password",autoComplete:"off",onChange:function(t){t.target.value.length>=6?(r(!1),e.onRegisterPasswordChange(t)):r(!0)}})),i.a.createElement("p",null,l?"Password must be at least 6 characters":null),i.a.createElement("input",{id:"welcomeregisterform-button",type:"submit",value:"Sign Up",disabled:l}))),i.a.createElement("p",null,"Already Have An Account?"),i.a.createElement("button",{id:"welcomeregisterform-login",value:"LOGIN_STATE",onClick:e.onToggleLoginRegisterWindow},"Sign In"))}),w=i.a.createContext(null),k=function(e){return function(t){return i.a.createElement(w.Consumer,null,function(a){return i.a.createElement(e,Object.assign({},t,{firebase:a}))})}},T=w,_=a(150),R={apiKey:"AIzaSyC9sBHK-evjecmuWQsQHoE-iSJmHUcIBcE",authDomain:"eumyth-65330.firebaseapp.com",databaseURL:"https://eumyth-65330.firebaseio.com",projectId:"eumyth-65330",storageBucket:"eumyth-65330.appspot.com",messagingSenderId:"677080457179",appId:"1:677080457179:web:5e1e38f3f082f93427d1fe",measurementId:"G-GP77M3QKXG"},x=function(){function e(){Object(p.a)(this,e),_.a.initializeApp(R),this.auth=_.a.auth(),this.db=_.a.database(),this.doTest=this.doTest.bind(this),this.doCreateUser=this.doCreateUser.bind(this),this.doSignIn=this.doSignIn.bind(this),this.doSignOut=this.doSignOut.bind(this),this.doSendEmailVerification=this.doSendEmailVerification.bind(this),this.doPasswordReset=this.doPasswordReset.bind(this),this.doPasswordUpdate=this.doPasswordUpdate.bind(this),this.doIsEmailVerified=this.doIsEmailVerified.bind(this),this.checkIsExistingUser=this.checkIsExistingUser.bind(this),this.writeBasicUserData=this.writeBasicUserData.bind(this),this.clearBasicUserData=this.clearBasicUserData.bind(this)}return Object(h.a)(e,[{key:"doTest",value:function(){return"FIREBASE"}},{key:"doCreateUser",value:function(e,t){return this.auth.createUserWithEmailAndPassword(e,t).then(function(e){e.user.sendEmailVerification()}).catch(function(e){var t=e.code,a=e.message;console.log(e),"auth/weak-password"===t?alert("The password is too weak."):alert(a)})}},{key:"doSignIn",value:function(e,t){return this.auth.signInWithEmailAndPassword(e,t).catch(function(e){var t=e.code,a=e.message;a&&alert(t+" "+a)})}},{key:"doSignOut",value:function(){return this.auth.signOut()}},{key:"doSendEmailVerification",value:function(){this.auth.currentUser.sendEmailVerification().catch(function(e){var t=e.code,a=e.message;"auth/weak-password"===t?alert("The password is too weak."):console.log(a),console.log(e)})}},{key:"doPasswordReset",value:function(e){return alert("EMAIL"),this.auth.sendPasswordResetEmail(e)}},{key:"doPasswordUpdate",value:function(e){return this.auth.currentUser.updatePassword(e)}},{key:"returnUsername",value:function(){return this.auth.currentUser.displayName}},{key:"doUsernameUpdate",value:function(e){return this.auth.currentUser.updateProfile({displayName:e}).then(function(){return 200})}},{key:"doIsEmailVerified",value:function(){if(this.auth.currentUser)return this.auth.currentUser.emailVerified}},{key:"checkIsExistingUser",value:function(){var e=this.auth.currentUser.uid;return this.db.ref("users/"+e).once("value").then(function(e){return e.val()})}},{key:"returnName",value:function(){var e=this.auth.currentUser.uid;return this.db.ref("users/"+e).once("value").then(function(e){return e.val()})}},{key:"writeBasicUserData",value:function(e,t,a){var n=this.auth.currentUser.uid;return this.db.ref("users/"+n).set({username:e,firstName:t,lastName:a}).then(function(){return 200})}},{key:"clearBasicUserData",value:function(e){if(this.auth.currentUser){var t=this.auth.currentUser.uid;return this.db.ref("users/"+t).remove()}}}]),e}(),j=x,M=j,L={email:"",error:null},A=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state=Object(d.a)({},L),n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n.handleTextUpdate=n.handleTextUpdate.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.email;this.props.firebase.doPasswordReset(a).then(function(){t.setState(Object(d.a)({},L))}).catch(function(e){t.setState({error:e})})}},{key:"handleTextUpdate",value:function(e){this.setState(Object(c.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.error,n=""===t;return i.a.createElement("div",null,i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("input",{name:"email",value:this.state.email,onChange:this.handleTextUpdate,type:"text",placeholder:"Email Address"}),i.a.createElement("button",{disabled:n,type:"submit"},"Reset My Password"),a&&i.a.createElement("p",null,a.message)),i.a.createElement("button",{onClick:this.props.onToggleLoginRegisterWindow,value:"LOGIN_STATE"},"Return"))}}]),a}(i.a.Component),F=function(e){return i.a.createElement("div",null,i.a.createElement("h4",null,"PasswordForget"),i.a.createElement(U,{onToggleLoginRegisterWindow:e.onToggleLoginRegisterWindow}))},U=k(A),N=(a(351),function(e){var t=Object(n.useState)(null),a=Object(o.a)(t,2),l=a[0],r=a[1];return i.a.createElement("div",{id:"verifyform-container"},l?i.a.createElement("p",null,"If you have verified your email, please refresh the page. "):i.a.createElement("p",null,"It looks like you haven't verified your account just yet. Please check your email's inbox or junk folder to verify your account. If you have already, return to login or refresh this page."),i.a.createElement("p",null,l),i.a.createElement("button",{id:"verifyform-resend-button",onClick:function(t){return r("Email has been sent! Once you verify \n                    your email, try refreshing the page."),e.onSendEmailVerification(t)}},"Resend Email"),i.a.createElement("div",{id:"verifyform-relogin-container"},i.a.createElement("button",{onClick:e.onSignOut},"Return to Login")))}),B=(a(352),{currentUser:"",email:"",password:"",test:"",error:null,window:"LOGIN_STATE",loggedIn:!1,verified:null,showRegisterSuccess:!1}),V=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state=Object(d.a)({},B),n.handleWindowToggle=n.handleWindowToggle.bind(Object(m.a)(n)),n.handleLoginSubmit=n.handleLoginSubmit.bind(Object(m.a)(n)),n.handleRegisterSubmit=n.handleRegisterSubmit.bind(Object(m.a)(n)),n.handleSendEmailVerication=n.handleSendEmailVerication.bind(Object(m.a)(n)),n.handleSignOut=n.handleSignOut.bind(Object(m.a)(n)),n.handleRegisterSuccess=n.handleRegisterSuccess.bind(Object(m.a)(n)),n.handleTextChange=n.handleTextChange.bind(Object(m.a)(n)),n.handleVerifiedState=n.handleVerifiedState.bind(Object(m.a)(n)),n.renderLoginRegister=n.renderLoginRegister.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this._isMounted&&this.props.firebase.auth.onAuthStateChanged(function(t){t?e.setState({currentUser:t,verified:t.emailVerified}):e.setState({currentUser:null,verified:!1})})}},{key:"handleTextChange",value:function(e){e.preventDefault(),this.setState(Object(c.a)({},e.target.name,e.target.value))}},{key:"handleRegisterSuccess",value:function(e){e.preventDefault(),this.setState(function(e){return{showRegisterSuccess:!e.showRegisterSuccess}})}},{key:"handleSignOut",value:function(e){e.preventDefault(),this.props.firebase.doSignOut().then(this.setState(Object(d.a)({},B)))}},{key:"handleSendEmailVerication",value:function(e){e.preventDefault(),this.props.firebase.doSendEmailVerification(),alert("Email has been sent! Once you verify \n      your email, try refreshing the page.")}},{key:"handleVerifiedState",value:function(e){this.state.currentUser&&this.setState({verified:e})}},{key:"handleWindowToggle",value:function(e){e.preventDefault(),this.setState({window:e.target.value})}},{key:"handleLoginSubmit",value:function(e){var t=this;if(e.preventDefault(),!b.a.validate(this.state.email))return alert("This is not a valid email!");this.props.firebase.doSignIn(this.state.email,this.state.password).then(function(e){e&&(e.user.emailVerified?t.props.history.push("/"):t.handleVerifiedState(e.user.emailVerified))})}},{key:"handleRegisterSubmit",value:function(e){var t=this;e.preventDefault(),b.a.validate(this.state.email)?this.state.password.length<6?alert("Password is too short!"):this.props.firebase.doCreateUser(this.state.email,this.state.password).then(function(){return t.setState({showRegisterSuccess:!0})}).catch(function(e){return console.log(e)}):alert("This is not a valid email!")}},{key:"renderLoginRegister",value:function(e){return this.state.currentUser&&!this.state.verified?i.a.createElement("div",{className:"welcome-hero-side-container"},i.a.createElement(N,{onToggleLoginRegisterWindow:this.handleWindowToggle,onSendEmailVerification:this.handleSendEmailVerication,onSignOut:this.handleSignOut})):"REGISTER_STATE"===e?i.a.createElement("div",{className:"welcome-hero-side-container"},i.a.createElement(C,{onToggleLoginRegisterWindow:this.handleWindowToggle,onRegisterEmailChange:this.handleTextChange,onRegisterPasswordChange:this.handleTextChange,onRegisterSubmit:this.handleRegisterSubmit})):"LOGIN_STATE"===e?i.a.createElement("div",{className:"welcome-hero-side-container"},i.a.createElement(I,{onToggleLoginRegisterWindow:this.handleWindowToggle,onLoginEmailChange:this.handleTextChange,onLoginPasswordChange:this.handleTextChange,onLoginSubmit:this.handleLoginSubmit})):"PASSWORD_STATE"===e?i.a.createElement("div",{className:"welcome-hero-side-container"},i.a.createElement(F,{onToggleLoginRegisterWindow:this.handleWindowToggle})):void 0}},{key:"render",value:function(){return i.a.createElement("section",{className:"welcome-login-register-section"},i.a.createElement("div",{className:"welcome-hero-hero-container"},i.a.createElement("p",null,"Welcome to interestHub! Login or sign up to get started!"),i.a.createElement("br",null),i.a.createElement("p",null,"(to try out this without signing up, use this test account)"),i.a.createElement("br",null),i.a.createElement("p",null,"(email: williamshengchen8@gmail.com, password: 123123)")),this.renderLoginRegister(this.state.window))}}]),a}(i.a.Component),W=a(18),H=a(41),G=a(326),K=a(22),Y=function(e){var t=e.getValue().length||0;return i.a.createElement(K.z.Menu,e,t<5?e.children:i.a.createElement("div",null,"Please just choose 5"))},J=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).isValidNewOption=function(e,t){return e.length>0&&t.length<5},e}return Object(h.a)(a,[{key:"render",value:function(){return i.a.createElement(G.a,{components:{Menu:Y},isMulti:!0,onChange:this.props.onSelect,options:this.props.options?this.props.options:null,isValidNewOption:this.isValidNewOption})}}]),a}(n.Component),z=a(16),q=a.n(z),X=a(6),Q=a.n(X),Z=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,null,[{key:"changeRelationStatus",value:function(e,t,a,n){return q.a.put(Q.a.RELATION_SET_FOLLOWER_URL,{action:e,targetUsername:t,currentUsername:a,ID:n})}},{key:"checkUsernameAvailable",value:function(e){return q.a.get(Q.a.CHECK_USERNAME_URL,{username:e})}},{key:"createPost",value:function(e){return q.a.post(Q.a.POST_BASE_URL,e)}},{key:"createProject",value:function(e){return q.a.post(Q.a.PROJECT_BASE_URL,e)}},{key:"createUserProfile",value:function(e){return q.a.post(Q.a.USER_BASE_URL,e)}},{key:"deleteAccountPhoto",value:function(e,t){return q.a.delete("COVER"===t?Q.a.COVER_PHOTO_URL:Q.a.DISPLAY_PHOTO_URL,{data:{username:e,contentType:t}})}},{key:"deletePhotoByKey",value:function(e){return q.a.delete(Q.a.IMAGE_BASE_URL,{data:{imageKey:e}})}},{key:"deleteManyPhotosByKey",value:function(e){return q.a.delete(Q.a.MULTIPLE_IMAGES_URL,{data:{keys:e}})}},{key:"deletePost",value:function(e,t,a,n,i,l){return q.a.delete(Q.a.POST_BASE_URL,{data:{userID:e,indexUserID:t,postID:a,pursuit:n,duration:i,progression:l}})}},{key:"getUserPreviewID",value:function(e){return q.a.get(Q.a.USER_PREVIEW_ID_URL,Q.a.returnUsernameObject(e))}},{key:"returnUserRelationInfo",value:function(e){return q.a.get(Q.a.RELATION_INFO_URL,Q.a.returnUsernameObject(e))}},{key:"returnTinyDisplayPhoto",value:function(e){return q.a.get(Q.a.TINY_DISPLAY_PHOTO_URL,Q.a.returnUsernameObject(e))}},{key:"setProfilePrivacy",value:function(e,t){return q.a.put(Q.a.USER_PRIVACY,{username:e,isPrivate:t})}},{key:"setFollowerStatus",value:function(e,t,a,n,i){return console.log(n),q.a.put(Q.a.RELATION_STATUS_URL,{visitorUsername:e,userRelationArrayID:t,targetProfilePreviewID:a,isPrivate:n,action:i})}},{key:"returnIndexUser",value:function(e){return q.a.get(Q.a.INDEX_BASE_URL,Q.a.returnUsernameObject(e))}},{key:"returnUser",value:function(e){return q.a.get(Q.a.USER_BASE_URL,Q.a.returnUsernameObject(e))}},{key:"returnFollowerStatus",value:function(e,t){return q.a.get(Q.a.RELATION_BASE_URL,{params:{visitorUsername:e,userRelationArrayID:t}})}},{key:"returnMultipleProjects",value:function(e){return q.a.get(Q.a.MULTIPLE_PROJECTS_URL,{params:{projectIDList:e}})}},{key:"returnMultiplePostInfo",value:function(e,t){return q.a.get(Q.a.MULTIPLE_POSTS_URL,{params:{targetUserDataID:e,postIDList:t}})}},{key:"returnMultiplePosts",value:function(e,t){return q.a.get(Q.a.MULTIPLE_POSTS_URL,{params:{postIDList:e,includePostText:t}})}},{key:"retrievePost",value:function(e,t){return q.a.get(Q.a.SINGLE_POST_TEXT_DATA_URL,{params:{postID:e,textOnly:t}})}},{key:"returnSocialFeedPosts",value:function(e,t){return q.a.get(Q.a.SOCIAL_FEED_POSTS_URL,{params:{indexUserID:e,postIDList:t}})}},{key:"returnAccountSettingsInfo",value:function(e){return q.a.get(Q.a.USER_ACCOUNT_SETTINGS_INFO_URL,Q.a.returnUsernameObject(e))}},{key:"updateBio",value:function(e,t){return q.a.put(Q.a.USER_BIO_URL,{bio:e,username:t})}},{key:"updatePost",value:function(e){return q.a.put(Q.a.POST_BASE_URL,e)}},{key:"updateAccountImage",value:function(e,t){return q.a.post("COVER"===t?Q.a.COVER_PHOTO_URL:Q.a.DISPLAY_PHOTO_URL,e)}},{key:"getComments",value:function(e,t){return q.a.get(Q.a.COMMENT_BASE_URL,{params:{rootCommentIDArray:e,viewingMode:t}})}},{key:"postComment",value:function(e,t,a,n){return q.a.post(Q.a.ROOT_COMMENT_URL,{profilePreviewID:e,comment:t,postID:a,imagePageNumber:n})}},{key:"postAnnotation",value:function(e,t,a,n,i){return q.a.post(Q.a.ROOT_COMMENT_URL,{profilePreviewID:e,postID:t,imagePageNumber:a,annotationData:n,annotationGeometry:i})}},{key:"postReply",value:function(e,t,a,n){return q.a.post(Q.a.REPLY_COMMENT_URL,{postID:e,profilePreviewID:t,ancestors:a,comment:n})}},{key:"retrieveNewPostInfo",value:function(e){return q.a.get(Q.a.DRAFT_BASE_URL,Q.a.returnUsernameObject(e))}},{key:"returnImage",value:function(e){return q.a.get(Q.a.IMAGE_BASE_URL,{params:{imageKey:e}})}},{key:"refreshComments",value:function(e){return q.a.get(Q.a.REFRESH_COMMENTS_URL,{params:{rootCommentIDArray:e}})}},{key:"saveDraft",value:function(e,t,a){return q.a.put(Q.a.DRAFT_BASE_URL,{username:e,draft:JSON.stringify(t),draftTitle:a})}},{key:"updatePostDisplayPhotos",value:function(e,t){return q.a.patch(Q.a.POST_DISPLAY_PHOTO_URL,{username:e,imageKey:t})}},{key:"updateTemplate",value:function(e,t,a){return q.a.put(Q.a.USER_TEMPLATE_URL,{indexUserID:e,text:t,pursuit:a})}},{key:"voteOnComment",value:function(e,t,a){return q.a.put(Q.a.VOTE_ON_COMMENT_URL,{profilePreviewID:e,commentID:t,voteValue:a})}}]),e}(),$=a(59),ee=a.n($),te=a(312),ae=a.n(te),ne=a(324),ie=function(e){var t=function(e,t,a){e.preventDefault(),a(t)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(ne.a,{onDrop:e.handleImageDrop,noClick:!0,noKeyboard:!0,style:{width:"200px",height:"200px"}},function(t){var a=t.getRootProps,n=t.getInputProps;return i.a.createElement("div",a(),i.a.createElement(ae.a,{ref:e.setEditorRef,image:e.profilePhoto,width:170,height:170,borderRadius:200,border:50,color:[215,215,215,.8],scale:e.imageScale,rotate:e.imageRotation}),i.a.createElement("input",n()))}),i.a.createElement("button",{onClick:function(a){return t(a,null,e.clearFile)}},"Clear file"),i.a.createElement("label",null,"Rotation"),i.a.createElement("input",{type:"range",id:"points",name:"points",min:"-180",max:"180",value:e.imageRotation,onChange:function(t){return e.rotateImage(t.target.value)}}),i.a.createElement("button",{onClick:function(a){return t(a,0,e.rotateImage)}},"Reset"),i.a.createElement("label",null,"Scale"),i.a.createElement("input",{type:"range",id:"points",name:"points",step:"0.1",min:"1",max:"10",value:e.imageScale,onChange:function(t){return e.scaleImage(t.target.value)}}),i.a.createElement("button",{onClick:function(a){return t(a,1,e.scaleImage)}},"Reset"))},le=a(9),re=[{value:"3D printing",label:"3D printing"},{value:"Acting",label:"Acting"},{value:"Aeromodeling",label:"Aeromodeling"},{value:"Air sports",label:"Air sports"},{value:"Airbrushing",label:"Airbrushing"},{value:"Aircraft Spotting",label:"Aircraft Spotting"},{value:"Airsoft",label:"Airsoft"},{value:"Airsofting",label:"Airsofting"},{value:"Amateur astronomy",label:"Amateur astronomy"},{value:"Amateur geology",label:"Amateur geology"},{value:"Amateur Radio",label:"Amateur Radio"},{value:"American football",label:"American football"},{value:"Animal fancy",label:"Animal fancy"},{value:"Animals/pets/dogs",label:"Animals/pets/dogs"},{value:"Antiquing",label:"Antiquing"},{value:"Antiquities",label:"Antiquities"},{value:"Aqua-lung",label:"Aqua-lung"},{value:"Aquarium (Freshwater & Saltwater)",label:"Aquarium (Freshwater & Saltwater)"},{value:"Archery",label:"Archery"},{value:"Art collecting",label:"Art collecting"},{value:"Arts",label:"Arts"},{value:"Association football",label:"Association football"},{value:"Astrology",label:"Astrology"},{value:"Astronomy",label:"Astronomy"},{value:"Audiophilia",label:"Audiophilia"},{value:"Australian rules football",label:"Australian rules football"},{value:"Auto audiophilia",label:"Auto audiophilia"},{value:"Auto racing",label:"Auto racing"},{value:"Backgammon",label:"Backgammon"},{value:"Backpacking",label:"Backpacking"},{value:"Badminton",label:"Badminton"},{value:"Base Jumping",label:"Base Jumping"},{value:"Baseball",label:"Baseball"},{value:"Basketball",label:"Basketball"},{value:"Baton Twirling",label:"Baton Twirling"},{value:"Beach Volleyball",label:"Beach Volleyball"},{value:"Beach/Sun tanning",label:"Beach/Sun tanning"},{value:"Beachcombing",label:"Beachcombing"},{value:"Beadwork",label:"Beadwork"},{value:"Beatboxing",label:"Beatboxing"},{value:"Becoming A Child Advocate",label:"Becoming A Child Advocate"},{value:"Beekeeping",label:"Beekeeping"},{value:"Bell Ringing",label:"Bell Ringing"},{value:"Belly Dancing",label:"Belly Dancing"},{value:"Bicycle Polo",label:"Bicycle Polo"},{value:"Bicycling",label:"Bicycling"},{value:"Billiards",label:"Billiards"},{value:"Bird watching",label:"Bird watching"},{value:"Birding",label:"Birding"},{value:"Birdwatching",label:"Birdwatching"},{value:"Blacksmithing",label:"Blacksmithing"},{value:"Blogging",label:"Blogging"},{value:"BMX",label:"BMX"},{value:"Board games",label:"Board games"},{value:"Board sports",label:"Board sports"},{value:"BoardGames",label:"BoardGames"},{value:"Boating",label:"Boating"},{value:"Body Building",label:"Body Building"},{value:"Bodybuilding",label:"Bodybuilding"},{value:"Bonsai Tree",label:"Bonsai Tree"},{value:"Book collecting",label:"Book collecting"},{value:"Bookbinding",label:"Bookbinding"},{value:"Boomerangs",label:"Boomerangs"},{value:"Bowling",label:"Bowling"},{value:"Boxing",label:"Boxing"},{value:"Brazilian jiu-jitsu",label:"Brazilian jiu-jitsu"},{value:"Breakdancing",label:"Breakdancing"},{value:"Brewing Beer",label:"Brewing Beer"},{value:"Bridge",label:"Bridge"},{value:"Bridge Building",label:"Bridge Building"},{value:"Bringing Food To The Disabled",label:"Bringing Food To The Disabled"},{value:"Building A House For Habitat For Humanity",label:"Building A House For Habitat For Humanity"},{value:"Building Dollhouses",label:"Building Dollhouses"},{value:"Bus spotting",label:"Bus spotting"},{value:"Butterfly Watching",label:"Butterfly Watching"},{value:"Button Collecting",label:"Button Collecting"},{value:"Cake Decorating",label:"Cake Decorating"},{value:"Calligraphy",label:"Calligraphy"},{value:"Camping",label:"Camping"},{value:"Candle making",label:"Candle making"},{value:"Canoeing",label:"Canoeing"},{value:"Car Racing",label:"Car Racing"},{value:"Card collecting",label:"Card collecting"},{value:"Cartooning",label:"Cartooning"},{value:"Casino Gambling",label:"Casino Gambling"},{value:"Cave Diving",label:"Cave Diving"},{value:"Ceramics",label:"Ceramics"},{value:"Cheerleading",label:"Cheerleading"},{value:"Chess",label:"Chess"},{value:"Church/church activities",label:"Church/church activities"},{value:"Cigar Smoking",label:"Cigar Smoking"},{value:"Climbing",label:"Climbing"},{value:"Cloud Watching",label:"Cloud Watching"},{value:"Coin Collecting",label:"Coin Collecting"},{value:"Collecting",label:"Collecting"},{value:"Collecting Antiques",label:"Collecting Antiques"},{value:"Collecting Artwork",label:"Collecting Artwork"},{value:"Collecting Hats",label:"Collecting Hats"},{value:"Collecting Music Albums",label:"Collecting Music Albums"},{value:"Collecting RPM Records",label:"Collecting RPM Records"},{value:"Collecting Sports Cards (Baseball, Football, Basketball, Hockey)",label:"Collecting Sports Cards (Baseball, Football, Basketball, Hockey)"},{value:"Collecting Swords",label:"Collecting Swords"},{value:"Color guard",label:"Color guard"},{value:"Coloring",label:"Coloring"},{value:"Comic book collecting",label:"Comic book collecting"},{value:"Compose Music",label:"Compose Music"},{value:"Computer activities",label:"Computer activities"},{value:"Computer programming",label:"Computer programming"},{value:"Conworlding",label:"Conworlding"},{value:"Cooking",label:"Cooking"},{value:"Cosplay",label:"Cosplay"},{value:"Cosplaying",label:"Cosplaying"},{value:"Couponing",label:"Couponing"},{value:"Crafts",label:"Crafts"},{value:"Crafts (unspecified)",label:"Crafts (unspecified)"},{value:"Creative writing",label:"Creative writing"},{value:"Cricket",label:"Cricket"},{value:"Crochet",label:"Crochet"},{value:"Crocheting",label:"Crocheting"},{value:"Cross-Stitch",label:"Cross-Stitch"},{value:"Crossword Puzzles",label:"Crossword Puzzles"},{value:"Cryptography",label:"Cryptography"},{value:"Curling",label:"Curling"},{value:"Cycling",label:"Cycling"},{value:"Dance",label:"Dance"},{value:"Dancing",label:"Dancing"},{value:"Darts",label:"Darts"},{value:"Debate",label:"Debate"},{value:"Deltiology (postcard collecting)",label:"Deltiology (postcard collecting)"},{value:"Diecast Collectibles",label:"Diecast Collectibles"},{value:"Digital arts",label:"Digital arts"},{value:"Digital Photography",label:"Digital Photography"},{value:"Disc golf",label:"Disc golf"},{value:"Do it yourself",label:"Do it yourself"},{value:"Dodgeball",label:"Dodgeball"},{value:"Dog sport",label:"Dog sport"},{value:"Dolls",label:"Dolls"},{value:"Dominoes",label:"Dominoes"},{value:"Dowsing",label:"Dowsing"},{value:"Drama",label:"Drama"},{value:"Drawing",label:"Drawing"},{value:"Driving",label:"Driving"},{value:"Dumpster Diving",label:"Dumpster Diving"},{value:"Eating out",label:"Eating out"},{value:"Educational Courses",label:"Educational Courses"},{value:"Electronics",label:"Electronics"},{value:"Element collecting",label:"Element collecting"},{value:"Embroidery",label:"Embroidery"},{value:"Entertaining",label:"Entertaining"},{value:"Equestrianism",label:"Equestrianism"},{value:"Exercise (aerobics, weights)",label:"Exercise (aerobics, weights)"},{value:"Exhibition drill",label:"Exhibition drill"},{value:"Falconry",label:"Falconry"},{value:"Fast cars",label:"Fast cars"},{value:"Felting",label:"Felting"},{value:"Fencing",label:"Fencing"},{value:"Field hockey",label:"Field hockey"},{value:"Figure skating",label:"Figure skating"},{value:"Fire Poi",label:"Fire Poi"},{value:"Fishing",label:"Fishing"},{value:"Fishkeeping",label:"Fishkeeping"},{value:"Flag Football",label:"Flag Football"},{value:"Floorball",label:"Floorball"},{value:"Floral Arrangements",label:"Floral Arrangements"},{value:"Flower arranging",label:"Flower arranging"},{value:"Flower collecting and pressing",label:"Flower collecting and pressing"},{value:"Fly Tying",label:"Fly Tying"},{value:"Flying",label:"Flying"},{value:"Footbag",label:"Footbag"},{value:"Football",label:"Football"},{value:"Foraging",label:"Foraging"},{value:"Foreign language learning",label:"Foreign language learning"},{value:"Fossil hunting",label:"Fossil hunting"},{value:"Four Wheeling",label:"Four Wheeling"},{value:"Freshwater Aquariums",label:"Freshwater Aquariums"},{value:"Frisbee Golf \u2013 Frolf",label:"Frisbee Golf \u2013 Frolf"},{value:"Gambling",label:"Gambling"},{value:"Games",label:"Games"},{value:"Gaming (tabletop games and role-playing games)",label:"Gaming (tabletop games and role-playing games)"},{value:"Garage Saleing",label:"Garage Saleing"},{value:"Gardening",label:"Gardening"},{value:"Genealogy",label:"Genealogy"},{value:"Geocaching",label:"Geocaching"},{value:"Ghost hunting",label:"Ghost hunting"},{value:"Glassblowing",label:"Glassblowing"},{value:"Glowsticking",label:"Glowsticking"},{value:"Gnoming",label:"Gnoming"},{value:"Go",label:"Go"},{value:"Go Kart Racing",label:"Go Kart Racing"},{value:"Going to movies",label:"Going to movies"},{value:"Golf",label:"Golf"},{value:"Golfing",label:"Golfing"},{value:"Gongoozling",label:"Gongoozling"},{value:"Graffiti",label:"Graffiti"},{value:"Grip Strength",label:"Grip Strength"},{value:"Guitar",label:"Guitar"},{value:"Gun Collecting",label:"Gun Collecting"},{value:"Gunsmithing",label:"Gunsmithing"},{value:"Gymnastics",label:"Gymnastics"},{value:"Gyotaku",label:"Gyotaku"},{value:"Handball",label:"Handball"},{value:"Handwriting Analysis",label:"Handwriting Analysis"},{value:"Hang gliding",label:"Hang gliding"},{value:"Herping",label:"Herping"},{value:"Hiking",label:"Hiking"},{value:"Home Brewing",label:"Home Brewing"},{value:"Home Repair",label:"Home Repair"},{value:"Home Theater",label:"Home Theater"},{value:"Homebrewing",label:"Homebrewing"},{value:"Hooping",label:"Hooping"},{value:"Horse riding",label:"Horse riding"},{value:"Hot air ballooning",label:"Hot air ballooning"},{value:"Hula Hooping",label:"Hula Hooping"},{value:"Hunting",label:"Hunting"},{value:"Ice hockey",label:"Ice hockey"},{value:"Ice skating",label:"Ice skating"},{value:"Iceskating",label:"Iceskating"},{value:"Illusion",label:"Illusion"},{value:"Impersonations",label:"Impersonations"},{value:"Inline skating",label:"Inline skating"},{value:"Insect collecting",label:"Insect collecting"},{value:"Internet",label:"Internet"},{value:"Inventing",label:"Inventing"},{value:"Jet Engines",label:"Jet Engines"},{value:"Jewelry Making",label:"Jewelry Making"},{value:"Jigsaw Puzzles",label:"Jigsaw Puzzles"},{value:"Jogging",label:"Jogging"},{value:"Judo",label:"Judo"},{value:"Juggling",label:"Juggling"},{value:"Jukskei",label:"Jukskei"},{value:"Jump Roping",label:"Jump Roping"},{value:"Kabaddi",label:"Kabaddi"},{value:"Kart racing",label:"Kart racing"},{value:"Kayaking",label:"Kayaking"},{value:"Keep A Journal",label:"Keep A Journal"},{value:"Kitchen Chemistry",label:"Kitchen Chemistry"},{value:"Kite Boarding",label:"Kite Boarding"},{value:"Kite flying",label:"Kite flying"},{value:"Kites",label:"Kites"},{value:"Kitesurfing",label:"Kitesurfing"},{value:"Knapping",label:"Knapping"},{value:"Knife making",label:"Knife making"},{value:"Knife throwing",label:"Knife throwing"},{value:"Knitting",label:"Knitting"},{value:"Knotting",label:"Knotting"},{value:"Lacemaking",label:"Lacemaking"},{value:"Lacrosse",label:"Lacrosse"},{value:"Lapidary",label:"Lapidary"},{value:"LARPing",label:"LARPing"},{value:"Laser tag",label:"Laser tag"},{value:"Lasers",label:"Lasers"},{value:"Lawn Darts",label:"Lawn Darts"},{value:"Learn to Play Poker",label:"Learn to Play Poker"},{value:"Learning A Foreign Language",label:"Learning A Foreign Language"},{value:"Learning An Instrument",label:"Learning An Instrument"},{value:"Learning To Pilot A Plane",label:"Learning To Pilot A Plane"},{value:"Leather crafting",label:"Leather crafting"},{value:"Leathercrafting",label:"Leathercrafting"},{value:"Lego building",label:"Lego building"},{value:"Legos",label:"Legos"},{value:"Letterboxing",label:"Letterboxing"},{value:"Listening to music",label:"Listening to music"},{value:"Locksport",label:"Locksport"},{value:"Machining",label:"Machining"},{value:"Macram\xe9",label:"Macram\xe9"},{value:"Macrame",label:"Macrame"},{value:"Magic",label:"Magic"},{value:"Mahjong",label:"Mahjong"},{value:"Making Model Cars",label:"Making Model Cars"},{value:"Marbles",label:"Marbles"},{value:"Marksmanship",label:"Marksmanship"},{value:"Martial arts",label:"Martial arts"},{value:"Matchstick Modeling",label:"Matchstick Modeling"},{value:"Meditation",label:"Meditation"},{value:"Metal detecting",label:"Metal detecting"},{value:"Meteorology",label:"Meteorology"},{value:"Microscopy",label:"Microscopy"},{value:"Mineral collecting",label:"Mineral collecting"},{value:"Model aircraft",label:"Model aircraft"},{value:"Model building",label:"Model building"},{value:"Model Railroading",label:"Model Railroading"},{value:"Model Rockets",label:"Model Rockets"},{value:"Modeling Ships",label:"Modeling Ships"},{value:"Models",label:"Models"},{value:"Motor sports",label:"Motor sports"},{value:"Motorcycles",label:"Motorcycles"},{value:"Mountain Biking",label:"Mountain Biking"},{value:"Mountain Climbing",label:"Mountain Climbing"},{value:"Mountaineering",label:"Mountaineering"},{value:"Movie and movie memorabilia collecting",label:"Movie and movie memorabilia collecting"},{value:"Mushroom hunting/Mycology",label:"Mushroom hunting/Mycology"},{value:"Musical Instruments",label:"Musical Instruments"},{value:"Nail Art",label:"Nail Art"},{value:"Needlepoint",label:"Needlepoint"},{value:"Netball",label:"Netball"},{value:"Nordic skating",label:"Nordic skating"},{value:"Orienteering",label:"Orienteering"},{value:"Origami",label:"Origami"},{value:"Owning An Antique Car",label:"Owning An Antique Car"},{value:"Paintball",label:"Paintball"},{value:"Painting",label:"Painting"},{value:"Papermache",label:"Papermache"},{value:"Papermaking",label:"Papermaking"},{value:"Parachuting",label:"Parachuting"},{value:"Paragliding or Power Paragliding",label:"Paragliding or Power Paragliding"},{value:"Parkour",label:"Parkour"},{value:"People Watching",label:"People Watching"},{value:"Photography",label:"Photography"},{value:"Piano",label:"Piano"},{value:"Pigeon racing",label:"Pigeon racing"},{value:"Pinochle",label:"Pinochle"},{value:"Pipe Smoking",label:"Pipe Smoking"},{value:"Planking",label:"Planking"},{value:"Playing music",label:"Playing music"},{value:"Playing musical instruments",label:"Playing musical instruments"},{value:"Playing team sports",label:"Playing team sports"},{value:"Poker",label:"Poker"},{value:"Pole Dancing",label:"Pole Dancing"},{value:"Polo",label:"Polo"},{value:"Pottery",label:"Pottery"},{value:"Powerboking",label:"Powerboking"},{value:"Protesting",label:"Protesting"},{value:"Puppetry",label:"Puppetry"},{value:"Puzzles",label:"Puzzles"},{value:"Pyrotechnics",label:"Pyrotechnics"},{value:"Quilting",label:"Quilting"},{value:"R/C Boats",label:"R/C Boats"},{value:"R/C Cars",label:"R/C Cars"},{value:"R/C Helicopters",label:"R/C Helicopters"},{value:"R/C Planes",label:"R/C Planes"},{value:"Racing Pigeons",label:"Racing Pigeons"},{value:"Racquetball",label:"Racquetball"},{value:"Radio-controlled car racing",label:"Radio-controlled car racing"},{value:"Rafting",label:"Rafting"},{value:"Railfans",label:"Railfans"},{value:"Rappelling",label:"Rappelling"},{value:"Rapping",label:"Rapping"},{value:"Reading",label:"Reading"},{value:"Reading To The Elderly",label:"Reading To The Elderly"},{value:"Record collecting",label:"Record collecting"},{value:"Relaxing",label:"Relaxing"},{value:"Renaissance Faire",label:"Renaissance Faire"},{value:"Renting movies",label:"Renting movies"},{value:"Rescuing Abused Or Abandoned Animals",label:"Rescuing Abused Or Abandoned Animals"},{value:"Robotics",label:"Robotics"},{value:"Rock balancing",label:"Rock balancing"},{value:"Rock climbing",label:"Rock climbing"},{value:"Rock Collecting",label:"Rock Collecting"},{value:"Rockets",label:"Rockets"},{value:"Rocking AIDS Babies",label:"Rocking AIDS Babies"},{value:"Roleplaying",label:"Roleplaying"},{value:"Roller derby",label:"Roller derby"},{value:"Roller skating",label:"Roller skating"},{value:"Rugby",label:"Rugby"},{value:"Rugby league football",label:"Rugby league football"},{value:"Running",label:"Running"},{value:"Sailing",label:"Sailing"},{value:"Saltwater Aquariums",label:"Saltwater Aquariums"},{value:"Sand art",label:"Sand art"},{value:"Sand Castles",label:"Sand Castles"},{value:"Scrapbooking",label:"Scrapbooking"},{value:"Scuba diving",label:"Scuba diving"},{value:"Sculling or Rowing",label:"Sculling or Rowing"},{value:"Sculpting",label:"Sculpting"},{value:"Sea glass collecting",label:"Sea glass collecting"},{value:"Seashell collecting",label:"Seashell collecting"},{value:"Self Defense",label:"Self Defense"},{value:"Sewing",label:"Sewing"},{value:"Shark Fishing",label:"Shark Fishing"},{value:"Shooting",label:"Shooting"},{value:"Shooting sport",label:"Shooting sport"},{value:"Shopping",label:"Shopping"},{value:"Shortwave listening",label:"Shortwave listening"},{value:"Singing",label:"Singing"},{value:"Singing In Choir",label:"Singing In Choir"},{value:"Skateboarding",label:"Skateboarding"},{value:"Skeet Shooting",label:"Skeet Shooting"},{value:"Sketching",label:"Sketching"},{value:"Skiing",label:"Skiing"},{value:"Skimboarding",label:"Skimboarding"},{value:"Sky Diving",label:"Sky Diving"},{value:"Skydiving",label:"Skydiving"},{value:"Slack Lining",label:"Slack Lining"},{value:"Slacklining",label:"Slacklining"},{value:"Sleeping",label:"Sleeping"},{value:"Slingshots",label:"Slingshots"},{value:"Slot car racing",label:"Slot car racing"},{value:"Snorkeling",label:"Snorkeling"},{value:"Snowboarding",label:"Snowboarding"},{value:"Soap Making",label:"Soap Making"},{value:"Soapmaking",label:"Soapmaking"},{value:"Soccer",label:"Soccer"},{value:"Socializing with friends/neighbors",label:"Socializing with friends/neighbors"},{value:"Speed Cubing (rubix cube)",label:"Speed Cubing (rubix cube)"},{value:"Speed skating",label:"Speed skating"},{value:"Spelunkering",label:"Spelunkering"},{value:"Spending time with family/kids",label:"Spending time with family/kids"},{value:"Sports",label:"Sports"},{value:"Squash",label:"Squash"},{value:"Stamp Collecting",label:"Stamp Collecting"},{value:"Stand-up comedy",label:"Stand-up comedy"},{value:"Stone collecting",label:"Stone collecting"},{value:"Stone skipping",label:"Stone skipping"},{value:"Storm Chasing",label:"Storm Chasing"},{value:"Storytelling",label:"Storytelling"},{value:"String Figures",label:"String Figures"},{value:"Sudoku",label:"Sudoku"},{value:"Surf Fishing",label:"Surf Fishing"},{value:"Surfing",label:"Surfing"},{value:"Survival",label:"Survival"},{value:"Swimming",label:"Swimming"},{value:"Table football",label:"Table football"},{value:"Table tennis",label:"Table tennis"},{value:"Taekwondo",label:"Taekwondo"},{value:"Tai chi",label:"Tai chi"},{value:"Tatting",label:"Tatting"},{value:"Taxidermy",label:"Taxidermy"},{value:"Tea Tasting",label:"Tea Tasting"},{value:"Tennis",label:"Tennis"},{value:"Tesla Coils",label:"Tesla Coils"},{value:"Tetris",label:"Tetris"},{value:"Textiles",label:"Textiles"},{value:"Texting",label:"Texting"},{value:"Tombstone Rubbing",label:"Tombstone Rubbing"},{value:"Tool Collecting",label:"Tool Collecting"},{value:"Tour skating",label:"Tour skating"},{value:"Toy Collecting",label:"Toy Collecting"},{value:"Train Collecting",label:"Train Collecting"},{value:"Train Spotting",label:"Train Spotting"},{value:"Trainspotting",label:"Trainspotting"},{value:"Traveling",label:"Traveling"},{value:"Treasure Hunting",label:"Treasure Hunting"},{value:"Trekkie",label:"Trekkie"},{value:"Triathlon",label:"Triathlon"},{value:"Tutoring Children",label:"Tutoring Children"},{value:"TV watching",label:"TV watching"},{value:"Ultimate Frisbee",label:"Ultimate Frisbee"},{value:"Urban exploration",label:"Urban exploration"},{value:"Vehicle restoration",label:"Vehicle restoration"},{value:"Video game collecting",label:"Video game collecting"},{value:"Video Games",label:"Video Games"},{value:"Video gaming",label:"Video gaming"},{value:"Videophilia",label:"Videophilia"},{value:"Vintage cars",label:"Vintage cars"},{value:"Violin",label:"Violin"},{value:"Volleyball",label:"Volleyball"},{value:"Volunteer",label:"Volunteer"},{value:"Walking",label:"Walking"},{value:"Warhammer",label:"Warhammer"},{value:"Watching movies",label:"Watching movies"},{value:"Watching sporting events",label:"Watching sporting events"},{value:"Water sports",label:"Water sports"},{value:"Weather Watcher",label:"Weather Watcher"},{value:"Web surfing",label:"Web surfing"},{value:"Weightlifting",label:"Weightlifting"},{value:"Windsurfing",label:"Windsurfing"},{value:"Wine Making",label:"Wine Making"},{value:"Wingsuit Flying",label:"Wingsuit Flying"},{value:"Wood carving",label:"Wood carving"},{value:"Woodworking",label:"Woodworking"},{value:"Working In A Food Pantry",label:"Working In A Food Pantry"},{value:"Working on cars",label:"Working on cars"},{value:"World Record Breaking",label:"World Record Breaking"},{value:"Worldbuilding",label:"Worldbuilding"},{value:"Wrestling",label:"Wrestling"},{value:"Writing",label:"Writing"},{value:"Writing Music",label:"Writing Music"},{value:"Writing Songs",label:"Writing Songs"},{value:"Yo-yoing",label:"Yo-yoing"},{value:"Yoga",label:"Yoga"},{value:"YoYo",label:"YoYo"},{value:"Ziplining",label:"Ziplining"},{value:"Zumba",label:"Zumba"}],oe=(a(369),{firstName:"",lastName:"",username:"",pursuits:[],experienceSelects:[],isTaken:!1,isUpperCase:!1,croppedImage:null,fullImage:null,imageScale:1,imageRotation:0,isSubmitting:!1}),se=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).editor=i.a.createRef(null),n.handleRegisterFailure=n.handleRegisterFailure.bind(Object(m.a)(n)),n.handleTextChange=n.handleTextChange.bind(Object(m.a)(n)),n.handleUsernameChange=ee.a.debounce(function(e){return n.checkUsernameAvailable(e)},1e3),n.handleExperienceSelect=n.handleExperienceSelect.bind(Object(m.a)(n)),n.handleProfileSubmit=n.handleProfileSubmit.bind(Object(m.a)(n)),n.handlePursuitExperienceChange=n.handlePursuitExperienceChange.bind(Object(m.a)(n)),n.handleProfilePhotoChange=n.handleProfilePhotoChange.bind(Object(m.a)(n)),n.handleImageDrop=n.handleImageDrop.bind(Object(m.a)(n)),n.testForSpecialCharacter=n.testForSpecialCharacter.bind(Object(m.a)(n)),n.checkUsernameAvailable=n.checkUsernameAvailable.bind(Object(m.a)(n)),n.clearFile=n.clearFile.bind(Object(m.a)(n)),n.setEditorRef=n.setEditorRef.bind(Object(m.a)(n)),n.rotateImage=n.rotateImage.bind(Object(m.a)(n)),n.scaleImage=n.scaleImage.bind(Object(m.a)(n)),n.state=Object(d.a)({},oe),n}return Object(h.a)(a,[{key:"clearFile",value:function(){this.setState(function(e){return{imageKey:e.imageKey+1,profilePhoto:null}})}},{key:"rotateImage",value:function(e){this.setState({imageRotation:parseFloat(e)})}},{key:"scaleImage",value:function(e){this.setState({imageScale:parseFloat(e)})}},{key:"checkUsernameAvailable",value:function(e){var t=this;return Z.checkUsernameAvailable(e).then(function(e){var a=null;200===e.status?a=!0:204===e.state&&(a=!1),t.setState({isTaken:a})}).catch(function(e){console.log(e)})}},{key:"handleRegisterFailure",value:function(e){return this.setState({isSubmitting:!1}),console.log(e),this.props.firebase.clearBasicUserData()}},{key:"handleTextChange",value:function(e,t){if(e.preventDefault(),this.setState(Object(c.a)({},e.target.name,e.target.value)),"username"===e.target.name){var a=e.target.value;t||this.handleUsernameChange(a)}}},{key:"handleExperienceSelect",value:function(e){var t=[],a=[];if(e){var n,l=Object(W.a)(e);try{for(l.s();!(n=l.n()).done;){var r=n.value;t.push({name:r.value,experience:"Beginner"}),a.push(i.a.createElement("span",{key:r.value},i.a.createElement("label",null,r.value),i.a.createElement("select",{className:"initialcustomization-select",name:r.value,onChange:this.handlePursuitExperienceChange},i.a.createElement("option",{value:"Beginner"},"Beginner"),i.a.createElement("option",{value:"Familiar"},"Familiar"),i.a.createElement("option",{value:"Experienced"},"Experienced"),i.a.createElement("option",{value:"Expert"},"Expert"))))}}catch(o){l.e(o)}finally{l.f()}}this.setState({pursuits:t,experienceSelects:a})}},{key:"handleProfileSubmit",value:function(e){var t=this;if(e.preventDefault(),this.setState({isSubmitting:!0}),this.state.profilePhoto){var a=this.editor.getImage();Promise.all([this.props.firebase.writeBasicUserData(this.state.username,this.state.firstName,this.state.lastName),this.props.firebase.doUsernameUpdate(this.state.username),H.a.canvasToFile(a)]).then(function(e){return Promise.all([Object(H.a)(e[2],{maxWidthOrHeight:250,maxSizeMB:1,fileType:"image/jpeg"}),Object(H.a)(e[2],{maxWidthOrHeight:125,maxSizeMB:1,fileType:"image/jpeg"}),Object(H.a)(e[2],{maxWidthOrHeight:62,maxSizeMB:1,fileType:"image/jpeg"})])}).then(function(e){for(var t=["normal","small","tiny"],a=[],n=0;n<3;n++)a.push(new File([e[n]],t[n],{type:"image/jpeg"}));return a}).then(function(e){var a=new FormData;return a.append(le.USERNAME_FIELD,t.state.username),a.append(le.FIRST_NAME_FIELD,t.state.firstName),a.append(le.LAST_NAME_FIELD,t.state.lastName),a.append(le.PURSUIT_ARRAY_FIELD,JSON.stringify(t.state.pursuits)),a.append(le.CROPPED_IMAGE_FIELD,e[0]),a.append(le.SMALL_CROPPED_IMAGE_FIELD,e[1]),a.append(le.TINY_CROPPED_IMAGE_FIELD,e[2]),Z.createUserProfile(a)}).then(function(e){t.setState({isSubmitting:!1}),201===e.status&&window.location.reload()}).catch(function(e){t.handleRegisterFailure(e)})}else Promise.all([this.props.firebase.writeBasicUserData(this.state.username,this.state.firstName,this.state.lastName),this.props.firebase.doUsernameUpdate(this.state.username)]).then(function(e){var a=new FormData;return a.append(le.USERNAME_FIELD,t.state.username),a.append(le.FIRST_NAME_FIELD,t.state.firstName),a.append(le.LAST_NAME_FIELD,t.state.lastName),a.append(le.PURSUIT_ARRAY_FIELD,JSON.stringify(t.state.pursuits)),Z.createUserProfile(a)}).then(function(e){201===e.status?window.location.reload():alert("Something unexpected happened: ",e.status)}).catch(function(e){t.handleRegisterFailure(e)})}},{key:"handlePursuitExperienceChange",value:function(e){var t,a=this.state.pursuits,n=Object(W.a)(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.name===e.target.name&&(i.experience=e.target.value)}}catch(l){n.e(l)}finally{n.f()}this.setState({pursuits:a})}},{key:"testForSpecialCharacter",value:function(e){return!new RegExp("^[0-9A-Za-z_.]+$").test(e)||/\s/.test(e)}},{key:"handleProfilePhotoChange",value:function(e){this.setState({profilePhoto:e})}},{key:"handleImageDrop",value:function(e){this.setState({profilePhoto:e[0]})}},{key:"setEditorRef",value:function(e){this.editor=e}},{key:"render",value:function(){var e=this,t=""===this.state.username||this.state.isTaken?"Taken":"Available",a=this.state.username!==this.state.username.toLowerCase(),n=a?", But Please Choose Only Lower Case Characters":"",l=this.testForSpecialCharacter(this.state.username),r=l?a?" and No Special Characters Please":", But No Special Characters Please":"",o=this.state,s=o.username,u=o.firstName,c=o.lastName,d=o.pursuits,p=""===s||""===u||""===c||null===d||0===d.length||this.state.isTaken||a||l,h=0!==this.state.pursuits.length?this.state.experienceSelects:i.a.createElement(i.a.Fragment,null);return i.a.createElement("div",{className:"initialcustomization-container"},i.a.createElement("form",{onSubmit:this.handleProfileSubmit},i.a.createElement("h2",null,"Let us know about you!"),i.a.createElement("label",null,"Don't worry this information won't be public if you don't want it to."),i.a.createElement("div",{className:"initialcustomization-content-container"},i.a.createElement("label",null,"Choose a display profile!"),i.a.createElement("input",{key:this.state.imageKey,type:"file",name:le.DISPLAY_PHOTO_FIELD,onChange:function(t){return e.handleProfilePhotoChange(t.target.files[0])}}),this.state.profilePhoto?i.a.createElement(ie,{clearFile:this.clearFile,profilePhoto:this.state.profilePhoto,handleImageDrop:this.handleImageDrop,imageScale:this.state.imageScale,imageRotation:this.state.imageRotation,rotateImage:this.rotateImage,scaleImage:this.scaleImage,setEditorRef:this.setEditorRef}):i.a.createElement("div",{id:"initialcustomization-display-photo-container"})),i.a.createElement("div",{className:"initialcustomization-content-container"},i.a.createElement("label",null,i.a.createElement("p",null,"Choose a username!"),i.a.createElement("p",null,""===this.state.username?"Invalid":t+n+r)),i.a.createElement("input",{type:"text",name:le.USERNAME_FIELD,placeholder:"Username",onChange:function(t){return e.handleTextChange(t,p)}}),i.a.createElement("label",null,"First Name"),i.a.createElement("input",{type:"text",name:le.FIRST_NAME_FIELD,placeholder:"First Name",onChange:this.handleTextChange}),i.a.createElement("label",null,"Last Name"),i.a.createElement("input",{type:"text",name:le.LAST_NAME_FIELD,placeholder:"Last Name",onChange:this.handleTextChange})),i.a.createElement("div",{className:"initialcustomization-content-container"},i.a.createElement("label",null,"Tell us what you want to pursue or choose one from the list!"),i.a.createElement(J,{name:le.PURSUIT_ARRAY_FIELD,onSelect:this.handleExperienceSelect,options:re}),h,i.a.createElement("button",{disabled:p||this.state.isSubmitting,type:"submit"},"Submit"))))}}]),a}(i.a.Component),ue=k(se),ce=a(140),de=function(e){switch(/^\d+$/.test(e)&&(e=parseInt(e)),e){case 0:return"";case 1:return"Challenging";case 2:return"Difficult";default:throw new Error("No Difficulty matched")}},pe=function(e){switch(/^\d+$/.test(e)&&(e=parseInt(e)),e){case 0:case"SETBACK":return"Setback";case 1:case"NEUTRAL":return"";case 2:case"MILESTONE":return"Milestone";default:throw new Error("No Progress Type Matched")}},he=function(e){var t=new Date(e);return{month:["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],day:t.getDate(),year:t.getFullYear()}},me=(a(370),function(e){return e.labels&&e.labels.length>0?e.labels.map(function(e){return i.a.createElement("span",null,i.a.createElement("div",{className:"eventlabels-outer-label-container"},i.a.createElement("div",{className:"eventlabels-inner-label-container"},i.a.createElement("p",null,e))))}):i.a.createElement(i.a.Fragment,null)}),ve=(a(371),function(e){return i.a.createElement("div",{className:"eventtextinfo-text-container"},e.title?i.a.createElement("h4",null,e.title):i.a.createElement(i.a.Fragment,null),e.date?i.a.createElement("p",null,e.date.month,", ",e.date.day,", ",e.date.year," "):i.a.createElement(i.a.Fragment,null),e.pursuit_category?i.a.createElement("div",{className:"eventtextinfo-progression-container"},i.a.createElement("p",null,e.pursuitCategory,2===e.progression?" MileStone":" Progress")):i.a.createElement(i.a.Fragment,null),i.a.createElement("div",{className:"eventtextinfo-dynamic-container"},i.a.createElement("div",{className:"eventtextinfo-all-labels-container"},i.a.createElement(me,{labels:e.labels})),i.a.createElement("div",{className:"eventtextinfo-comment-text-container"},i.a.createElement("p",{className:"eventtextinfo-comment-text"},e.commentCount," Comments"))))}),ge=(a(372),function(e){var t=e.post,a=t.cover_photo_key?Object(X.returnUserImageURL)(t.cover_photo_key):Object(X.returnUserImageURL)(t.image_data[0]),n=t.date?he(t.date):null;return t.cover_photo_key?i.a.createElement("div",null,i.a.createElement("div",{className:"eventherocontent-with-cover-photo-container"},i.a.createElement("img",{alt:"short event cover photo",className:"eventherocontent-cover-photo",src:a})),i.a.createElement(ve,{title:t.title,date:n,pursuitCategory:t.pursuit_category,progression:t.progression,labels:t.labels,commentCount:e.commentCount})):i.a.createElement("div",null,i.a.createElement("div",{className:"eventherocontent-no-cover-photo-container"},i.a.createElement("p",null,t.text_snippet)),i.a.createElement(ve,{title:t.title,date:n,pursuitCategory:t.pursuit_category,progression:t.progression,labels:t.labels,commentCount:e.commentCount}))}),fe=function(e){var t=e.post;return i.a.createElement("div",null,i.a.createElement("div",{className:"event-cover-container"},t.cover_photo_key?i.a.createElement("img",{alt:"event cover photo",className:"event-cover-photo",src:Object(X.returnUserImageURL)(t.cover_photo_key)}):i.a.createElement("p",{className:"no-select"})),i.a.createElement("h4",{className:"event-title-container"},t.title?t.title:t.pursuit_category),t.overview?i.a.createElement("h6",{className:"event-overview-container"},t.overview):i.a.createElement(i.a.Fragment,null))},be=function(e){return e.newProjectView?i.a.createElement("input",{type:"checkbox",defaultChecked:e.isChecked,onClick:function(t){console.log("asf"),e.onProjectEventSelect(e.post,t.target.value)}}):i.a.createElement(i.a.Fragment,null)},Ee=(a(373),function(e){switch(e){case 0:return"event-first-container";case 1:case 2:return"event-middle-container";case 3:return"event-last-container";default:throw new Error("Element Index in Timeline Event is incorrect: ",e)}}),ye=function(e){var t=e.eventData;if(e.isRecentEvents)return i.a.createElement("div",{className:"event-middle-container"},i.a.createElement("div",{onClick:function(){e.disableModalPreview?console.log("Selected, but disabled"):e.onEventClick(t,e.index)}},i.a.createElement(ge,{post:t,commentCount:t.comment_count})),i.a.createElement(be,{post:t,newProjectView:e.newProjectView,isChecked:t.isChecked,onProjectEventSelect:e.onProjectEventSelect}));if(e.mediaType===y||"PROJECT_EVENT"===e.mediaType)return i.a.createElement("div",{className:null!==e.columnIndex?Ee(e.columnIndex):"event-middle-container"},i.a.createElement("div",{onClick:e.disableModalPreview?function(){return console.log("Selected")}:function(){return e.onEventClick(t,e.eventIndex,e.columnIndex)}},i.a.createElement(ge,{post:t,commentCount:t.comment_count})),i.a.createElement(be,{post:t,newProjectView:e.newProjectView,isChecked:t.isChecked,onProjectEventSelect:e.onProjectEventSelect}));if("PROJECT"===e.mediaType)return i.a.createElement("div",{onClick:e.disableModalPreview?function(){return console.log("Selected")}:function(){return e.onProjectClick(t)},className:null!==e.columnIndex?Ee(e.columnIndex):"event-middle-container"},i.a.createElement(fe,{post:t}));throw new Error("No props.mediaType matched")},Pe=a(151),Se=a(38),De=function(e){return i.a.createElement(Se.a,{className:e.classStyle,minRows:e.minRows,onChange:function(t){return e.handleTextChange(t.target.value)},value:e.commentText})},Oe=(a(374),function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={overallVoteScore:n.props.score,previousVote:0,isReplyBoxToggled:!1,replyText:""},n.toggleReplyBox=n.toggleReplyBox.bind(Object(m.a)(n)),n.setReplyText=n.setReplyText.bind(Object(m.a)(n)),n.handleVote=n.handleVote.bind(Object(m.a)(n)),n.postReply=n.postReply.bind(Object(m.a)(n)),n.isReplyTextInvalid=n.isReplyTextInvalid.bind(Object(m.a)(n)),n.renderThreadIndicators=n.renderThreadIndicators.bind(Object(m.a)(n)),n.cancelTextInput=n.cancelTextInput.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.likes.includes(this.props.visitorProfilePreviewID)?this.setState({previousVote:1}):this.props.dislikes.includes(this.props.visitorProfilePreviewID)&&this.setState({previousVote:-1})}},{key:"setReplyText",value:function(e){this.setState({replyText:e})}},{key:"toggleReplyBox",value:function(){this.setState(function(e){return{isReplyBoxToggled:!e.isReplyBoxToggled}})}},{key:"handleVote",value:function(e){var t=this,a=this.state.overallVoteScore,n=this.state.previousVote,i=n+e,l=i>-1&&i<1?e:i,r=e,o=e;return(i<-1||i>1)&&(r=0),i<-1&&(o=1),i>1?o=-1:0===i&&(-1===n?o=2:1===n&&(o=-2)),this.setState({overallVoteScore:a+o,previousVote:r}),Z.voteOnComment(this.props.visitorProfilePreviewID,this.props.commentID,l).then(function(e){console.log(e)}).catch(function(e){console.log(e),console.log("Something went wrong with the server."),t.setState({overallVoteScore:a,previousVote:n})})}},{key:"isReplyTextInvalid",value:function(){return 0===this.state.replyText.replaceAll("\\s+","").length||0===this.state.replyText.length}},{key:"postReply",value:function(){var e=this;if(!this.isReplyTextInvalid()){var t=this.props.ancestors;return t.push(this.props.commentID),Z.postReply(this.props.postID,this.props.visitorProfilePreviewID,JSON.stringify(t),this.state.replyText).then(function(t){alert("Comment added! Refresh the page to see!"),e.toggleReplyBox(!1)})}alert("You need to write something")}},{key:"cancelTextInput",value:function(){this.isReplyTextInvalid()?this.setState({replyText:"",isReplyBoxToggled:!1}):window.confirm("Are you sure you want discard your comment?")&&this.setState({isReplyBoxToggled:!1})}},{key:"renderThreadIndicators",value:function(e){for(var t=[],a=0;a<e;a++)t.push(i.a.createElement("div",{className:"singlecomment-thread-indicator"}));return t}},{key:"render",value:function(){var e=this,t=this.props.level>1?"singlecomment-multiple-thread-style":"",a=this.props.displayPhoto?Object(X.returnUserImageURL)(this.props.displayPhoto):X.TEMP_PROFILE_PHOTO_URL;return i.a.createElement("div",{className:t},this.props.level>1?i.a.createElement("div",{className:"singlecomment-thread-indicator-container"},this.renderThreadIndicators(this.props.level-1)):null,i.a.createElement("div",{className:"singlecomment-main-container"},i.a.createElement("div",{className:"singlecomment-header-container"},i.a.createElement("div",{className:"singlecomment-display-photo-container"},i.a.createElement("img",{alt:"Single Comment Display Photo Url",src:a})),i.a.createElement("div",{className:"singlecomment-username-container"},i.a.createElement("p",null,this.props.username))),i.a.createElement("div",{className:"singlecomment-body-container"},i.a.createElement("div",{className:"singlecomment-thread-indicator-container"},this.renderThreadIndicators(1)),i.a.createElement("div",{className:"singlecomment-main-content-container"},i.a.createElement("div",{className:"singlecomment-comment-container",key:this.props.commentID,onMouseOver:function(){return e.props.onMouseOver(e.props.commentID)},onMouseOut:function(){return e.props.onMouseOut(e.props.commentID)},onClick:function(){return e.props.onMouseClick(e.props.commentID)}},i.a.createElement("p",null,this.props.commentText)),i.a.createElement("div",{className:"singlecomment-management-container"},i.a.createElement("button",{onClick:function(){return e.handleVote(1)}},"Upvote"),i.a.createElement("p",null,this.state.overallVoteScore),i.a.createElement("button",{onClick:function(){return e.handleVote(-1)}},"Downvote"),i.a.createElement("button",{onClick:function(){return e.toggleReplyBox()}},"Reply")),i.a.createElement("div",null,this.state.isReplyBoxToggled?i.a.createElement(i.a.Fragment,null,i.a.createElement(De,{classStyle:"",minRows:4,handleTextChange:this.setReplyText,commentText:this.state.replyText}),i.a.createElement("button",{onClick:this.cancelTextInput},"Cancel"),i.a.createElement("button",{onClick:this.postReply},"Reply")):i.a.createElement(i.a.Fragment,null))))))}}]),a}(i.a.Component)),Ie=(a(375),function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={windowType:n.props.windowType,commentText:"",loadingComments:!0},n.renderCommentSectionType=n.renderCommentSectionType.bind(Object(m.a)(n)),n.renderCommentInput=n.renderCommentInput.bind(Object(m.a)(n)),n.renderCommentThreads=n.renderCommentThreads.bind(Object(m.a)(n)),n.recursiveRenderComments=n.recursiveRenderComments.bind(Object(m.a)(n)),n.handleCommentTextChange=n.handleCommentTextChange.bind(Object(m.a)(n)),n.handleCommentPost=n.handleCommentPost.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.commentIDArray.length>0){if(this.props.visitorUsername)return Promise.all([Z.getComments(JSON.stringify(this.props.commentIDArray),this.state.windowType),Z.getUserPreviewID(this.props.visitorUsername)]).then(function(t){e.setState({visitorProfilePreviewID:t[1].data.userPreviewID,loadingComments:!1},function(){e.props.postType===D?e.props.passAnnotationData(t[0].data.rootComments,t[1].data.userPreviewID):e.props.passAnnotationData(t[0].data.rootComments,null)})});Z.getComments(JSON.stringify(this.props.commentIDArray),this.state.windowType).then(function(t){e.setState({loadingComments:!1},function(){e.props.postType===D?e.props.passAnnotationData(t.data.rootComments,null):e.props.passAnnotationData(t[0].data.rootComments,null)})})}else{if(this.props.visitorUsername)return Z.getUserPreviewID(this.props.visitorUsername).then(function(t){e.setState({visitorProfilePreviewID:t.data.userPreviewID,loadingComments:!1},function(){e.props.postType===D&&e.props.passAnnotationData(null,t.data.userPreviewID)})});this.setState({loadingComments:!1},function(){e.props.postType===D&&e.props.passAnnotationData(null,null)})}}},{key:"handleCommentTextChange",value:function(e){this.setState({commentText:e})}},{key:"handleCommentPost",value:function(){var e=this;return Z.postComment(this.state.visitorProfilePreviewID,this.state.commentText,this.props.postID,0).then(function(t){var a=t.data.rootCommentIDArray;return Z.refreshComments(JSON.stringify(a)).then(function(t){e.props.onCommentDataInjection(e.props.postIndex,t.data.rootComments,e.props.selectedPostFeedType)})}).then(function(){return alert("Success!")})}},{key:"renderCommentSectionType",value:function(e){if(this.state.loadingComments||!this.props.fullCommentData)return i.a.createElement("div",null,"Loading...");if(e===P)return this.renderCommentThreads(this.props.fullCommentData);if(e===S)return this.renderCommentThreads(this.props.fullCommentData);throw new Error("No viewing modes matched")}},{key:"recursiveRenderComments",value:function(e,t){var a=t+1,n=e.annotation?JSON.parse(e.annotation.data):null,l=e.comment?e.comment:n.text;if(e.replies){var r=[];e.replies.sort(function(e,t){return e.createdAt<t.createdAt?-1:e.createdAt>t.createdAt?1:0});var o,s=Object(W.a)(e.replies);try{for(s.s();!(o=s.n()).done;){var u=o.value;r.push(this.recursiveRenderComments(u,a))}}catch(c){s.e(c)}finally{s.f()}return i.a.createElement("div",null,i.a.createElement(Oe,{level:a,postID:this.props.postID,visitorProfilePreviewID:this.state.visitorProfilePreviewID,visitorUsername:this.props.visitorUsername,commentID:e._id,ancestors:e.ancestor_post_ids,username:e.username,commentText:l,score:e.score,likes:e.likes,dislikes:e.dislikes,displayPhoto:e.display_photo_key,annotation:n,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,onMouseClick:this.props.onMouseClick}),i.a.createElement("div",{className:"comments-reply-container"},r))}return i.a.createElement(Oe,{level:a,postID:this.props.postID,visitorProfilePreviewID:this.state.visitorProfilePreviewID,commentID:e._id,ancestors:e.ancestor_post_ids,username:e.username,commentText:l,likes:e.likes,dislikes:e.dislikes,displayPhoto:e.display_photo_key,score:e.score,annotation:n,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,onMouseClick:this.props.onMouseClick})}},{key:"renderCommentThreads",value:function(e){var t,a=[],n=Object(W.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;a.push(this.recursiveRenderComments(i,0))}}catch(l){n.e(l)}finally{n.f()}return a}},{key:"renderCommentInput",value:function(e){return this.props.visitorUsername?i.a.createElement("div",{className:e===P?"comments-collapsed-input-container":"comments-expanded-input-container"},i.a.createElement(De,{classStyle:e===P?"comments-collapsed-input":"comments-expanded-input",minRows:4,handleTextChange:this.handleCommentTextChange,commentText:this.state.commentText}),i.a.createElement("div",null,i.a.createElement("button",{disabled:0===this.state.commentText.trim().length,onClick:this.handleCommentPost},"Add Comment"),this.props.isImageOnly?i.a.createElement("button",{onClick:this.props.onPromptAnnotation},"Annotate"):null)):i.a.createElement("div",null,i.a.createElement("p",null,"You must sign in before you can leave a comment."))}},{key:"render",value:function(){return this.state.windowType===P?i.a.createElement("div",{className:"comments-main-container"},this.renderCommentSectionType(P),this.renderCommentInput(P)):this.state.windowType===S?i.a.createElement("div",{className:"comments-main-container"},this.renderCommentInput(S),this.renderCommentSectionType(S),i.a.createElement("br",null),i.a.createElement("br",null)):void 0}}]),a}(i.a.Component)),Ce=(a(376),function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),l=a[0],r=a[1],s=e.date?he(e.date):null;return i.a.createElement("div",{className:"postheader-main-container"},i.a.createElement("div",{className:"postheader-author-information"},i.a.createElement("div",{className:"postheader-display-photo-container"},i.a.createElement("img",{src:e.displayPhoto?Object(X.returnUserImageURL)(e.displayPhoto):X.TEMP_PROFILE_PHOTO_URL})),i.a.createElement("div",{className:"postheader-text-information-container"},i.a.createElement("h4",null,e.username),s?i.a.createElement("p",null,s.month,", ",s.day,", ",s.year," "):i.a.createElement(i.a.Fragment,null))),e.isOwnProfile?function(){var t=l?i.a.createElement("div",{id:"postheader-button-pop-up"},i.a.createElement("button",{onClick:e.onDeletePost},"Remove"),i.a.createElement("button",{onClick:function(){return e.onEditClick("EDIT_STATE")}},"Edit")):i.a.createElement(i.a.Fragment,null);return i.a.createElement("div",{id:"postheader-main-button-container"},i.a.createElement("button",{onClick:function(){return r(!l)}},"..."),t)}():null)}),we=(a(377),function(e){var t=e.isPaginated&&e.textData?i.a.createElement("pre",null,e.textData[e.index]):i.a.createElement("pre",null,e.textData);return console.log(e.isPaginated&&e.textData),e.length<1e3?i.a.createElement("div",{id:"tiny-amount-text-container"},t):i.a.createElement("div",{id:"medium-amount-text-container"},t)}),ke=(a(378),function(e){return i.a.createElement("div",null,i.a.createElement("div",{className:"shortpostmetainfo-stat-container"},e.progression?i.a.createElement("p",null,pe(e.progression)):i.a.createElement(i.a.Fragment,null),e.difficulty?i.a.createElement("p",null,de(e.difficulty)):null,e.pursuit?i.a.createElement("p",null,e.pursuit):i.a.createElement(i.a.Fragment,null),e.min?i.a.createElement("p",null,e.min," minutes"):i.a.createElement(i.a.Fragment,null),i.a.createElement(me,{labels:e.labels})),i.a.createElement("div",{className:"shortpostmetainfo-text-container"},i.a.createElement("p",null,e.isPaginated&&e.textData?e.textData[e.index]:e.textData)))}),Te=(a(379),function(e){return i.a.createElement("div",{className:"textcontainer-main-container"},i.a.createElement("h4",null,e.username),e.validFilesLength>1&&!e.isPaginated?i.a.createElement("button",{onClick:e.onPaginatedChange},"Caption Photos Individually"):i.a.createElement(i.a.Fragment,null),e.validFilesLength>1&&e.isPaginated?i.a.createElement("button",{onClick:e.onPaginatedChange},"Return to Single Caption"):i.a.createElement(i.a.Fragment,null),i.a.createElement(Se.a,{id:"textcontainer-text-input",placeholder:"Write something here.",onChange:function(t){return e.onTextChange(t.target.value)},minRows:10,value:e.isPaginated?e.textPageText[e.imageIndex]:e.textPageText}),i.a.createElement("p",null,e.validFilesLength>1?e.imageIndex+1:null))}),_e=a(314),Re=a.n(_e),xe=function(e){var t=e.className,a=e.style,n=e.onClick;return i.a.createElement("div",{className:t,style:"left"===e.direction?Object(d.a)(Object(d.a)({},a),{},{display:"block",left:"5%",zIndex:"1",color:"brown"}):Object(d.a)(Object(d.a)({},a),{},{display:"block",right:"5%",zIndex:"1"}),onClick:n})},je=a(146),Me=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={annotation:{}},n.onChange=n.onChange.bind(Object(m.a)(n)),n.onSubmit=n.onSubmit.bind(Object(m.a)(n)),n.renderEditor=n.renderEditor.bind(Object(m.a)(n)),n.activeAnnotationComparator=n.activeAnnotationComparator.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"onChange",value:function(e){this.setState({annotation:e})}},{key:"onSubmit",value:function(e){this.setState({annotation:{}},this.props.onAnnotationSubmit(e))}},{key:"renderEditor",value:function(e){var t=e.annotation.geometry;return t?(console.log(t),i.a.createElement("div",{style:{background:"white",borderRadius:3,position:"absolute",zIndex:9999,left:"".concat(t.x,"%"),top:"".concat(t.y+t.height,"%")}},i.a.createElement("div",null,"Custom Editor"),i.a.createElement(Se.a,{onChange:function(t){return e.onChange(Object(d.a)(Object(d.a)({},e.annotation),{},{data:Object(d.a)(Object(d.a)({},e.annotation.data),{},{text:t.target.value})}))}}),i.a.createElement("button",{onClick:e.onSubmit},"Comment"))):null}},{key:"activeAnnotationComparator",value:function(e,t){return e.data.id===t}},{key:"render",value:function(){return i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(je.a,{src:this.props.imageSource,alt:"Two pebbles anthropomorphized holding hands",annotations:this.props.annotations,activeAnnotationComparator:this.activeAnnotationComparator,activeAnnotations:this.props.activeAnnotations,type:this.state.type,value:this.state.annotation,onChange:this.onChange,onSubmit:this.onSubmit,renderEditor:this.renderEditor}))}}]),a}(i.a.Component),Le=(a(153),a(154),a(211),{className:"slider-settings",speed:500,slidesToShow:1,slidesToScroll:1,centerPadding:0,nextArrow:i.a.createElement(xe,{direction:"right"}),prevArrow:i.a.createElement(xe,{direction:"left"})}),Ae=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={imageArray:null,displayedItemCount:0},n.renderImageContainers=n.renderImageContainers.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._isMounted&&this.setState({imageArray:this.props.imageArray})}},{key:"componentDidUpdate",value:function(e){this.props.imageArray!==e.imageArray&&this.setState({imageArray:this.props.imageArray})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"renderImageContainers",value:function(e){var t=this,a=0;return e?this.state.imageArray.map(function(e){return i.a.createElement("div",{className:"imageslider-image-container",key:a++},t.props.disableAnnotations?i.a.createElement("img",{alt:"",key:a++,src:e}):i.a.createElement(Me,{imageSource:e,annotations:t.props.annotations,activeAnnotations:t.props.activeAnnotations,onAnnotationSubmit:t.props.onAnnotationSubmit}))}):i.a.createElement("p",null,"IMAGE IS STILL LOADING")}},{key:"render",value:function(){var e=this;return i.a.createElement(Re.a,Object.assign({afterChange:function(t){return e.props.onIndexChange(t)}},Le),this.renderImageContainers(!!this.state.imageArray))}}]),a}(i.a.Component),Fe=i.a.memo(Ae),Ue=(a(396),function(e){var t=function(){return i.a.createElement(Te,{validFilesLength:e.eventData.image_data.length,isPaginated:e.isPaginated,onPaginatedChange:e.onPaginatedChange,onTextChange:e.onTextChange,textPageText:e.textData,imageIndex:e.imageIndex})};if(e.eventData.image_data.length){var a=e.eventData.image_data,n=[];return e.eventData.image_data.length>0&&(n=(n=a).map(function(e){return Object(X.returnUserImageURL)(e)})),i.a.createElement("div",{className:"shortreeditor-main-container"},i.a.createElement("div",{className:"shortreeditor-hero-container"},i.a.createElement(Fe,{disableAnnotations:!0,onIndexChange:e.onIndexChange,imageArray:n})),i.a.createElement("div",{className:"shortreeditor-side-container"},t()))}return t()}),Ne=(a(397),function(e){var t=Object(n.useState)(e.difficulty),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)(e.date),u=Object(o.a)(s,2),c=u[0],d=u[1],p=Object(n.useState)(null),h=Object(o.a)(p,2),m=h[0],v=h[1],g=Object(n.useState)(e.progression),f=Object(o.a)(g,2),b=f[0],E=f[1],y=Object(n.useState)(e.previewTitle),P=Object(o.a)(y,2),S=P[0],I=P[1],C=Object(n.useState)(""),w=Object(o.a)(C,2),k=w[0],T=w[1],_=Object(n.useState)(e.preferredPostPrivacy),R=Object(o.a)(_,2),x=R[0],j=R[1],M=Object(n.useState)(e.selectedPursuit?e.selectedPursuit:null),L=Object(o.a)(M,2),A=L[0],F=L[1],U=Object(n.useState)(!1),N=Object(o.a)(U,2),B=N[0],V=N[1],G=Object(n.useState)(!1),K=Object(o.a)(G,2),Y=K[0],z=K[1],q=Object(n.useState)(null),X=Object(o.a)(q,2),Q=X[0],$=X[1],te=Object(n.useState)(null!==e.coverPhotoKey&&e.isUpdateToPost),ae=Object(o.a)(te,2),ne=ae[0],ie=ae[1],re=Object(n.useState)(e.coverPhotoKey),oe=Object(o.a)(re,2),se=oe[0],ue=oe[1],ce=Object(n.useState)(!1),he=Object(o.a)(ce,2),me=he[0],ve=he[1],ge=Object(n.useState)(0),fe=Object(o.a)(ge,2),be=fe[0],Ee=fe[1],ye=Object(n.useState)(!1),Pe=Object(o.a)(ye,2),De=Pe[0],Oe=Pe[1],Ie=Object(n.useState)(null),Ce=Object(o.a)(Ie,2),we=Ce[0],ke=Ce[1],Te=[],_e=function(){ie(!1),!me&&null!==Q&&window.confirm("Are you sure you want to remove your current cover photo?")?($(null),Ee(be+1)):!me&&window.confirm("Are you sure you want to remove your saved cover photo?")?ve(!0):me&&ve(!1)},Re=function(e){return Z.createPost(e).then(function(e){Oe(!1),201===e.status?Me():Le()}).catch(function(e){Oe(!1),console.log(e.error),alert(e)})},xe=function(e){return Z.updatePost(e).then(function(e){Oe(!1),200===e.status?Me():Le()}).catch(function(e){console.log(e.error),Oe(!1),alert(e)})},je=function(){Oe(!0);var t=new FormData;if(t.append(le.DATE_FIELD,c),t.append(le.POST_TYPE_FIELD,e.postType),t.append(le.USERNAME_FIELD,e.username),t.append(le.IS_PAGINATED_FIELD,e.isPaginated),t.append(le.PROGRESSION_FIELD,b),e.displayPhoto&&t.append(le.DISPLAY_PHOTO_FIELD,e.displayPhoto),l&&t.append(le.DIFFICULTY_FIELD,l),S&&t.append(le.TITLE_FIELD,ee.a.trim(S)),x&&t.append(le.POST_PRIVACY_TYPE_FIELD,x),A&&t.append(le.PURSUIT_FIELD,A),m&&t.append(le.MIN_DURATION_FIELD,m),k&&t.append(le.SUBTITLE_FIELD,ee.a.trim(k)),we){var a,n=Object(W.a)(we);try{for(n.s();!(a=n.n()).done;){var i=a.value;t.append(le.LABELS_FIELD,i.value)}}catch(u){n.e(u)}finally{n.f()}}if(e.textData&&t.append(le.TEXT_DATA_FIELD,e.postType!==D||e.isPaginated?JSON.stringify(e.textData):e.textData),e.imageArray&&e.imageArray.length>0){var r,o=Object(W.a)(e.imageArray);try{for(o.s();!(r=o.n()).done;){var s=r.value;t.append(le.IMAGES_FIELD,s)}}catch(u){o.e(u)}finally{o.f()}}!function(t,a){if(a===D){if(e.isUpdateToPost)return t.append(le.POST_ID_FIELD,e.postID),t.append(le.REMOVE_COVER_PHOTO,me),se?e.coverPhoto||e.coverPhotoKey?(t.append(le.COVER_PHOTO_FIELD,e.coverPhoto),xe(t)):alert("One moment friend, I'm almost done compressing\n                        your photo"):!se&&e.coverPhotoKey?Z.deletePhotoByKey(e.coverPhotoKey).then(function(){return xe(t)}):xe(t);if(se){if(!e.coverPhoto)return alert("One moment friend, I'm almost\n                                     done compressing your photo");t.append(le.COVER_PHOTO_FIELD,e.coverPhoto)}return Re(t)}if(a===O){if(e.isUpdateToPost)return t.append(le.POST_ID_FIELD,e.postID),t.append(le.REMOVE_COVER_PHOTO,me),ne?Q||e.coverPhotoKey?(t.append(le.COVER_PHOTO_FIELD,Q),xe(t)):alert("One moment friend, I'm almost \n                                    done compressing your photo"):e.coverPhotoKey&&me?Z.deletePhotoByKey(e.coverPhotoKey).then(function(){return xe(t)}):xe(t);if(ne){if(!Q)return alert("One moment friend, I'm almost \n                                    done compressing your photo");t.append(le.COVER_PHOTO_FIELD,Q)}return Re(t)}throw new Error("No Content Type matched in reviewpost")}(t,e.postType)},Me=function(){alert("Post Successful! You will see your post soon."),e.closeModal(),window.location.reload()},Le=function(){V(!1),z(!0)},Ae=(e.postType,i.a.createElement("div",null,i.a.createElement("h2",null,"Add your metadata!"),i.a.createElement("p",null,"Optional of course"))),Fe=e.postType===O?i.a.createElement(Se.a,{name:"subtitle",id:"review-post-text",placeholder:"Create an Optional Description",onChange:function(e){return T(e.target.value)},maxLength:140}):null;Te.push(i.a.createElement("option",{value:null}));for(var Ue=1;Ue<e.pursuitNames.length;Ue++){var Ne=e.pursuitNames[Ue];Te.push(i.a.createElement("option",{key:Ne,value:Ne},Ne))}return i.a.createElement("div",{id:"reviewpost-small-window"},i.a.createElement("div",null,i.a.createElement("div",null,Ae,i.a.createElement("div",null,i.a.createElement("span",null,i.a.createElement("button",{value:e.previousState,onClick:function(t){return function(t){if(e.postType===D)e.setPostStage(t);else{if(e.postType!==O)throw new Error("No value matched for return click.");e.setPostStage(t,!1)}}(t.target.value)}},"Return")))),i.a.createElement("div",{className:"reviewpost-button-container"},i.a.createElement("label",null,"Preview Title"),i.a.createElement(Se.a,{name:"title",placeholder:"Create an Optional Preview Title Text",value:S||null,onChange:function(e){return I(e.target.value)},maxLength:100}),Fe,function(){if(e.postType===D)return e.isUpdateToPost||!e.isUpdateToPost&&e.imageArray?i.a.createElement("div",null,i.a.createElement("label",null,"Use First Image For Thumbnail"),i.a.createElement("input",{type:"checkbox",defaultChecked:se,onChange:function(){ue(!se)}})):null;if(e.postType===O)return i.a.createElement("div",null,e.coverPhotoKey?i.a.createElement("label",null,"Upload New Cover Photo?"):i.a.createElement("label",null,"Upload a Cover Photo"),i.a.createElement("input",{type:"file",key:be,onChange:function(e){return function(e){if(e)return ie(!0),Object(H.a)(e,{maxSizeMB:.5,maxWidthOrHeight:250}).then(function(e){$(new File([e],"Cover"))})}(e.target.files[0])}}),e.coverPhotoKey||ne?i.a.createElement("button",{onClick:_e},me?"Keep Saved Cover Photo":"Remove Existing Cover Photo"):null);throw new Error("No Post Types Matched for Cover Photo Controls")}(),i.a.createElement("label",null,"Date"),i.a.createElement("input",{type:"date",value:c,onChange:function(e){return d(e.target.value)}}),i.a.createElement("label",null,"Pursuit"),i.a.createElement("select",{name:"pursuit-category",value:A,onChange:function(e){return F(e.target.value)}},Te),i.a.createElement("label",null,"Total Minutes"),i.a.createElement("input",{type:"number",value:e.min,min:0,onChange:function(e){return v(e.target.value)}}),i.a.createElement("label",null,"Difficulty"),i.a.createElement("p",null,de(l)),i.a.createElement("input",{defaultValue:l,type:"range",step:1,min:0,max:2,onClick:function(e){return r(e.target.value)}}),i.a.createElement("label",null,"Progress"),i.a.createElement("p",null,pe(b)),i.a.createElement("input",{defaultValue:b,type:"range",step:1,min:0,max:2,onClick:function(e){return E(e.target.value)}})),i.a.createElement("div",null,i.a.createElement("label",null,"Tags"),i.a.createElement(J,{options:e.labels,name:"Tags",onSelect:ke})),i.a.createElement("div",{className:"reviewpost-button-container"},i.a.createElement("p",null,"Post to:"),i.a.createElement("div",null,i.a.createElement("select",{name:"posts",id:"postPrivacyType",value:e.preferredPostPrivacy?e.preferredPostPrivacy:"PUBLIC_FEED",onChange:function(e){return j(e.target.value)}},i.a.createElement("option",{value:"PRIVATE"},"Make post private on your page"),i.a.createElement("option",{value:"PERSONAL_PAGE"},"Make post public on your page:"),i.a.createElement("option",{value:"PUBLIC_FEED"},"Post to your feed and page"))),i.a.createElement("button",{onClick:function(e){return je()},disabled:De},e.isUpdateToPost?De?"Updating!":"Update!":De?"Posting!":"Post!")),Y?i.a.createElement("p",null,"An Error Occured. Please try again. "):i.a.createElement(i.a.Fragment,null),B?i.a.createElement("div",null,"  ",i.a.createElement("p",null," Loading..."),"  "):i.a.createElement(i.a.Fragment,null)))}),Be=(a(398),function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={annotation:{}},n.activeAnnotationComparator=n.activeAnnotationComparator.bind(Object(m.a)(n)),n.onAnnotationChange=n.onAnnotationChange.bind(Object(m.a)(n)),n.onAnnotationSubmit=n.onAnnotationSubmit.bind(Object(m.a)(n)),n.renderEditor=n.renderEditor.bind(Object(m.a)(n)),n.renderPromptOverlay=n.renderPromptOverlay.bind(Object(m.a)(n)),n.renderImageControls=n.renderImageControls.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"onAnnotationChange",value:function(e){this.setState({annotation:e})}},{key:"onAnnotationSubmit",value:function(e){this.setState({annotation:{}},this.props.onAnnotationSubmit(e))}},{key:"renderEditor",value:function(e){var t=e.annotation.geometry;return t?i.a.createElement("div",{style:{background:"white",borderRadius:3,position:"absolute",zIndex:9999,left:"".concat(t.x,"%"),top:"".concat(t.y+t.height,"%")}},i.a.createElement("div",null,"Custom Editor"),i.a.createElement(Se.a,{onChange:function(t){return e.onChange(Object(d.a)(Object(d.a)({},e.annotation),{},{data:Object(d.a)(Object(d.a)({},e.annotation.data),{},{text:t.target.value})}))}}),i.a.createElement("button",{onClick:e.onSubmit},"Comment")):null}},{key:"renderPromptOverlay",value:function(){return i.a.createElement("div",{style:{background:"rgba(0, 0, 0, 0.3)",color:"white",padding:5,pointerEvents:"none",position:"absolute",top:5,left:5}},"Click and Drag to create an annotation!")}},{key:"activeAnnotationComparator",value:function(e,t){return e.data.id===t}},{key:"renderImageControls",value:function(e){var t=this;return i.a.createElement("div",null,this.props.imageArray.length>1?i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{onClick:function(){return t.props.handleArrowPress(-1)}},"Previous"),i.a.createElement("button",{onClick:function(){return t.props.handleArrowPress(1)}},"Next")):null,e===S?i.a.createElement("button",{onClick:this.props.toggleAnnotations},this.props.areAnnotationsHidden?"Show Annotations":"Hide Annotations"):i.a.createElement(i.a.Fragment,null))}},{key:"render",value:function(){var e,t=this.props.hideAnnotations||this.props.annotateButtonPressed?[]:this.props.annotations;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:this.props.newPost?"customimageslider-new-post-hero-container":(e=this.props.windowType,e===S?"customimageslider-hero-container customimageslider-expanded":"customimageslider-hero-container")},i.a.createElement(je.a,{src:this.props.imageArray[this.props.imageIndex],alt:"Image Display Goes Here",activeAnnotations:this.props.activeAnnotations,annotations:t,disableOverlay:this.props.hideAnnotations||!this.props.visitorProfilePreviewID,disableAnnotation:this.props.windowType===P||!this.props.visitorProfilePreviewID,value:this.state.annotation,renderEditor:this.renderEditor,activeAnnotationComparator:this.activeAnnotationComparator,onChange:this.onAnnotationChange,onSubmit:this.onAnnotationSubmit})),this.props.showPromptOverlay?i.a.createElement("p",null,"Click on a point in the image and drag!"):null,this.renderImageControls(this.props.windowType))}}]),a}(i.a.Component)),Ve=(a(399),function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={annotations:null,activeAnnotations:[],fullCommentData:[],visitorProfilePreviewID:"",areAnnotationsHidden:!0,selectedAnnotationIndex:null,imageIndex:0,selectedFiles:[],validFiles:[],unsupportedFiles:[],showPromptOverlay:!1,date:n.props.eventData.date,min:n.props.eventData.min_duration,pursuitCategory:n.props.eventData.pursuit_category,isPaginated:n.props.eventData.is_paginated,progression:n.props.eventData.progression,postDisabled:!0,window:E,tempTextForEdit:n.props.textData},n.heroRef=i.a.createRef(),n.toggleAnnotations=n.toggleAnnotations.bind(Object(m.a)(n)),n.passAnnotationData=n.passAnnotationData.bind(Object(m.a)(n)),n.returnValidAnnotations=n.returnValidAnnotations.bind(Object(m.a)(n)),n.retrieveThumbnail=n.retrieveThumbnail.bind(Object(m.a)(n)),n.renderComments=n.renderComments.bind(Object(m.a)(n)),n.renderImageSlider=n.renderImageSlider.bind(Object(m.a)(n)),n.handleArrowPress=n.handleArrowPress.bind(Object(m.a)(n)),n.handlePromptAnnotation=n.handlePromptAnnotation.bind(Object(m.a)(n)),n.handleMouseOver=n.handleMouseOver.bind(Object(m.a)(n)),n.handleMouseOut=n.handleMouseOut.bind(Object(m.a)(n)),n.handleMouseClick=n.handleMouseClick.bind(Object(m.a)(n)),n.handleAnnotationSubmit=n.handleAnnotationSubmit.bind(Object(m.a)(n)),n.handleWindowChange=n.handleWindowChange.bind(Object(m.a)(n)),n.handleIndexChange=n.handleIndexChange.bind(Object(m.a)(n)),n.handleTextChange=n.handleTextChange.bind(Object(m.a)(n)),n.handlePaginatedChange=n.handlePaginatedChange.bind(Object(m.a)(n)),n.handleModalLaunch=n.handleModalLaunch.bind(Object(m.a)(n)),n.handleCommentDataInjection=n.handleCommentDataInjection.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){for(var e=[],t=0;t<this.props.eventData.image_data.length;t++)e.push([]);this.setState({annotations:e})}},{key:"toggleAnnotations",value:function(){this.state.areAnnotationsHidden?this.setState({areAnnotationsHidden:!1,annotateButtonPressed:!1}):this.setState({areAnnotationsHidden:!0,selectedAnnotationIndex:null,annotateButtonPressed:!1})}},{key:"passAnnotationData",value:function(e,t){var a=this.state.annotations;if(e){var n,i=Object(W.a)(e);try{for(i.s();!(n=i.n()).done;){var l=n.value;if(l.annotation){var r=JSON.parse(l.annotation.data),o=JSON.parse(l.annotation.geometry);a[l.annotation.image_page_number].push({geometry:o,data:Object(d.a)(Object(d.a)({},r),{},{id:l._id})})}}}catch(s){i.e(s)}finally{i.f()}}this.setState({fullCommentData:e||[],annotations:a,visitorProfilePreviewID:t})}},{key:"returnValidAnnotations",value:function(){if(this.state.annotations){var e=this.state.annotations[this.state.imageIndex];return null!==this.state.selectedAnnotationIndex?[e[this.state.selectedAnnotationIndex]]:e}return[]}},{key:"renderComments",value:function(e){if(e===S){if(this.props.disableCommenting)return null;var t=!!this.props.eventData.image_data.length;return i.a.createElement(Ie,{postType:D,commentIDArray:this.props.eventData.comments,fullCommentData:this.state.fullCommentData,isImageOnly:t,windowType:e,visitorUsername:this.props.visitorUsername,postID:this.props.postID,postIndex:this.props.postIndex,onCommentIDInjection:this.props.onCommentIDInjection,onCommentDataInjection:this.handleCommentDataInjection,selectedPostFeedType:this.props.selectedPostFeedType,onPromptAnnotation:this.handlePromptAnnotation,passAnnotationData:this.passAnnotationData,onMouseClick:this.handleMouseClick,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut})}if(e===P)return i.a.createElement("p",null,this.props.eventData.comment_count," Comments")}},{key:"renderImageSlider",value:function(e){var t=this.returnValidAnnotations(),a=this.props.largeViewMode?"shortpostviewer-large-hero-image-container":"shortpostviewer-inline-hero-container",n=this.props.eventData.image_data.map(function(e,t){return Object(X.returnUserImageURL)(e)});return this.state.annotations?i.a.createElement("div",{className:a},i.a.createElement(Be,{windowType:e,hideAnnotations:this.state.areAnnotationsHidden,imageArray:n,annotations:t,activeAnnotations:this.state.activeAnnotations,imageIndex:this.state.imageIndex,showPromptOverlay:this.state.showPromptOverlay,annotateButtonPressed:this.state.annotateButtonPressed,areAnnotationsHidden:this.state.areAnnotationsHidden,onAnnotationSubmit:this.handleAnnotationSubmit,toggleAnnotations:this.toggleAnnotations,handleArrowPress:this.handleArrowPress,visitorProfilePreviewID:this.state.visitorProfilePreviewID})):i.a.createElement(i.a.Fragment,null)}},{key:"handleArrowPress",value:function(e){var t=this.state.imageIndex+e;return t===this.state.annotations.length?this.setState({imageIndex:0,selectedAnnotationIndex:null}):-1===t?this.setState({imageIndex:this.state.annotations.length-1,selectedAnnotationIndex:null}):this.setState({imageIndex:t,selectedAnnotationIndex:null})}},{key:"handleCommentDataInjection",value:function(e,t,a){var n=this,i=this.props.eventData.comments,l=t[t.length-1]._id;i.push(l),this.setState({fullCommentData:t},function(){null===n.props.postIndex||n.props.isPostOnlyView||n.props.onCommentIDInjection(e,i,a)})}},{key:"handlePromptAnnotation",value:function(){this.heroRef.current.scrollIntoView({block:"center"}),this.setState({areAnnotationsHidden:!1,annotateButtonPressed:!0})}},{key:"handleMouseOver",value:function(e){this.setState({activeAnnotations:[].concat(Object(Pe.a)(this.state.activeAnnotations),[e])})}},{key:"handleMouseOut",value:function(e){var t=this.state.activeAnnotations.indexOf(e);this.setState({activeAnnotations:[].concat(Object(Pe.a)(this.state.activeAnnotations.slice(0,t)),Object(Pe.a)(this.state.activeAnnotations.slice(t+1)))})}},{key:"handleMouseClick",value:function(e){var t,a=0,n=Object(W.a)(this.state.annotations);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.length>0){var l,r=0,o=Object(W.a)(i);try{for(o.s();!(l=o.n()).done;){if(l.value.data.id===e)return this.setState({imageIndex:a,selectedAnnotationIndex:r,areAnnotationsHidden:!1},this.heroRef.current.scrollIntoView({block:"center"}));r++}}catch(s){o.e(s)}finally{o.f()}}a++}}catch(s){n.e(s)}finally{n.f()}}},{key:"handleAnnotationSubmit",value:function(e){var t=this,a=e.geometry,n=e.data;Z.postAnnotation(this.state.visitorProfilePreviewID,this.props.eventData._id,this.state.imageIndex,JSON.stringify(n),JSON.stringify(a)).then(function(e){var i=e.data.rootCommentIDArray,l=e.data.newRootComment,r=t.state.annotations[t.state.imageIndex].concat({geometry:a,data:Object(d.a)(Object(d.a)({},n),{},{id:i[0]})}),o=t.state.annotations,s=t.state.fullCommentData;return s.push(l),o[t.state.imageIndex]=r,t.setState({annotations:o,commentArray:i,fullCommentData:s,annotateButtonPressed:!1})}).catch(function(e){console.log(e),alert("Sorry, your annotation could not be added.")})}},{key:"handleWindowChange",value:function(e){"EDIT_STATE"!==e||this.props.eventData.cover_photo_key||this.retrieveThumbnail(),this.setState({window:e})}},{key:"handleIndexChange",value:function(e){this.setState({imageIndex:e})}},{key:"handleTextChange",value:function(e){var t=this.state.tempTextForEdit;this.state.isPaginated?t[this.state.imageIndex]=e:t=e,this.setState({tempTextForEdit:t})}},{key:"handlePaginatedChange",value:function(){if(!1===this.state.isPaginated){var e=this.props.eventData.image_data.length,t=[];t.push(this.state.tempTextForEdit);for(var a=1;a<e;a++)t.push([]);this.setState({tempTextForEdit:t,isPaginated:!0})}else if(window.confirm("Switching back will remove all your captions except \n                                for the first one. Keep going?")){var n=this.state.tempTextForEdit[0];this.setState({tempTextForEdit:n,isPaginated:!1})}}},{key:"handleModalLaunch",value:function(){if(!this.props.isPostOnlyView)return this.props.passDataToModal(this.props.eventData,D,this.props.postIndex)}},{key:"retrieveThumbnail",value:function(){var e=this;if(this.props.eventData.image_data.length>0)return Z.returnImage(this.props.eventData.image_data[0]).then(function(e){return fetch(e.data.image)}).then(function(e){return e.blob()}).then(function(e){var t=new File([e],"Thumbnail",{type:e.type});return Object(H.a)(t,{maxSizeMB:.5,maxWidthOrHeight:250})}).then(function(t){return e.setState({coverPhoto:t})})}},{key:"render",value:function(){var e=this;if(this.state.window===E)return this.props.eventData.image_data.length?this.props.largeViewMode?i.a.createElement("div",{className:"shortpostviewer-window"},i.a.createElement("div",{id:"shortpostviewer-large-main-container",className:"with-image"},this.renderImageSlider(S),i.a.createElement("div",{className:"shortpostviewer-large-side-container",ref:this.heroRef},i.a.createElement(Ce,{isOwnProfile:this.props.isOwnProfile,username:this.props.eventData.username,date:this.state.date,displayPhoto:this.props.eventData.display_photo_key,onEditClick:this.handleWindowChange,onDeletePost:this.props.onDeletePost}),i.a.createElement(ke,{index:this.state.imageIndex,isPaginated:this.state.isPaginated,progression:this.state.progression,labels:this.props.eventData.labels,pursuit:this.state.pursuitCategory,min:this.state.min,textData:this.props.textData}))),this.renderComments(S)):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"shortpostviewer-inline-main-container",onClick:this.handleModalLaunch},i.a.createElement(Ce,{isOwnProfile:this.props.isOwnProfile,username:this.props.eventData.username,date:this.state.date,displayPhoto:this.props.eventData.display_photo_key}),i.a.createElement("div",{className:"shortpostviewer-inline-side-container"},i.a.createElement(ke,{index:this.state.imageIndex,isPaginated:this.state.isPaginated,progression:this.state.progression,labels:this.props.eventData.labels,pursuit:this.state.pursuitCategory,min:this.state.min,textData:this.props.textData})),this.renderImageSlider(P)),this.renderComments(P)):this.props.largeViewMode?i.a.createElement("div",{className:"shortpostviewer-window"},i.a.createElement("div",{id:"shortpostviewer-large-inline-header-container"},i.a.createElement(Ce,{isOwnProfile:this.props.isOwnProfile,username:this.props.eventData.username,date:this.state.date,displayPhoto:this.props.eventData.display_photo_key,onEditClick:this.handleWindowChange,onDeletePost:this.props.onDeletePost})),i.a.createElement(ke,{difficulty:this.props.eventData.difficulty,isPaginated:this.state.isPaginated,progression:this.state.progression,labels:this.props.eventData.labels,pursuit:this.state.pursuitCategory,min:this.state.min,textData:null}),i.a.createElement("div",{className:"shortpostviewer-large-hero-text-container"},i.a.createElement(we,{textData:this.props.textData})),this.renderComments(S)):i.a.createElement("div",{onClick:this.handleModalLaunch},i.a.createElement("div",{className:"shortpostviewer-inline-main-container"},i.a.createElement("div",{className:"shortpostviewer-inline-side-container"},i.a.createElement(Ce,{isOwnProfile:this.props.isOwnProfile,username:this.props.eventData.username,date:this.state.date,displayPhoto:this.props.eventData.display_photo_key}),i.a.createElement(ke,{index:this.state.imageIndex,isPaginated:this.state.isPaginated,progression:this.state.progression,labels:this.props.eventData.labels,pursuit:this.state.pursuitCategory,min:this.state.min,textData:null})),i.a.createElement("div",{className:"shortpostviewer-inline-hero-container"},i.a.createElement(we,{index:this.state.imageIndex,isPaginated:this.state.isPaginated,textData:this.props.textData}))),this.renderComments(P));if("EDIT_STATE"===this.state.window)return i.a.createElement("div",{className:"shortpostviewer-window"},i.a.createElement("h4",null,"Edit your Post!"),i.a.createElement("div",{className:"shortpostviewer-button-container"},i.a.createElement("button",{onClick:function(){return e.handleWindowChange(E)}},"Return"),i.a.createElement("button",{onClick:function(){return e.handleWindowChange("REVIEW_STATE")}},"Review Post")),i.a.createElement(Ue,{imageIndex:this.state.imageIndex,eventData:this.props.eventData,textData:this.state.tempTextForEdit,isPaginated:this.state.isPaginated,onIndexChange:this.handleIndexChange,onTextChange:this.handleTextChange,onPaginatedChange:this.handlePaginatedChange}));if("REVIEW_STATE"===this.state.window){var t=null;return this.props.eventData.date&&(t=new Date(this.props.eventData.date).toISOString().substring(0,10)),i.a.createElement("div",{className:"shortpostviewer-window"},i.a.createElement(Ne,{isUpdateToPost:!0,difficulty:this.props.eventData.difficulty,progression:this.props.eventData.progression,previousState:"EDIT_STATE",postID:this.props.eventData._id,displayPhoto:this.props.visitorDisplayPhoto,coverPhoto:this.state.coverPhoto,coverPhotoKey:this.props.eventData.cover_photo_key?this.props.eventData.cover_photo_key:null,isPaginated:this.state.isPaginated,previewTitle:this.props.eventData.title,previewSubtitle:this.props.eventData.subtitle,date:t,min:this.props.eventData.min_duration,selectedPursuit:this.props.eventData.pursuit_category,pursuitNames:this.props.pursuitNames,closeModal:this.props.closeModal,postType:D,textData:this.state.tempTextForEdit,username:this.props.visitorUsername,preferredPostPrivacy:this.props.preferredPostPrivacy,handlePreferredPostPrivacyChange:this.handlePreferredPostPrivacyChange,setPostStage:this.handleWindowChange}))}throw new Error("No stage matched")}}]),a}(i.a.Component)),We=a(85),He=a.n(We),Ge=a(147),Ke=a(145),Ye=(a(717),["January","February","March","April","May","June","July","August","September","October","November","December"]),Je=k(function(e){var t=Object(n.useState)(0),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)(E),u=Object(o.a)(s,2),c=u[0],d=u[1],p=Object(n.useState)(e.textData),h=Object(o.a)(p,2),m=h[0],v=h[1],g=Object(n.useState)(e.textData),f=Object(o.a)(g,2),b=f[0],y=f[1],D=Object(n.useState)([]),I=Object(o.a)(D,2),C=I[0],w=I[1],k=function(t){t===E&&(v(e.textData),r(l+1)),d(t)},T=function(t,a,n){var i=e.eventData.comments,l=a[a.length-1]._id;i.push(l),w(a),null!==e.postIndex&&e.onCommentIDInjection(t,i,n)},_=function(e){w(e||[])},R=function(t){return t===S?i.a.createElement(Ie,{postType:O,fullCommentData:C,commentIDArray:e.eventData.comments,windowType:t,visitorUsername:e.visitorUsername,postID:e.postID,postIndex:e.postIndex,onCommentIDInjection:e.onCommentIDInjection,selectedPostFeedType:e.selectedPostFeedType,onCommentDataInjection:T,passAnnotationData:_}):t===P?i.a.createElement("p",null,e.eventData.comment_count," Comments"):void 0};if(c===E){var x=e.title,j=e.eventData.date?new Date(e.eventData.date):null,M=Object(X.returnUserImageURL)(e.eventData.cover_photo_key),L=e.eventData.display_photo_key?Object(X.returnUserImageURL)(e.eventData.display_photo_key):X.TEMP_PROFILE_PHOTO_URL;return e.largeViewMode?i.a.createElement("div",{className:e.isPostOnlyView?"":"longpostviewer-window"},i.a.createElement("div",{className:"longpostviewer-meta-info-container"},i.a.createElement("div",null,i.a.createElement("div",{id:"longpostviewer-top-title-bar"},i.a.createElement("h1",{id:"longpostviewer-title"},x||""),e.isOwnProfile?i.a.createElement("div",{className:"longpostviewer-button-container"},i.a.createElement("button",{onClick:function(){return k("EDIT_STATE")}},"Edit"),i.a.createElement("button",{onClick:e.onDeletePost},"Remove")):i.a.createElement(i.a.Fragment,null)),e.eventData.subtitle?i.a.createElement("h4",{id:"longpostviewer-subtitle"},e.eventData.subtitle):i.a.createElement(i.a.Fragment,null),i.a.createElement("div",{className:"longpostviewer-author-info-container"},i.a.createElement("div",{className:"longpostviewer-display-photo"},i.a.createElement("img",{src:L}),e.eventData.date?i.a.createElement("p",null,Ye[j.getMonth()],j.getDate()+1,",",j.getFullYear()):i.a.createElement(i.a.Fragment,null)),i.a.createElement("div",{className:"longpostviewer-author-info"},i.a.createElement("h4",null,e.username),e.eventData.pursuit_category?i.a.createElement("p",null,"For ",e.eventData.pursuit_category):i.a.createElement(i.a.Fragment,null)),i.a.createElement("div",{className:"longpostviewer-stats-container"},e.eventData.progression?i.a.createElement("p",null,"Milestone :)"):i.a.createElement(i.a.Fragment,null),e.eventData.min_duration?i.a.createElement("p",null,e.eventData.min_duration," minutes"):i.a.createElement(i.a.Fragment,null))))),i.a.createElement("div",{className:"longpostviewer-editor-container"},i.a.createElement(He.a,{key:l,content:e.textData,read_only:!0})),R(S)):i.a.createElement("div",{onClick:function(){if(!e.isPostOnlyView)return e.passDataToModal(e.eventData,O,e.postIndex)}},i.a.createElement(Ce,{isOwnProfile:e.isOwnProfile,username:e.username,displayPhoto:e.eventData.display_photo_key}),i.a.createElement("div",null,x?i.a.createElement("h2",null,x):i.a.createElement(i.a.Fragment,null),e.eventData.subtitle?i.a.createElement("h4",null,e.eventData.subtitle):i.a.createElement(i.a.Fragment,null)),i.a.createElement("div",{className:"longpostviewer-stats-container"},e.eventData.progression?i.a.createElement("p",null,"Milestone :)"):i.a.createElement(i.a.Fragment,null),e.eventData.date?i.a.createElement("p",null,Ye[j.getMonth()],j.getDate()+1,",",j.getFullYear()):i.a.createElement(i.a.Fragment,null),e.eventData.pursuit_category?i.a.createElement("p",null,e.eventData.pursuit_category):i.a.createElement(i.a.Fragment,null),e.eventData.min_duration?i.a.createElement("p",null,e.eventData.min_duration," minutes"):i.a.createElement(i.a.Fragment,null)),i.a.createElement("div",{id:"longpostviewer-inline-editor-container",className:"longpostviewer-editor-container"},e.eventData.cover_photo_key?i.a.createElement("img",{alt:"cover photo",className:"longpostviewer-cover-photo",src:M}):i.a.createElement(i.a.Fragment,null),i.a.createElement(He.a,{key:l,content:e.textData,read_only:!0})),R(P))}if("EDIT_STATE"===c)return i.a.createElement("div",{className:"longpostviewer-window"},i.a.createElement("div",{className:"longpostviewer-button-container"},e.isOwnProfile?i.a.createElement("button",{onClick:function(){y(e.textData),v(e.textData),k(E)}},"Cancel Edit"):i.a.createElement(i.a.Fragment,null),e.isOwnProfile?i.a.createElement("button",{onClick:function(){y(m),k("REVIEW_STATE")}},"Review"):i.a.createElement(i.a.Fragment,null)),i.a.createElement("div",{className:"longpostviewer-editor-container"},i.a.createElement(He.a,{key:l,onChange:function(e){v(e.emitSerializedOutput())},content:b,default_wrappers:[{className:"my-custom-h1",block:"header-one"},{className:"my-custom-h2",block:"header-two"},{className:"my-custom-h3",block:"header-three"}],widgets:[Object(Ge.a)({options:{upload_url:X.IMAGE_BASE_URL,upload_callback:function(e,t){alert("file uploaded: "+e.data.url)},upload_error_callback:function(e,t){alert("Failed to Upload Image")}}}),Object(Ke.a)()]})));var A=null;return e.eventData.date&&(A=new Date(e.eventData.date).toISOString().substring(0,10)),i.a.createElement(Ne,{isUpdateToPost:!0,difficulty:(void 0).props.eventData.difficulty,previousState:"EDIT_STATE",displayPhoto:e.visitorDisplayPhoto,coverPhotoKey:e.eventData.cover_photo_key?e.eventData.cover_photo_key:null,isPaginated:!1,textData:b,closeModal:e.closeModal,postType:O,setPostStage:d,username:e.visitorUsername,preferredPostPrivacy:e.preferredPostPrivacy,pursuitNames:e.pursuitNames,handlePreferredPostPrivacyChange:e.handlePreferredPostPrivacyChange,postID:e.eventData._id,progression:e.eventData.progression,previewTitle:e.eventData.title,previewSubtitle:e.eventData.subtitle,coverPhoto:e.eventData.cover_photo_url,date:A,min:e.eventData.min_duration,selectedPursuit:e.eventData.pursuit_category,onClick:function(){return k("EDIT_STATE")}})}),ze=k(function(e){var t=function(){return Z.deletePost(e.targetProfileID,e.targetIndexUserID,e.eventData._id,e.eventData.pursuit_category,e.eventData.min_duration,e.eventData.is_milestone).then(function(e){return console.log(e)}).catch(function(e){console.log(e),alert("Something went wrong during deletion")})},a=function(){if(e.eventData.image_data.length){var a=e.eventData.image_data;return e.eventData.cover_photo_key&&a.push(e.eventData.cover_photo_key),Z.deleteManyPhotosByKey(a).then(function(e){return t()})}return t()},n=e.eventData.username===e.visitorUsername,l=e.textData&&e.eventData.is_paginated?JSON.parse(e.textData):e.textData;switch(console.log(l),e.eventData.post_format){case D:return i.a.createElement(Ve,{postID:e.eventData._id,postIndex:e.postIndex,displayPhoto:e.visitorDisplayPhoto,visitorUsername:e.visitorUsername,pursuitNames:e.pursuitNames,preferredPostPrivacy:e.preferredPostPrivacy,textData:l,largeViewMode:e.largeViewMode,isOwnProfile:n,isPostOnlyView:e.isPostOnlyView,eventData:e.eventData,onDeletePost:a,closeModal:e.closeModal,passDataToModal:e.passDataToModal,onCommentIDInjection:e.onCommentIDInjection,selectedPostFeedType:e.selectedPostFeedType,disableCommenting:e.disableCommenting});case O:var r=e.eventData.title;return i.a.createElement(Je,{postID:e.eventData._id,postIndex:e.postIndex,displayPhoto:e.visitorDisplayPhoto,visitorUsername:e.visitorUsername,pursuitNames:e.pursuitNames,preferredPostPrivacy:e.preferredPostPrivacy,largeViewMode:e.largeViewMode,title:r,textData:JSON.parse(e.textData),isOwnProfile:n,isPostOnlyView:e.isPostOnlyView,eventData:e.eventData,onDeletePost:a,closeModal:e.closeModal,passDataToModal:e.passDataToModal,onCommentIDInjection:e.onCommentIDInjection,selectedPostFeedType:e.selectedPostFeedType,disableCommenting:e.disableCommenting});default:throw new Error("No content type matched in event-modal.js")}}),qe=i.a.createContext(null),Xe=function(e){var t=function(t){Object(v.a)(n,t);var a=Object(g.a)(n);function n(e){var t;return Object(p.a)(this,n),(t=a.call(this,e)).state={authUser:null,isLoading:!1},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.listener=this.props.firebase.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t,isLoading:!1}):e.setState({authUser:null,isLoading:!1})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return this.state.isLoading?i.a.createElement("p",null,"Loading ... "):i.a.createElement(qe.Provider,{value:this.state.authUser},i.a.createElement(e,this.props))}}]),n}(i.a.Component);return k(t)},Qe=a(110),Ze=function(e){return function(t){var a=function(a){Object(v.a)(l,a);var n=Object(g.a)(l);function l(){return Object(p.a)(this,l),n.apply(this,arguments)}return Object(h.a)(l,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(a){e(a)||t.props.history.push("")})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var a=this;return i.a.createElement(qe.Consumer,null,function(n){return e(n)?i.a.createElement(t,a.props):null})}}]),l}(i.a.Component);return Object(Qe.a)(u.f,k)(a)}},$e=(a(718),void 0),et=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={username:n.props.firebase.returnUsername(),firstName:null,lastName:null,pursuits:null,pursuitNames:null,croppedDisplayPhoto:null,smallCroppedDisplayPhoto:null,indexUserDataID:null,fullUserDataID:null,preferredPostPrivacy:null,followedUserPostIDs:[],isMoreFollowedUserPosts:!0,fixedDataLoadLength:4,nextOpenPostIndex:0,feedData:[],isModalShowing:!1,selectedEvent:null,textData:"",recentPosts:null,recentPostsKey:0},n.handlePursuitClick=n.handlePursuitClick.bind(Object(m.a)(n)),n.handleRecentWorkClick=n.handleRecentWorkClick.bind(Object(m.a)(n)),n.handleEventClick=n.handleEventClick.bind(Object(m.a)(n)),n.setModal=n.setModal.bind(Object(m.a)(n)),n.createPursuits=n.createPursuits.bind(Object(m.a)(n)),n.passDataToModal=n.passDataToModal.bind(Object(m.a)(n)),n.clearModal=n.clearModal.bind(Object(m.a)(n)),n.handleDeletePost=n.handleDeletePost.bind(Object(m.a)(n)),n.fetchNextPosts=n.fetchNextPosts.bind(Object(m.a)(n)),n.createFeed=n.createFeed.bind(Object(m.a)(n)),n.renderModal=n.renderModal.bind(Object(m.a)(n)),n.renderRecentPosts=n.renderRecentPosts.bind(Object(m.a)(n)),n.handleCommentIDInjection=n.handleCommentIDInjection.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,console.log(this.props.closeMasterModal),this._isMounted&&this.state.username){var t=this.props.firebase.returnName(),a=t?t.firstName:null,n=t.lastName?t.lastName:null,i=null,l=null,r="",o="",s=null,u=null,c=null,d=[],p=null,h=0,m=[];return Z.returnIndexUser(this.state.username).then(function(t){var a=t.data,n=t.data.following_feed.slice(e.state.nextOpenPostIndex,e.state.nextOpenPostIndex+e.state.fixedDataLoadLength);if(i=a.following_feed,l=a.preferred_post_privacy,r=a.cropped_display_photo_key,o=a.small_cropped_display_photo_key,s=a._id,u=a.user_profile_id,c=t.data.pursuits,p=!(!i||0===i.length),t.data.pursuits){var v=e.createPursuits(t.data.pursuits);d=v.pursuitNames,m=v.pursuitInfoArray,h=v.totalMin}return!1===p?t.data.recent_posts.length>0?Z.returnMultiplePosts(t.data.recent_posts,!0).then(function(e){return{isRecentPostsOnly:!0,recentPosts:e.data.posts}}):{isRecentPostsOnly:!0,recentPosts:[]}:t.data.recent_posts.length>0?Promise.all([Z.returnMultiplePosts(t.data.recent_posts,!0),Z.returnMultiplePosts(n,!0)]).then(function(e){return{isRecentPostsOnly:!1,recentPosts:e[0].data.posts,feedData:e[1].data.posts}}):n?Z.returnMultiplePosts(n,!0).then(function(t){return t.data.posts.length<=e.state.fixedDataLoadLength&&(p=!1),{isRecentPostsOnly:!1,feedData:t.data.posts}}):{isRecentPostsOnly:!0,feedData:t.data.posts}}).then(function(t){var v=t&&t.recentPosts?t.recentPosts:[],g=t&&!t.isRecentPostsOnly?t.feedData:[],f=e.state.nextOpenPostIndex+e.state.fixedDataLoadLength;e.setState({firstName:a,lastName:n,followedUserPostIDs:i,preferredPostPrivacy:l,indexUserDataID:s,fullUserDataID:u,croppedDisplayPhoto:r,smallCroppedDisplayPhoto:o,pursuits:c,pursuitNames:d,pursuitInfoArray:m,totalMin:h,recentPosts:v,feedData:g,nextOpenPostIndex:f,isMoreFollowedUserPosts:p})}).catch(function(e){console.log(e),alert("Could Not Load Feed."+e)})}}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"renderRecentPosts",value:function(e){var t,a=0,n=[],l=Object(W.a)(e);try{for(l.s();!(t=l.n()).done;){var r=t.value;n.push(i.a.createElement(ye,{isRecentEvents:!0,index:a,mediaType:y,key:a,eventData:r,onEventClick:this.handleEventClick})),a++}}catch(o){l.e(o)}finally{l.f()}return n}},{key:"handleCommentIDInjection",value:function(e,t,a){if("RECENT_POSTS"===a){var n=this.state.recentPosts;n[e].comments=t,n[e].comment_count=n[e].comment_count+1,this.setState(function(e){return{recentPosts:n,recentPostsKey:e.recentPostsKey+1}})}else if("FRIEND_POSTS"===a){var i=this.state.feedData;i[e].comments=t,this.setState({feedData:i})}}},{key:"createFeed",value:function(e){if(e&&0!==e.length){var t,a=[],n=this.state.nextOpenPostIndex,l=0,r=Object(W.a)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,s=o.username===this.state.username?this.state.preferredPostPrivacy:null;a.push(i.a.createElement(ze,{targetProfileID:this.state.fullUserDataID,targetIndexUserID:this.state.indexUserDataID,key:n++,postIndex:l++,postID:o._id,visitorUsername:this.state.username,isOwnProfile:o.username===this.state.username,displayPhoto:o.display_photo_key,preferredPostPrivacy:s,pursuitNames:this.state.pursuitNames,eventData:o,textData:o.text_data,passDataToModal:this.passDataToModal,largeViewMode:!1,onCommentIDInjection:this.handleCommentIDInjection}))}}catch(u){r.e(u)}finally{r.f()}return a}}},{key:"fetchNextPosts",value:function(){var e=this,t=this.state.nextOpenPostIndex+this.state.fixedDataLoadLength,a=this.state.followedUserPostIDs.slice(this.state.nextOpenPostIndex,t),n=!0;return t>=this.state.followedUserPostIDs.length&&(n=!1),Z.returnMultiplePosts(a,!0).then(function(a){a.data?e.setState(function(e){return{feedData:e.feedData.concat(a.data.posts),nextOpenPostIndex:t,isMoreFollowedUserPosts:n}}):e.setState({isMoreFollowedUserPosts:!1})}).catch(function(e){console.log(e),alert(e)})}},{key:"handleDeletePost",value:function(){return Z.deletePost(this.state.fullUserDataID,this.state.indexUserDataID,this.state.selectedEvent._id).then(function(e){alert(e)})}},{key:"passDataToModal",value:function(e,t,a){console.log(e.text_data),this.setState({selectedEvent:e,textData:e.text_data,selectedPostFeedType:"FRIEND_POSTS",selectedPostIndex:a},this.setModal())}},{key:"setModal",value:function(){this.props.openMasterModal("POST_VIEWER_MODAL_STATE")}},{key:"clearModal",value:function(){this.setState({selectedEvent:null},this.props.closeMasterModal())}},{key:"handlePursuitClick",value:function(e){e.preventDefault(),this.props.history.push(this.state.username)}},{key:"handleRecentWorkClick",value:function(e,t){e.preventDefault(),alert(t)}},{key:"handleEventClick",value:function(e,t){this._isMounted&&this.setState({selectedEvent:e,selectedPostIndex:t,selectedPostFeedType:"RECENT_POSTS"},this.setModal())}},{key:"createPursuits",value:function(e){var t,a=[],n=[],l=0,r=Object(W.a)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.push(o.name),l+=o.total_min,a.push(i.a.createElement("tr",{key:o.name},i.a.createElement("th",{key:o.name+" name"},o.name),i.a.createElement("td",{key:o.name+" experience"},o.experience_level),i.a.createElement("td",{key:o.total_min+"minutes"},o.total_min),i.a.createElement("td",{key:o.num_posts+"posts"},o.posts?o.posts.length:0),i.a.createElement("td",{key:o.num_milestones+" milestones"},o.num_milestones)))}}catch(s){r.e(s)}finally{r.f()}return{pursuitNames:n,pursuitInfoArray:a,totalMin:l}}},{key:"renderModal",value:function(){if("POST_VIEWER_MODAL_STATE"===this.props.modalState&&this.state.selectedEvent){var e=i.a.createElement(ze,{targetProfileID:this.state.fullUserDataID,targetIndexUserID:this.state.indexUserDataID,largeViewMode:!0,visitorUsername:this.state.username,key:this.state.selectedEvent._id,postIndex:this.state.selectedPostIndex,isOwnProfile:!0,isPostOnlyView:!1,displayPhoto:this.state.smallCroppedDisplayPhoto,preferredPostPrivacy:this.state.preferredPostPrivacy,pursuitNames:this.state.pursuitNames,eventData:this.state.selectedEvent,selectedPostFeedType:this.state.selectedPostFeedType,textData:this.state.selectedEvent.text_data,closeModal:this.clearModal,onCommentIDInjection:this.handleCommentIDInjection});return this.props.returnModalStructure(e,this.clearModal)}return null}},{key:"render",value:function(){var e=this.state.feedData.length>0?this.createFeed(this.state.feedData):null,t=this.state.croppedDisplayPhoto?Object(X.returnUserImageURL)(this.state.croppedDisplayPhoto):X.TEMP_PROFILE_PHOTO_URL,a=this.state.recentPosts?this.renderRecentPosts(this.state.recentPosts):null;return i.a.createElement("div",{id:"returninguser-body-container"},i.a.createElement("div",{id:"returninguser-top-title-container"},i.a.createElement("h4",{className:"returninguser-title"},"Your Dashboard")),i.a.createElement("div",{id:"returninguser-profile-container",className:"returninguser-main-row"},i.a.createElement("div",{id:"returninguser-hero-profile-column",className:"returninguser-profile-column"},i.a.createElement(s.b,{to:Object(X.returnUsernameURL)(this.state.username)},i.a.createElement("img",{alt:"",id:"returninguser-profile-photo",src:t}),i.a.createElement("div",{className:"returninguser-profile-text-container"},i.a.createElement("p",null,this.state.username),i.a.createElement("p",null,this.state.firstName)))),i.a.createElement("div",{className:"returninguser-profile-column"},i.a.createElement("div",{className:"returninguser-profile-text-container"},"Total Hours Spent: ",Math.floor(this.state.totalMin/60)),i.a.createElement("div",{className:"returninguser-profile-text-container"})),i.a.createElement("div",{className:"returninguser-profile-column"},i.a.createElement("table",{id:"returninguser-pursuit-info-table"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",null),i.a.createElement("th",null,"Level"),i.a.createElement("th",null,"Minutes Spent"),i.a.createElement("th",null,"Posts"),i.a.createElement("th",null,"Milestones")),this.state.pursuitInfoArray)))),i.a.createElement("div",{id:"returninguser-recent-work-container",className:"returninguser-main-row"},i.a.createElement("div",{className:"returninguser-row"},i.a.createElement(s.b,{id:"returninguser-recent-work-title",className:"returninguser-title",to:Object(X.returnUsernameURL)(this.state.username)},"Your Recent Work")),i.a.createElement("div",{key:this.state.recentPostsKey,id:"returninguser-recent-posts-container",className:"returninguser-row"},a)),i.a.createElement("div",{id:"returninguser-feed-container",className:"returninguser-main-row"},i.a.createElement("h4",{className:"returninguser-title"},"Your Feed"),i.a.createElement("div",{id:"returninguser-infinite-scroll-container"},i.a.createElement(ce.a,{dataLength:this.state.nextOpenPostIndex,next:this.fetchNextPosts,hasMore:this.state.isMoreFollowedUserPosts,loader:i.a.createElement("h4",null,"Loading..."),endMessage:i.a.createElement("p",{style:{textAlign:"center"}},i.a.createElement("b",null,"Yay! You have seen it all"))},e?e.map(function(e){return i.a.createElement("div",{className:"returninguser-feed-object-container"},e)}):null))),this.renderModal())}}]),a}(i.a.Component),tt=function(){$e.props.firebase.checkIsExistingUser()},at=Ze(function(e){return!!e&&k(tt)})(k(et)),nt=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={isNewUser:null},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.props.firebase.checkIsExistingUser().then(function(t){e._isMounted&&(t?e.setState({isNewUser:!1}):e.setState({isNewUser:!0}))})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return null===this.state.isNewUser?i.a.createElement("div",null,"Grabbing User Info"):this.state.isNewUser?i.a.createElement(ue,null):i.a.createElement(at,{returnModalStructure:this.props.returnModalStructure,openMasterModal:this.props.openMasterModal,closeMasterModal:this.props.closeMasterModal,modalState:this.props.modalState})}}]),a}(i.a.Component),it=Ze(function(e){return!!e})(k(nt)),lt=Object(Qe.a)(u.f,k)(V),rt=Object(Qe.a)(u.f,k)(it),ot=k(function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(qe.Consumer,null,function(t){return t&&t.emailVerified?i.a.createElement(rt,{returnModalStructure:e.returnModalStructure,openMasterModal:e.openMasterModal,closeMasterModal:e.closeMasterModal,modalState:e.modalState}):i.a.createElement(lt,{emailVerifiedStatus:!1})}))}),st=(a(719),{passwordOne:"",passwordTwo:"",error:null}),ut=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state=Object(d.a)({},st),n.handlePasswordUpdateSubmit=n.handlePasswordUpdateSubmit.bind(Object(m.a)(n)),n.handleTextUpdate=n.handleTextUpdate.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"handlePasswordUpdateSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.passwordOne;this.props.firebase.doPasswordUpdate(a).then(function(){t.setState(Object(d.a)({},st))}).catch(function(e){t.setState({error:e})})}},{key:"handleTextUpdate",value:function(e){this.setState(Object(c.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state,t=e.passwordOne,a=e.passwordTwo,n=e.error,l=t!==a||""===t;return i.a.createElement("div",{id:"passwordchangeform-container"},i.a.createElement("form",{onSubmit:this.handlePasswordUpdateSubmit},i.a.createElement("input",{name:"passwordOne",value:t,onChange:this.handleTextUpdate,type:"password",placeholder:"New Password"}),i.a.createElement("input",{name:"passwordTwo",value:a,onChange:this.handleTextUpdate,type:"password",placeholder:"Confirm New Password"}),i.a.createElement("button",{id:"passwordchangeform-reset-button",disabled:l,type:"submit"},"Reset My Password"),n&&i.a.createElement("p",null,n.message)))}}]),a}(n.Component),ct=k(ut),dt=(a(720),Ze(function(e){return!!e})(k(function(e){var t=Object(n.useState)(null),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)(null),u=Object(o.a)(s,2),c=u[0],d=u[1],p=Object(n.useState)(!0),h=Object(o.a)(p,2),m=h[0],v=h[1],g=Object(n.useState)(null),f=Object(o.a)(g,2),b=f[0],E=f[1],y=Object(n.useState)(""),P=Object(o.a)(y,2),S=P[0],D=P[1],O=Object(n.useState)(null),I=Object(o.a)(O,2),C=I[0],w=I[1],k=Object(n.useState)(""),T=Object(o.a)(k,2),_=T[0],R=T[1],x=Object(n.useState)(null),j=Object(o.a)(x,2),M=j[0],L=j[1],A=Object(n.useState)(null),F=Object(o.a)(A,2),U=F[0],N=F[1],B=Object(n.useState)(1),V=Object(o.a)(B,2),G=V[0],K=V[1],Y=Object(n.useState)(0),J=Object(o.a)(Y,2),z=J[0],q=J[1],X=Object(n.useState)(null),Q=Object(o.a)(X,2),$=Q[0],ee=Q[1],te=Object(n.useState)(null),ae=Object(o.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(0),se=Object(o.a)(oe,2),ue=se[0],ce=se[1],de=i.a.createRef(),pe=i.a.createRef();Object(n.useEffect)(function(){Z.returnAccountSettingsInfo(e.firebase.returnUsername()).then(function(e){var t=e.data.pursuits,a=[];if(t)for(var n in t)a.push(n);v(null!==e.data.cropped_display_photo_key),D(e.data.bio),re(e.data.private),N(a),w(t),R(t[a[[0]]]),L(a[[0]]),r(e.data._id)})},[e.firebase]);var he=function(e){d(e)},me=function(e){""===e.current.style.display?e.current.style.display="flex":e.current.style.display=""},ve=function(t){var a=e.firebase.returnUsername();window.confirm("Are you sure you want to remove your photo?")&&Z.deleteAccountPhoto(a,t).then(function(){return Z.updatePostDisplayPhotos(a,"")}).then(function(){"DISPLAY"===t?window.alert("Your Display Photo has been removed. \n              You should see the changes take effect soon."):"COVER"===t&&window.alert("Your cover photo has been removed. You should\n               see the changes take effect immediately."),window.location.reload()}).catch(function(e){console.log(e),window.alert("Something went wrong while deleting your image.\n             Please wait and try again later")})},ge=function(e,t,a){return Z.updateAccountImage(e,t).then(function(e){return"COVER"!==t?Z.updatePostDisplayPhotos(a,e.data.imageKey):void 0}).then(function(e){alert("Successfully updated!"),window.location.reload()}).catch(function(e){console.log(e),alert("Something has gone wrong while updating :(")})},fe=function(t,a){var n=e.firebase.returnUsername();return m?Z.deleteAccountPhoto(n,a).then(function(e){return ge(t,a,n)}):ge(t,a,n)},be=function(){return Z.updateBio(S,e.firebase.returnUsername()).then(function(){alert("Successfully updated your bio!"),window.location.reload()}).catch(function(e){return console.log(e)})},Ee=function(){return Z.updateTemplate(l,_,M)},ye=function(t){var a=new FormData;if(a.append(le.USERNAME_FIELD,e.firebase.returnUsername()),"DISPLAY"===t){var n=["normal","small","tiny"],i=$.getImage();H.a.canvasToFile(i).then(function(e){return Promise.all([Object(H.a)(e,{maxWidthOrHeight:250,maxSizeMB:1,fileType:"image/jpeg"}),Object(H.a)(e,{maxWidthOrHeight:125,maxSizeMB:1,fileType:"image/jpeg"}),Object(H.a)(e,{maxWidthOrHeight:62,maxSizeMB:1,fileType:"image/jpeg"})])}).then(function(e){for(var i=[],l=0;l<3;l++)i.push(new File([e[l]],n[l],{type:"image/jpeg"}));return a.append(le.CROPPED_IMAGE_FIELD,e[0]),a.append(le.SMALL_CROPPED_IMAGE_FIELD,e[1]),a.append(le.TINY_CROPPED_IMAGE_FIELD,e[2]),fe(a,t)})}else if("COVER"===t)return b.size>1e6?Object(H.a)(b,{maxSizeMB:1,fileType:"image/jpeg"}).then(function(e){a.append(le.COVER_PHOTO_FIELD,e),fe(a,t)}):(a.append(le.COVER_PHOTO_FIELD,b),fe(a,t))},Pe=function(){ce(ue+1),d(null)};return i.a.createElement(qe.Consumer,null,function(t){return i.a.createElement("div",{id:"account-container"},i.a.createElement("h1",null,"Account: ",t.email),i.a.createElement(ct,null),i.a.createElement("div",{className:"account-section-container"},i.a.createElement("label",null,"Choose the privacy of your profile!"),i.a.createElement("select",{value:ne?"PRIVATE":"PUBLIC",onChange:function(t){return function(t){var a="PRIVATE"===t;return re(a),Z.setProfilePrivacy(e.firebase.returnUsername(),a).catch(function(e){console.log(e),alert("Unable to update Profile Privacy.")})}(t.target.value)}},i.a.createElement("option",{key:"private",value:"PRIVATE"},"Private"),i.a.createElement("option",{key:"public",value:"PUBLIC"},"Public"))),i.a.createElement("div",{className:"account-section-container"},i.a.createElement("button",{onClick:function(){return me(de)}},"Edit your Display Photo"),i.a.createElement("div",{ref:de,className:"account-photo-edit-container"},i.a.createElement("label",null,"Change your display photo!"),i.a.createElement("input",{name:"displayPhoto",type:"file",key:ue,onChange:function(e){return d(e.target.files[0])}}),c?i.a.createElement(ie,{clearFile:Pe,profilePhoto:c,handleImageDrop:he,imageScale:G,imageRotation:z,scaleImage:K,rotateImage:q,setEditorRef:ee}):i.a.createElement("div",null),i.a.createElement("button",{disabled:!c,onClick:function(){return ye("DISPLAY")}},"Submit your display photo!"),i.a.createElement("button",{onClick:function(){return ve("DISPLAY")}},"Remove display Photo?"))),i.a.createElement("div",{className:"account-section-container"},i.a.createElement("button",{onClick:function(){return me(pe)}},"Edit your Cover Photo"),i.a.createElement("div",{ref:pe,className:"account-photo-edit-container"},i.a.createElement("label",null,"Change your cover photo!"),i.a.createElement("input",{type:"file",onChange:function(e){E(e.target.files[0])}}),i.a.createElement("button",{disabled:!b,onClick:function(){return ye("COVER")}},"Submit your cover photo!"),i.a.createElement("button",{onClick:function(){return ve("COVER")}},"Remove your cover photo"))),i.a.createElement("div",{id:"account-bio-container",className:"account-section-container"},i.a.createElement("label",null,"Edit your bio"),i.a.createElement("textarea",{type:"text",onChange:function(e){return D(e.target.value)},value:S,maxLength:500}),i.a.createElement("button",{onClick:be},"Submit Bio")),i.a.createElement("div",{id:"account-template-container",className:"account-section-container"},i.a.createElement("label",null,"Add Template for Pursuit"),i.a.createElement("p",null,"Add a predefined text you can add to a post for ease of access"),i.a.createElement("select",{name:"pursuit-category",value:M,onChange:function(e){return t=e.target.value,console.log(C[t]),R(C[t]),void L(t);var t}},function(){var e=[];if(null!==U){var t,a=Object(W.a)(U);try{for(a.s();!(t=a.n()).done;){var n=t.value;e.push(i.a.createElement("option",{key:n,value:n},n))}}catch(l){a.e(l)}finally{a.f()}return e}}()),i.a.createElement("textarea",{type:"text",onChange:function(e){return R(e.target.value)},value:_}),i.a.createElement("button",{onClick:Ee},"Submit Template")))})}))),pt=(a(721),function(e){return i.a.createElement("div",{id:"newpost-window"},i.a.createElement("div",{className:"newpost-button-container"},i.a.createElement("h3",null,"Document Your Progress"),i.a.createElement("h4",null,"Make a Normal Post"),i.a.createElement("button",{value:D,onClick:function(t){return e.onPostTypeSet(t.target.value)}},"New Normal Post"),i.a.createElement("h4",null,"Make an Essay Post"),i.a.createElement("button",{value:"NEW_LONG",onClick:function(t){return function(t){e.onlineDraft?window.confirm("Starting a new Long Post will\n                            erase your saved draft. Continue anyway?")&&e.onPostTypeSet(t.target.value):e.onPostTypeSet(t.target.value)}(t.target.value)}},"New Draft"),i.a.createElement("button",{value:"OLD_LONG",onClick:function(t){return e.onPostTypeSet(t.target.value)}},"Continue Previous Draft?")))}),ht=(a(722),function(e){return i.a.createElement("div",{className:"imagedrop-container",onDragOver:e.dragOver,onDragEnter:e.dragEnter,onDragLeave:e.dragLeave,onDrop:e.fileDrop,onClick:e.fileInputClicked},i.a.createElement("div",{id:"imagedrop-message"},i.a.createElement("div",{id:"imagedrop-upload-icon"}),"Drag and Drop files here or click to select file(s)"),i.a.createElement("input",{ref:e.reference,type:"file",multiple:!0,onChange:e.filesSelected}))}),mt=a(94),vt=(a(723),i.a.memo(function(e){var t=Object(mt.b)(function(e){var t=e.data,a=e.fileType,n=e.fileSize,l=e.errorMessage,r=e.removeFile,o=t.invalid?"sortableitem-error":"";return i.a.createElement("div",{className:"sortableitem-status-bar"},i.a.createElement("div",null,i.a.createElement("div",{className:"sortableitem-type-logo"}),i.a.createElement("div",{className:"sortableitem-type"},a(t.name)),i.a.createElement("span",{className:"sortableitem-name ".concat(o)},t.name),i.a.createElement("span",{className:"sortableitem-size"},"(",n(t.size),")"),t.invalid&&i.a.createElement("span",{className:"sortableitem-error-message"},"(",l,")")),i.a.createElement("button",{onClick:function(){return r(t.name)}},"X"))}),a=Object(mt.a)(function(e){var a=e.items,n=e.onSortEnd,l=e.fileType,r=e.fileSize,o=e.errorMessage,s=e.removeFile;return i.a.createElement("ul",null,a.map(function(e,a){return i.a.createElement(t,{key:"item-".concat(a),index:a,data:e,onSortEnd:n,fileType:l,fileSize:r,errorMessage:o,removeFile:s})}))});return i.a.createElement(a,{items:e.validFiles,onSortEnd:e.onSortEnd,fileType:e.fileType,fileSize:e.fileSize,errorMessage:e.errorMessage,removeFile:e.removeFile})})),gt=(a(724),function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window}()),ft=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).preventDefault=function(e){e.preventDefault()},n.dragOver=function(e){n.preventDefault(e)},n.dragEnter=function(e){n.preventDefault(e)},n.dragLeave=function(e){n.preventDefault(e)},n.fileDrop=function(e){n.preventDefault(e);var t=e.dataTransfer.files;t.length&&n.handleFiles(t)},n.filesSelected=function(){n.fileInputRef.current.files.length&&n.handleFiles(n.fileInputRef.current.files)},n.fileInputClicked=function(){n.fileInputRef.current.click()},n.handleFiles=function(e){for(var t=!1,a=0;a<e.length;a++)n.validateFile(e[a])?n.props.onSelectedFileChange(e[a]):(t=!0,e[a].invalid=!0,n.props.onSelectedFileChange(e[a]),n.setErrorMessage("File type not permitted"),n.props.onUnsupportedFileChange(e[a]));n.updateDisabilityState(t)},n.fileSize=function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},n.fileType=function(e){return e.substring(e.lastIndexOf(".")+1,e.length)||e},n.removeFile=function(e){var t=n.props.validFiles.findIndex(function(t){return t.name===e}),a=n.props.selectedFiles.findIndex(function(t){return t.name===e}),i=n.props.unsupportedFiles.findIndex(function(t){return t.name===e}),l=n.props.validFiles,r=n.props.selectedFiles,o=n.props.unsupportedFiles;l.splice(t,1),r.splice(a,1),n.props.setValidFiles(l),n.props.setSelectedFiles(r),-1!==i&&(o.splice(i,1),n.props.setUnsupportedFiles(o)),l.length>0&&0===o.length?n.updateDisabilityState(!1):n.updateDisabilityState(!0)},n.updateDisabilityState=function(e){e&&0===n.props.textPageText.length?n.props.onDisablePost(!0):n.props.onDisablePost(!1)},n.openImageModal=function(e){var t=Object(m.a)(n),a=new FileReader;n.modalRef.current.style.display="block",a.readAsDataURL(e),a.onload=function(e){t.modalImageRef.current.style.backgroundImage="url(".concat(e.target.result,")")}},n.closeModal=function(){n.modalRef.current.style.display="none",n.modalImageRef.current.style.backgroundImage="none"},n.fileInputRef=i.a.createRef(),n.state={errorMessage:""},n.setErrorMessage=n.setErrorMessage.bind(Object(m.a)(n)),n.validateFile=n.validateFile.bind(Object(m.a)(n)),n.renderTextContainer=n.renderTextContainer.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"setErrorMessage",value:function(e){this.setState({value:e})}},{key:"validateFile",value:function(e){return-1!==["image/jpeg","image/jpg","image/png","image/gif","image/x-icon"].indexOf(e.type)}},{key:"renderTextContainer",value:function(){return i.a.createElement(Te,{validFilesLength:this.props.validFiles.length,isPaginated:this.props.isPaginated,onPaginatedChange:this.props.onPaginatedChange,onTextChange:this.props.onTextChange,textPageText:this.props.textPageText,imageIndex:this.props.imageIndex})}},{key:"render",value:function(){return gt||console.log("Sorry, this is not a modern browser! Try another browser."),0===this.props.validFiles.length?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"shorteditor-text-container"},this.renderTextContainer()),this.props.unsupportedFiles.length?i.a.createElement("p",null,"Please remove all unsupported files."):"",i.a.createElement(ht,{reference:this.fileInputRef,dragOver:this.dragOver,dragEnter:this.dragEnter,dragLeave:this.dragLeave,fileDrop:this.fileDrop,fileInputClicked:this.fileInputClicked,filesSelected:this.filesSelected})):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"shorteditor-main-container"},i.a.createElement("div",{id:"shorteditor-hero-container"},this.props.unsupportedFiles.length?i.a.createElement("p",null,"Please remove all unsupported files."):"",i.a.createElement("div",{id:"shorteditor-image-slider-container"},i.a.createElement(Be,{newPost:!0,windowType:P,imageArray:this.props.imageArray,imageIndex:this.props.imageIndex,handleArrowPress:this.props.handleArrowPress,hideAnnotations:!0,activeAnnotations:[]}))),i.a.createElement("div",{id:"shorteditor-side-container"},this.renderTextContainer())),i.a.createElement("div",{id:"shorteditor-file-manager-container"},i.a.createElement(ht,{reference:this.fileInputRef,dragOver:this.dragOver,dragEnter:this.dragEnter,dragLeave:this.dragLeave,fileDrop:this.fileDrop,fileInputClicked:this.fileInputClicked,filesSelected:this.filesSelected}),i.a.createElement(vt,{onSortEnd:this.props.onSortEnd,validFiles:this.props.validFiles,openImageModal:this.openImageModal,removeFile:this.removeFile,fileType:this.fileType,fileSize:this.fileSize,errorMessage:this.state.errorMessage})))}}]),a}(i.a.Component),bt=k(ft),Et=(a(725),function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={selectedFiles:[],validFiles:[],unsupportedFiles:[],imageArray:[],imageIndex:0,textData:"",isPaginated:!1,postDisabled:!0,window:E,previewTitle:null,tinyPhotos:null,isLongDraftButtonToggled:!1},n.confirmDraftDiscard=n.confirmDraftDiscard.bind(Object(m.a)(n)),n.longDraftOptionsRef=i.a.createRef(null),n.handleIndexChange=n.handleIndexChange.bind(Object(m.a)(n)),n.toggleLongDraft=n.toggleLongDraft.bind(Object(m.a)(n)),n.setSelectedFiles=n.setSelectedFiles.bind(Object(m.a)(n)),n.setValidFiles=n.setValidFiles.bind(Object(m.a)(n)),n.setUnsupportedFiles=n.setUnsupportedFiles.bind(Object(m.a)(n)),n.setImageArray=n.setImageArray.bind(Object(m.a)(n)),n.handleTextChange=n.handleTextChange.bind(Object(m.a)(n)),n.handleUnsupportedFileChange=n.handleUnsupportedFileChange.bind(Object(m.a)(n)),n.handleSelectedFileChange=n.handleSelectedFileChange.bind(Object(m.a)(n)),n.handleDisablePost=n.handleDisablePost.bind(Object(m.a)(n)),n.handleClick=n.handleClick.bind(Object(m.a)(n)),n.generateValidFiles=n.generateValidFiles.bind(Object(m.a)(n)),n.handlePaginatedChange=n.handlePaginatedChange.bind(Object(m.a)(n)),n.handleSortEnd=n.handleSortEnd.bind(Object(m.a)(n)),n.loadImage=n.loadImage.bind(Object(m.a)(n)),n.transformImageProp=n.transformImageProp.bind(Object(m.a)(n)),n.createTinyFiles=n.createTinyFiles.bind(Object(m.a)(n)),n.handleArrowPress=n.handleArrowPress.bind(Object(m.a)(n)),n.newLongPost=n.newLongPost.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"confirmDraftDiscard",value:function(){this.props.onlineDraft?window.confirm("Starting a new Long Post will\n                      erase your saved draft. Continue anyway?")&&this.props.onPostTypeSet("NEW_LONG"):this.props.onPostTypeSet("NEW_LONG")}},{key:"toggleLongDraft",value:function(e){console.log(this.longDraftOptionsRef.current),this.longDraftOptionsRef.current.style.visibility=e?"hidden":"visible",this.setState({isLongDraftButtonToggled:!e})}},{key:"newLongPost",value:function(e){this.props.onlineDraft?window.confirm("Starting a new Long Post will\n                        erase your saved draft. Continue anyway?")&&this.props.onPostTypeSet(e.target.value,null):this.props.onPostTypeSet(e.target.value,null)}},{key:"transformImageProp",value:function(e){var t=this,a=e;Promise.all(a.map(function(e){return t.loadImage(e)})).then(function(a){t.setState({imageArray:a,displayedItemCount:a.length,validFiles:e,isCompressing:!0},t.createTinyFiles(e))})}},{key:"createTinyFiles",value:function(e){var t,a=this,n=[],i=Object(W.a)(e);try{for(i.s();!(t=i.n()).done;){var l=t.value;n.push(Object(H.a)(l,{maxSizeMB:1}))}}catch(r){i.e(r)}finally{i.f()}n.push(Object(H.a)(e[0],{maxSizeMB:.5,maxWidthOrHeight:250})),Promise.all(n).then(function(e){for(var t=new File([e[e.length-1]],"Thumbnail"),n=[],i=0;i<e.length-1;i++)n.push(new File([e[i]],"file"));a.setState({tinyPhotos:n,coverPhoto:t,isCompressing:!1})})}},{key:"loadImage",value:function(e){return new Promise(function(t,a){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(){a(n.error)},n.readAsDataURL(e)})}},{key:"handleIndexChange",value:function(e){this.setState({imageIndex:e})}},{key:"handlePaginatedChange",value:function(){if(!1===this.state.isPaginated){var e=[],t=this.state.validFiles.length;e.push(this.state.textData);for(var a=1;a<t;a++)e.push([]);this.setState({textData:e,isPaginated:!0})}else if(window.confirm("Switching back will remove all your captions except \n                          for the first one. Keep going?")){var n=this.state.textData[0];this.setState({textData:n,isPaginated:!1})}}},{key:"setImageArray",value:function(e){this.setState({imageArray:e})}},{key:"setSelectedFiles",value:function(e){this.setState({selectedFiles:e},this.generateValidFiles)}},{key:"setValidFiles",value:function(e){this.transformImageProp(e)}},{key:"setUnsupportedFiles",value:function(e){this.setState({unsupportedFiles:e})}},{key:"handleArrowPress",value:function(e){var t=this.state.imageIndex+e;return t===this.state.imageArray.length?this.setState({imageIndex:0}):-1===t?this.setState({imageIndex:this.state.imageArray.length-1}):this.setState({imageIndex:t})}},{key:"handleTextChange",value:function(e,t){if(t)this.setState({previewTitle:e});else{var a,n=0===this.state.validFiles.length||this.state.unsupportedFiles.length>0;if(this.state.isPaginated){var i=this.state.textData;i[this.state.imageIndex]=e,a=i}else a=e;this.setState({textData:a,postDisabled:0===e.length&&n})}}},{key:"handleUnsupportedFileChange",value:function(e){this.setState(function(t){return{unsupportedFiles:t.unsupportedFiles.concat(e)}})}},{key:"handleSelectedFileChange",value:function(e){this.setState(function(t){return{selectedFiles:t.selectedFiles.concat(e)}},this.generateValidFiles)}},{key:"handleDisablePost",value:function(e){this.setState({postDisabled:e})}},{key:"handleClick",value:function(e){this.setState({window:e})}},{key:"generateValidFiles",value:function(){var e=this.state.selectedFiles.reduce(function(e,t){return e.find(function(e){return e.name===t.name})?e:e.concat([t])},[]);this.setValidFiles(e)}},{key:"handleSortEnd",value:function(e){var t=e.oldIndex,a=e.newIndex,n=Array.from(this.state.validFiles),i=n.splice(t,1),l=Object(o.a)(i,1)[0];n.splice(a,0,l),this.transformImageProp(n)}},{key:"render",value:function(){var e=this;return this.state.window===E?i.a.createElement("div",{id:"shortpost-window"},i.a.createElement("h2",null,"Short Post"),i.a.createElement("div",{className:"shortpost-button-container"},i.a.createElement("span",null),this.state.isCompressing?i.a.createElement("p",null,"Compressing Photos"):null,i.a.createElement("span",null,i.a.createElement("button",{value:"REVIEW_STATE",disabled:this.state.postDisabled,onClick:function(t){return e.handleClick(t.target.value)}},"Review Post"))),i.a.createElement("div",{className:"shortpost-special-button-container"},i.a.createElement("div",{id:"shortpost-long-draft-options",ref:this.longDraftOptionsRef},i.a.createElement("button",{value:"NEW_LONG",onClick:this.confirmDraftDiscard},"New Draft"),i.a.createElement("button",{value:"OLD_LONG",onClick:function(){return e.props.onPostTypeSet("OLD_LONG")}},"Continue Previous Draft"))),i.a.createElement("div",{id:"shortpost-title-container"},i.a.createElement(Se.a,{id:"textcontainer-text-input",placeholder:"Title",onChange:function(t){return e.handleTextChange(t.target.value,!0)},minRows:1,value:this.state.previewTitle})),i.a.createElement(bt,{username:this.props.username,selectedFiles:this.state.selectedFiles,validFiles:this.state.validFiles,imageArray:this.state.imageArray,unsupportedFiles:this.state.unsupportedFiles,isPaginated:this.state.isPaginated,textPageText:this.state.textData,onSortEnd:this.handleSortEnd,setImageArray:this.setImageArray,onPaginatedChange:this.handlePaginatedChange,imageIndex:this.state.imageIndex,handleArrowPress:this.handleArrowPress,onTextChange:this.handleTextChange,onSelectedFileChange:this.handleSelectedFileChange,onUnsupportedFileChange:this.handleUnsupportedFileChange,onDisablePost:this.handleDisablePost,setValidFiles:this.setValidFiles,setSelectedFiles:this.setSelectedFiles,setUnsupportedFiles:this.setUnsupportedFiles})):i.a.createElement("div",{id:"shortpost-review-window"},i.a.createElement(Ne,{date:(new Date).toISOString().substr(0,10),difficulty:0,progression:1,previousState:E,displayPhoto:this.props.displayPhoto,isPaginated:this.state.isPaginated,previewTitle:this.state.previewTitle,closeModal:this.props.closeModal,postType:D,imageArray:this.state.tinyPhotos,coverPhoto:this.state.coverPhoto,textData:this.state.textData,username:this.props.username,preferredPostPrivacy:this.props.preferredPostPrivacy,pursuitNames:this.props.pursuitNames,labels:this.props.labels,handlePreferredPostPrivacyChange:this.props.handlePreferredPostPrivacyChange,setPostStage:this.handleClick}))}}]),a}(i.a.Component)),yt=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={username:n.props.username,isInitial:!0,needOnlineSync:!1,lastBlockText:""},n.handleSave=n.handleSave.bind(Object(m.a)(n)),n.handleSaveSuccess=n.handleSaveSuccess.bind(Object(m.a)(n)),n.handleSaveError=n.handleSaveError.bind(Object(m.a)(n)),n.handleTextChange=ee.a.debounce(function(){n.props.isSavePending&&n.props.onSavePending(!1)},4200),n.checkIsEqual=n.checkIsEqual.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"checkIsEqual",value:function(){return ee.a.isEqual(JSON.stringify(this.props.localDraft),JSON.stringify(this.props.onlineDraft))}},{key:"handleSave",value:function(e,t){var a=this;return this.state.isInitial?this.checkIsEqual()?(console.log("Catch uneccessary first save"),this.setState({isInitial:!1},this.props.onSavePending(!1))):(this.setState({isInitial:!1}),Z.saveDraft(this.props.username,t).then(function(e){return a.handleSaveSuccess(e)}).catch(function(e){return a.handleSaveError(e)})):this.props.isSavePending?(console.log("Saving"),Z.saveDraft(this.props.username,t).then(function(e){return a.handleSaveSuccess(e)}).catch(function(e){return a.handleSaveError(e)})):void console.log("Catch uneccessary save")}},{key:"handleSaveSuccess",value:function(e){console.log("Reached",e),this.props.onSavePending(!1)}},{key:"handleSaveError",value:function(e){console.log("Fail"),this.props.onSavePending(!1),alert("Draft Failed to Save. Please check your\n               connection or save your draft locally for now. : (")}},{key:"render",value:function(){var e=this;return i.a.createElement(He.a,{onChange:function(t){var a=t.emitSerializedOutput();e.props.onSavePending(!0),e.props.setLocalDraft(a),e.handleTextChange()},content:this.props.onlineDraft,default_wrappers:[{className:"my-custom-h1",block:"header-one"},{className:"my-custom-h2",block:"header-two"},{className:"my-custom-h3",block:"header-three"}],widgets:[Object(Ge.a)({options:{upload_url:X.IMAGE_BASE_URL,upload_callback:function(t,a){console.log(t),console.log(a),alert("file uploaded: "+t.data.url),e.setState({needOnlineSync:!0})},upload_error_callback:function(e,t){console.log(e)}}}),Object(Ke.a)()],data_storage:{save_handler:this.handleSave,interval:4e3,success_handler:this.handleSaveSuccess,failure_handler:this.handleSaveError}})}}]),a}(i.a.Component),Pt=k(yt),St=(a(726),function(e){var t=Object(n.useState)(E),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)(null!==e.onlineDraft||e.localDraft),u=Object(o.a)(s,2),c=u[0],d=u[1],p=Object(n.useState)(e.draftTitle),h=Object(o.a)(p,2),m=h[0],v=h[1],g=Object(n.useRef)(null),f=Object(n.useRef)(null),b=Object(n.useRef)(null),y=function(){console.log("Sync HIT"),console.log(e.updatingOnlineDraft),e.updatingOnlineDraft||e.onLocalOnlineSync(e.localDraft).then(function(t){t?(console.log("SAVING SIDE WAY"),e.setSavePending(!1)):alert("Save unsucessful")})},P=ee.a.debounce(function(){y()},130),S=function(t,a){if(a)window.confirm("Do you want to leave while changes are being saved?")?"NONE"===t?e.onPostTypeSet(D,null):r(t):y();else switch(t){case"NONE":e.onPostTypeSet(D,e.localDraft);break;case E:r(t);break;case"REVIEW_STATE":var n=e.localDraft.blocks[0].text;r(t),v(n),e.onLocalSync(e.localDraft);break;default:throw new Error("No Windows Matched")}};return l===E?i.a.createElement("div",{className:"longpost-window",ref:g},i.a.createElement("div",{ref:f},i.a.createElement("div",{id:"longpost-save-status-container"},e.isSavePending?i.a.createElement("h4",null,"Saving"):i.a.createElement("h4",null,"Saved")),i.a.createElement("div",{className:"longpost-button-container"},i.a.createElement("span",null,i.a.createElement("button",{value:"NONE",onClick:function(t){return S(t.target.value,e.isSavePending)}},"Return")),i.a.createElement("span",null,i.a.createElement("button",{value:"NONE",onClick:P},"Save Now")),i.a.createElement("span",null,i.a.createElement("button",{value:"REVIEW_STATE",disabled:!c,onClick:function(t){return S(t.target.value,e.isSavePending)}},"Review Post")))),e.onlineDraftRetrieved&&!e.loading?i.a.createElement("div",{id:"longpost-container"},i.a.createElement("div",{id:"longpost-title-editor"},i.a.createElement(Se.a,{id:"textcontainer-text-input",placeholder:"Title",onChange:function(e){v(e.target.value)},minRows:1,value:m})),i.a.createElement(Pt,{username:e.username,isSavePending:e.isSavePending,hasContent:c,setHasContent:d,onSavePending:e.setSavePending,onlineDraft:e.onlineDraft,localDraft:e.localDraft,setLocalDraft:e.setLocalDraft}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",{ref:b})):i.a.createElement("div",null,i.a.createElement("p",null," Loading.... "))):i.a.createElement("div",{id:"longpost-review-window"},i.a.createElement(Ne,{date:(new Date).toISOString().substr(0,10),difficulty:0,previousState:E,displayPhoto:e.displayPhoto,isPaginated:!1,textData:e.onlineDraft,closeModal:e.closeModal,postType:O,setPostStage:S,username:e.username,preferredPostPrivacy:e.preferredPostPrivacy,pursuitNames:e.pursuitNames,handlePreferredPostPrivacyChange:e.handlePreferredPostPrivacyChange,progression:1,previewTitle:m}))}),Dt=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={onlineDraftRetrieved:!1,localDraft:null,onlineDraft:null,displayPhoto:null,isSavePending:!1,updatingOnlineDraft:!0,postType:D,pursuitNames:null,pursuitTemplates:null,indexUserData:null,errorRetrievingDraft:!1,errorSaving:!1},n.handleDisablePost=n.handleDisablePost.bind(Object(m.a)(n)),n.handleSubmitPost=n.handleSubmitPost.bind(Object(m.a)(n)),n.setLocalDraft=n.setLocalDraft.bind(Object(m.a)(n)),n.setSavePending=n.setSavePending.bind(Object(m.a)(n)),n.handleLocalSync=n.handleLocalSync.bind(Object(m.a)(n)),n.handleLocalOnlineSync=n.handleLocalOnlineSync.bind(Object(m.a)(n)),n.handlePostTypeSet=n.handlePostTypeSet.bind(Object(m.a)(n)),n.handleDraftRetrieval=n.handleDraftRetrieval.bind(Object(m.a)(n)),n.handleIndexUserDataSet=n.handleIndexUserDataSet.bind(Object(m.a)(n)),n.handleModalClose=n.handleModalClose.bind(Object(m.a)(n)),n.onPreferredPostPrivacyChange=n.onPreferredPostPrivacyChange.bind(Object(m.a)(n)),n.renderWindow=n.renderWindow.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._isMounted&&this.props.username&&this.handleIndexUserDataSet()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"setSavePending",value:function(e){this.setState({isSavePending:e})}},{key:"handleModalClose",value:function(){var e=this;this.state.postType===O?this.state.isSavePending&&!window.confirm("Do you want to leave while changes are being saved?")?this.handleLocalOnlineSync(this.state.localDraft).then(function(t){t?e.setSavePending(!1):alert("Save unsucessful")}):this.props.closeModal():this.state.postType===D&&window.confirm("Do you want to discard this post?")&&this.props.closeModal()}},{key:"setLocalDraft",value:function(e){this.setState({localDraft:e})}},{key:"onPreferredPostPrivacyChange",value:function(e){this.setState({preferredPostPrivacy:e})}},{key:"handleInitialPageLaunch",value:function(e,t,a){e.preventDefault(),a&&this.setState({onlineDraft:null}),this.setState({postType:t})}},{key:"handleLocalSync",value:function(e){this.setState({onlineDraft:e})}},{key:"handleLocalOnlineSync",value:function(e){var t=this;return e!==this.state.onlineDraft?(this.setState({updatingOnlineDraft:!0}),Z.saveDraft(this.props.username,e).then(function(a){return 200!==a.status&&(console.log("Error"),t.setState({errorSaving:!0})),t.setState({onlineDraft:e,updatingOnlineDraft:!1}),!0}).catch(function(e){console.log(e),t.setState({updatingOnlineDraft:!1})})):Promise.resolve(!1)}},{key:"handleIndexUserDataSet",value:function(){var e=this;Z.returnIndexUser(this.props.username).then(function(t){var a,n=JSON.parse(t.data.draft.text),i=[],l={},r=Object(W.a)(t.data.pursuits);try{for(r.s();!(a=r.n()).done;){var o=a.value;l[o.name]=o.meta_template?o.meta_template:"",i.push(o.name)}}catch(s){r.e(s)}finally{r.f()}e.setState({updatingOnlineDraft:!1,onlineDraftRetrieved:!0,pursuitNames:i,pursuitTemplates:l,indexUserData:t.data,displayPhoto:t.data.small_cropped_display_photo_key,onlineDraft:t.data.draft,draftTitle:t.data.draft.title,localDraft:n,labels:t.data.labels.length>0?JSON.parse(t.data.labels):null})}).catch(function(t){console.log(t),e.setState({onlineDraftRetrieved:!0,updatingOnlineDraft:!1,errorRetrievingDraft:!0}),alert("Something went wrong retrieving your long post draft. \n              Please do not edit your old draft or you will your saved data. \n              Refresh your page or contact support for more help.")})}},{key:"handleDraftRetrieval",value:function(e){var t=this;this.setState({updatingOnlineDraft:!0}),Z.retrieveNewPostInfo(this.props.username).then(function(a){200===a.status?(e&&t.setState({onlineDraftRetrieved:!0}),t.setState({displayPhoto:a.data.smallDisplayPhoto,onlineDraft:JSON.parse(a.data.draft),updatingOnlineDraft:!1})):(t.setState({onlineDraftRetrieved:!0,updatingOnlineDraft:!1,errorRetrievingDraft:!0}),alert("Something went wrong retrieving your long post draft. \n            Please do not edit your old draft or you will your saved data. \n            Refresh your page or contact support for more help."))}).catch(function(e){console.log(e)})}},{key:"handleSubmitPost",value:function(e){alert("PRESSED SUBMIT")}},{key:"handleDisablePost",value:function(e){this.setState({postDisabled:e})}},{key:"handlePostTypeSet",value:function(e,t){switch(e){case"NONE":t?this.setState({postType:e,onlineDraft:t}):this.setState({postType:e});break;case D:this.setState({postType:e});break;case"NEW_LONG":this.setState({postType:O,onlineDraft:null});break;case"OLD_LONG":this.setState({postType:O});break;default:throw Error("No postType options matched :(")}}},{key:"renderWindow",value:function(e){switch(e){case"NONE":return i.a.createElement(pt,{onlineDraft:!0,onPostTypeSet:this.handlePostTypeSet});case D:return i.a.createElement(Et,{onlineDraft:!0,displayPhoto:this.state.displayPhoto,username:this.props.username,closeModal:this.props.closeModal,pursuitNames:this.state.pursuitNames,pursuitTemplates:this.state.pursuitTemplates,disablePost:this.handleDisablePost,setImageArray:this.setImageArray,onPostTypeSet:this.handlePostTypeSet,preferredPostPrivacy:this.state.indexUserData.preferred_post_privacy,handlePreferredPostPrivacyChange:this.onPreferredPostPrivacyChange,labels:this.state.labels});case O:return console.log(this.state.draftTitle),i.a.createElement(St,{displayPhoto:this.state.displayPhoto,username:this.props.username,onlineDraft:this.state.onlineDraft,draftTitle:this.state.draftTitle,pursuitNames:this.state.pursuitNames,onlineDraftRetrieved:this.state.onlineDraftRetrieved,preferredPostPrivacy:this.state.indexUserData.preferred_post_privacy,updatingOnlineDraft:this.state.updatingOnlineDraft,onLocalDraftChange:this.handleLocalDraftChange,localDraft:this.state.localDraft,setLocalDraft:this.setLocalDraft,onLocalOnlineSync:this.handleLocalOnlineSync,onLocalSync:this.handleLocalSync,onPostTypeSet:this.handlePostTypeSet,setSavePending:this.setSavePending,isSavePending:this.state.isSavePending,disablePost:this.handleDisablePost,handlePreferredPostPrivacyChange:this.onPreferredPostPrivacyChange,closeModal:this.props.closeModal});default:throw Error("No postType options matched :(")}}},{key:"render",value:function(){return this.state.indexUserData?i.a.createElement(i.a.Fragment,null,this.renderWindow(this.state.postType)):i.a.createElement(i.a.Fragment,null,"updatingOnlineDraft...")}}]),a}(i.a.Component),Ot=k(Dt),It=(a(727),function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this))._isMounted=!1,e.state={userRelationID:null,following:[],followers:[],requested:[]},e.handleStatusChange=e.handleStatusChange.bind(Object(m.a)(e)),e.handleRenderRelation=e.handleRenderRelation.bind(Object(m.a)(e)),e.renderUserRow=e.renderUserRow.bind(Object(m.a)(e)),e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,Z.returnUserRelationInfo(this.props.username).then(function(t){if(e._isMounted){var a=e.handleRenderRelation(e.renderUserRow,t.data.following,!1),n=e.handleRenderRelation(e.renderUserRow,t.data.followers,!1),i=e.handleRenderRelation(e.renderUserRow,t.data.requested,!0);e.setState({userRelationID:t.data._id,following:a,followers:n,requested:i})}})}},{key:"handleStatusChange",value:function(e,t){var a=this;return Z.changeRelationStatus(e,t,this.props.username,this.state.userRelation._id).then(function(){return Z.returnUserRelationInfo(a.props.username)}).then(function(e){a._isMounted&&a.setState({userRelation:e.data})}).catch(function(e){return window.alert("Something went wrong :(")})}},{key:"renderUserRow",value:function(e,t){var a,n=this,l=[],r=Object(W.a)(e);try{var o=function(){var e=a.value;l.push(i.a.createElement("div",{className:"relationmodal-profile-row"},i.a.createElement("div",{className:"relationmodal-profile-info-container"},i.a.createElement("img",{src:Object(X.returnUserImageURL)(e.display_photo)}),i.a.createElement("a",{href:Object(X.returnUsernameURL)(e.username)},e.username)),t?null:i.a.createElement("button",{onClick:function(){return n.handleStatusChange("UNFOLLOW",e.username)}},"Following"),t?i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){return n.handleStatusChange("ACCEPT",e.username)}},"Accept Request"),i.a.createElement("button",{onClick:function(){return n.handleStatusChange("DECLINE",e.username)}},"Decline Request")):null))};for(r.s();!(a=r.n()).done;)o()}catch(s){r.e(s)}finally{r.f()}return l}},{key:"handleRenderRelation",value:function(e,t,a){return t?e(t,a):null}},{key:"render",value:function(){return i.a.createElement("div",{id:"relationmodal-window"},i.a.createElement("div",{id:"relationmodal-hero-container"},i.a.createElement("div",{className:"relationmodal-column"},i.a.createElement("h2",null,"Requests"),this.state.requested),i.a.createElement("div",{className:"relationmodal-column"},i.a.createElement("h2",null,"Followers"),this.state.followers),i.a.createElement("div",{className:"relationmodal-column"},i.a.createElement("h2",null,"Following"),this.state.following)))}}]),a}(i.a.Component)),Ct=(a(728),function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={showMenu:!1},e.showMenu=e.showMenu.bind(Object(m.a)(e)),e.closeMenu=e.closeMenu.bind(Object(m.a)(e)),e}return Object(h.a)(a,[{key:"showMenu",value:function(e){var t=this;e.preventDefault(),this.setState({showMenu:!0},function(){document.addEventListener("click",t.closeMenu)})}},{key:"closeMenu",value:function(){var e=this;this.setState({showMenu:!1},function(){document.removeEventListener("click",e.closeMenu)})}},{key:"render",value:function(){return i.a.createElement("div",{id:"optionsmenu-main-container"},i.a.createElement("div",{id:"optionsmenu-pre-click-container"},i.a.createElement("button",{onClick:this.showMenu},i.a.createElement("h4",null,"..."))),this.state.showMenu?i.a.createElement("div",{id:"optionsmenu-inner-menu-container"},this.props.shouldHideFriendsTab?null:i.a.createElement("div",{className:"optionsmenu-button-container"},i.a.createElement(s.b,{to:"/account"},"Edit Your Profile")),i.a.createElement("div",{className:"optionsmenu-button-container"},i.a.createElement("button",{onClick:this.props.firebase.doSignOut},i.a.createElement("h4",null,"Sign Out")))):null)}}]),a}(i.a.Component)),wt=k(Ct),kt=(a(729),function(){return i.a.createElement("nav",null,i.a.createElement("div",null,i.a.createElement(s.b,{to:"/",className:"navbar-navigation-link"},"interestHub")))}),Tt=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={username:n.props.firebase.returnUsername(),tinyDisplayPhoto:null,previousLongDraft:null,existingUserLoading:!0,isExistingUser:!1,isPostModalShowing:!1,isRequestModalShowing:!1},n.renderModal=n.renderModal.bind(Object(m.a)(n)),n.clearModal=n.clearModal.bind(Object(m.a)(n)),n.setModal=n.setModal.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=!0,a=!1;this.props.firebase.checkIsExistingUser().then(function(n){return t=!1,n&&(a=!0),Z.returnTinyDisplayPhoto(e.state.username)}).then(function(n){e.setState({isExistingUser:a,existingUserLoading:t,tinyDisplayPhoto:n.data?Object(X.returnUserImageURL)(n.data):X.TEMP_PROFILE_PHOTO_URL})})}},{key:"setModal",value:function(e){this.clearModal(),this.props.openMasterModal(e)}},{key:"clearModal",value:function(){this.props.closeMasterModal()}},{key:"renderModal",value:function(){var e=null;return"RELATION_MODAL_STATE"===this.props.modalState?(e=i.a.createElement(It,{username:this.state.username,closeModal:this.clearModal}),this.props.returnModalStructure(e,this.clearModal)):"NEW_ENTRY_MODAL_STATE"===this.props.modalState?(e=i.a.createElement(Ot,{username:this.state.username,closeModal:this.clearModal}),this.props.returnModalStructure(e,this.clearModal)):null}},{key:"render",value:function(){var e=this,t=this.state.existingUserLoading||!this.state.existingUserLoading&&!this.state.isExistingUser;return i.a.createElement(i.a.Fragment,null,i.a.createElement("nav",null,i.a.createElement("div",{id:"navbar-left-container"},i.a.createElement(s.b,{onClick:function(){"/"!==window.location.pathname?e.props.history.push(""):"/"===window.location.pathname.toString()&&window.location.reload()},className:"navbar-navigation-link"},i.a.createElement("div",{id:"navbar-logo-container"},i.a.createElement("h3",null,"Everfire"))),t?i.a.createElement(i.a.Fragment,null):i.a.createElement("div",{className:"navbar-main-action-buttons-container"},i.a.createElement("button",{onClick:function(){return e.setModal("NEW_ENTRY_MODAL_STATE")}},i.a.createElement("h4",null,"+ New Entry")))),i.a.createElement("div",{id:"navbar-right-container"},t?i.a.createElement(i.a.Fragment,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(s.b,{to:Object(X.returnUsernameURL)(this.state.username)},i.a.createElement("div",{className:"navbar-main-action-buttons-container"},i.a.createElement("div",{id:"navbar-display-photo-container"},i.a.createElement("img",{src:this.state.tinyDisplayPhoto})),i.a.createElement("p",null,this.state.username))),i.a.createElement("div",{className:"navbar-main-action-buttons-container"},i.a.createElement("button",{onClick:function(){return e.setModal("RELATION_MODAL_STATE")}},i.a.createElement("h4",null,"Friends")))),i.a.createElement(wt,{shouldHideFriendsTab:!this.state.existingUserLoading&&!this.state.isExistingUser}))),this.renderModal())}}]),a}(i.a.Component),_t=Object(u.f)(k(Tt)),Rt=function(e){return i.a.createElement(qe.Consumer,null,function(t){return t&&t.emailVerified?i.a.createElement(_t,{returnModalStructure:e.returnModalStructure,openMasterModal:e.openMasterModal,closeMasterModal:e.closeMasterModal,modalState:e.modalState}):i.a.createElement(kt,null)})},xt=(a(730),Object(u.f)(function(e){return i.a.createElement("div",{className:"pursuitholder-container",key:e.name,onClick:function(){return e.onFeedSwitch(e.value)},style:e.isSelected?{backgroundColor:"blue"}:null},i.a.createElement("h4",null,"  ",e.name,"  "),e.numEvents?i.a.createElement("p",null,"  Events: ",e.numEvents,"  "):i.a.createElement(i.a.Fragment,null))})),jt=i.a.createElement("div",null,"404"),Mt=function(e){if(!e.followerStatus||e.isOwner)return i.a.createElement(i.a.Fragment,null);var t="",a=!0;switch(e.followerStatus){case"NOT_A_FOLLOWER":t="Follow",a=!1;break;case"FOLLOW_REQUESTED":t="Requested";break;case"FOLLOWING":t="Followed"}return a?i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){return e.onFollowClick("UNFOLLOW")}},t)):i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){return e.onFollowClick("FOLLOW")}},t))},Lt=(a(731),function(e){return i.a.createElement("div",{id:"project-hero-title-overview-container"},i.a.createElement(Se.a,{id:"project-title",placeholder:"Write a Title for your Post!",maxLength:140,onChange:function(t){return e.onTextChange("TITLE",t.target.value)},value:e.titleValue}),i.a.createElement(Se.a,{id:"project-overview",placeholder:"Write an Overview for your Project!",maxLength:140,onChange:function(t){return e.onTextChange("OVERVIEW",t.target.value)},value:e.descriptionValue}))}),At=(a(732),function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={fixedDataLoadLength:4,nextOpenPostIndex:0},n.fetchNextPosts=n.fetchNextPosts.bind(Object(m.a)(n)),n.createTimelineRow=n.createTimelineRow.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.allPosts.length>0&&this.props.hasMore?this.fetchNextPosts():this.props.shouldPull(!1)}},{key:"createTimelineRow",value:function(e,t){for(var a=this.props.loadedFeed,n=a.length-1,l=this.props.nextOpenPostIndex,r=0,o=a[n].length;r<e.length;){for(;o<4;){var s=!1;if(!e[r])break;if(this.props.selectedPosts){var u,c=Object(W.a)(this.props.selectedPosts);try{for(c.s();!(u=c.n()).done;){u.value.key===e[r]._id&&(s=!0)}}catch(d){c.e(d)}finally{c.f()}}a[n].push(i.a.createElement("div",null,i.a.createElement(ye,{columnIndex:o,mediaType:t,isSelected:s,newProjectView:this.props.newProjectView,key:l,eventIndex:l,eventData:e[r],onEventClick:this.props.onEventClick,onProjectClick:this.props.onProjectClick,onProjectEventSelect:this.props.onProjectEventSelect}))),l++,o++,r++}if(4===o&&a.push([]),!e[r])break;n++,o=0}this.props.updateFeedData(a,l)}},{key:"fetchNextPosts",value:function(){var e=this;if(this.props.nextOpenPostIndex+this.state.fixedDataLoadLength>=this.props.allPosts.length&&this.props.shouldPull(!1),"PROJECT"===this.props.mediaType){var t=this.props.allPosts.slice(this.props.nextOpenPostIndex,this.props.nextOpenPostIndex+this.state.fixedDataLoadLength).map(function(e){return console.log(e.post_id),e.post_id});return Z.returnMultipleProjects(t).then(function(t){e._isMounted&&e.createTimelineRow(t.data.projects,e.props.mediaType)}).catch(function(e){return console.log(e)})}if("PROJECT_EVENT"===this.props.mediaType){var a=this.props.allPosts.slice(this.props.nextOpenPostIndex,this.props.nextOpenPostIndex+this.state.fixedDataLoadLength);return Z.returnMultiplePosts(a,!1).then(function(t){e._isMounted&&e.createTimelineRow(t.data.posts,e.props.mediaType)}).catch(function(e){return console.log(e)})}var n=this.props.allPosts.slice(this.props.nextOpenPostIndex,this.props.nextOpenPostIndex+this.state.fixedDataLoadLength).map(function(e){return e.post_id});return Z.returnMultiplePosts(n,!1).then(function(t){e._isMounted&&e.createTimelineRow(t.data.posts,e.props.mediaType)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement("p",{style:{textAlign:"center"}},"Yay! You have seen it all"));return this._isMounted&&this.props.allPosts?i.a.createElement("div",{key:this.props.feedID},this.props.allPosts&&this.props.allPosts.length>0?i.a.createElement(ce.a,{dataLength:this.props.nextOpenPostIndex,next:this.fetchNextPosts,hasMore:this.props.hasMore,loader:i.a.createElement("h4",null,"Loading..."),endMessage:e},this.props.loadedFeed.map(function(e,t){return i.a.createElement("div",{className:"timeline-infinite-scroll-row",key:t},e)}),i.a.createElement("br",null)):i.a.createElement("p",null,"There doesn't seem to be anything here"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null)):i.a.createElement("div",null,i.a.createElement("p",null,"Loading"))}}]),a}(i.a.Component)),Ft=(a(733),function(e){return e.eventData?e.returnModalStructure(i.a.createElement(ze,{disableCommenting:e.disableCommenting,isOwnProfile:e.visitorUsername===e.targetUsername,targetProfileID:e.targetProfileID,targetIndexUserID:e.targetIndexUserID,visitorUsername:e.visitorUsername,isPostOnlyView:!1,postIndex:e.selectedPostIndex,visitorDisplayPhoto:e.smallCroppedDisplayPhoto,preferredPostPrivacy:e.preferredPostPrivacy,postType:e.postType,largeViewMode:!0,pursuitNames:e.pursuitNames,eventData:e.eventData,textData:e.textData,closeModal:e.closeModal,onCommentIDInjection:e.onCommentIDInjection}),e.closeModal):null}),Ut=(a(734),"MAIN"),Nt=function(e){return 4===++e?0:e},Bt=Object(mt.b)(function(e){var t=e.mediaType,a=e.value,n=e.classColumnIndex;return i.a.createElement("div",{className:"projectcontroller-event-container"},i.a.createElement(ye,{columnIndex:n,mediaType:t,eventData:a,newProjectView:!1,key:a._id,disableModalPreview:!0}))}),Vt=Object(mt.a)(function(e){var t=e.mediaType,a=e.items,n=e.onSortEnd,l=0;return i.a.createElement("ul",null,a.map(function(e,a){return 4===l&&(l=0),i.a.createElement(Bt,{key:"item-".concat(a),index:a,classColumnIndex:l++,value:e,mediaType:t,onSortEnd:n})}))}),Wt=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={window:Ut,selectedPosts:[],title:"",overview:"",pursuitCategory:n.props.pursuitNames?n.props.pursuitNames[0]:null,startDate:"",endDate:"",isComplete:!1,minDuration:null,coverPhoto:null,projectSelected:null,feedData:[[]],selectedEvent:null},n.modalRef=i.a.createRef(null),n.handleBackClick=n.handleBackClick.bind(Object(m.a)(n)),n.handleProjectClick=n.handleProjectClick.bind(Object(m.a)(n)),n.handleEventClick=n.handleEventClick.bind(Object(m.a)(n)),n.handleProjectEventSelect=n.handleProjectEventSelect.bind(Object(m.a)(n)),n.handleWindowSwitch=n.handleWindowSwitch.bind(Object(m.a)(n)),n.handleSortEnd=n.handleSortEnd.bind(Object(m.a)(n)),n.handlePost=n.handlePost.bind(Object(m.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(m.a)(n)),n.updateFeedData=n.updateFeedData.bind(Object(m.a)(n)),n.setModal=n.setModal.bind(Object(m.a)(n)),n.clearModal=n.clearModal.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"updateFeedData",value:function(e){this.setState({feedData:e})}},{key:"handleBackClick",value:function(){var e=this;this.state.projectSelected?(console.log("Back"),this.setState({projectSelected:null},function(){e.props.clearLoadedFeed(),e.props.shouldPull(!0)})):this.props.onNewBackProjectClick()}},{key:"setModal",value:function(e){this.props.history.replace(Object(X.returnPostURL)(e)),this.props.openMasterModal("POST_VIEWER_MODAL_STATE")}},{key:"clearModal",value:function(){var e=this;this.setState({selectedEvent:null},function(){e.props.history.replace(Object(X.returnUsernameURL)(e.props.targetUsername)),e.props.closeMasterModal()})}},{key:"handleEventClick",value:function(e,t,a){console.log(e),this.setState({selectedEvent:e,textData:e.text_data},this.setModal(e._id))}},{key:"handleInputChange",value:function(e,t){switch(e){case"TITLE":this.setState({title:t});break;case"OVERVIEW":this.setState({overview:t});break;case"PURSUIT":this.setState({pursuitCategory:t});break;case"START_DATE":this.setState({startDate:t});break;case"END_DATE":this.setState({endDate:t});break;case"IS_COMPLETE":this.setState({isComplete:t});break;case"MINUTES":this.setState({minDuration:t});break;case"COVER_PHOTO":this.setState({coverPhoto:t});break;default:throw new Error("NO TEXT ID'S Matched in POST")}}},{key:"handleWindowSwitch",value:function(e){var t=0;if("REVIEW"===e){var a,n=Object(W.a)(this.state.selectedPosts);try{for(n.s();!(a=n.n()).done;){var i=a.value;i.min_duration&&(t+=i.min_duration)}}catch(l){n.e(l)}finally{n.f()}}this.setState({window:e,min:0!==t?t:null})}},{key:"handleProjectEventSelect",value:function(e){var t,a=[],n=!1,i=-1,l=Object(W.a)(this.state.selectedPosts);try{for(l.s();!(t=l.n()).done;){var r=t.value;r._id!==e._id?(i=Nt(i),r.column_index=i,a.push(r)):(e.isChecked=!1,n=!0)}}catch(o){l.e(o)}finally{l.f()}n||(i=Nt(i),e.column_index=i,e.isChecked=!0,a.push(e)),this.setState({selectedPosts:a})}},{key:"handleSortEnd",value:function(e){var t=e.oldIndex,a=e.newIndex,n=this.state.selectedPosts,i=n.splice(t,1),l=Object(o.a)(i,1)[0],r=-1;n.splice(a,0,l);var s,u=Object(W.a)(n);try{for(u.s();!(s=u.n()).done;){var c=s.value;r=Nt(r),c.column_index=r}}catch(d){u.e(d)}finally{u.f()}this.setState({selectedPosts:n})}},{key:"handlePost",value:function(){var e=new FormData;if(e.append(le.USERNAME_FIELD,this.props.username),e.append(le.DISPLAY_PHOTO_FIELD,this.props.displayPhoto),e.append(le.USER_ID_FIELD,this.props.targetProfileID),e.append(le.INDEX_USER_ID_FIELD,this.props.targetIndexUserID),e.append(le.TITLE_FIELD,this.state.title),this.state.overview&&e.append(le.OVERVIEW_FIELD,this.state.overview),this.state.pursuitCategory&&e.append(le.PURSUIT_FIELD,this.state.pursuitCategory),this.state.startDate&&e.append(le.START_DATE_FIELD,this.state.startDate),this.state.endDate&&e.append(le.END_DATE_FIELD,this.state.endDate),this.state.isComplete&&e.append(le.IS_COMPLETE_FIELD,this.state.isComplete),this.state.minDuration&&e.append(le.MIN_DURATION_FIELD,this.state.minDuration),this.state.coverPhoto&&e.append(le.COVER_PHOTO_FIELD,this.state.coverPhoto),this.state.selectedPosts){var t=JSON.stringify(this.state.selectedPosts);e.append(le.SELECTED_POSTS_FIELD,t)}return Z.createProject(e).then(function(e){alert("Success!"),window.location.reload()}).catch(function(e){return console.log(e)})}},{key:"handleProjectClick",value:function(e){var t=this;this.setState({projectSelected:e},function(){t.props.shouldPull(!0),t.props.clearLoadedFeed()})}},{key:"render",value:function(){var e=this;switch(this.state.window){case Ut:var t=this.props.newProjectState||this.state.projectSelected;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ft,{targetProfileID:this.props.targetProfileID,targetIndexUserID:this.props.targetIndexUserID,isOwnProfile:this.props.isOwnProfile,visitorUsername:this.props.visitorUsername,postIndex:this.state.selectedPostIndex,visitorDisplayPhoto:this.props.visitorDisplayPhoto,preferredPostPrivacy:this.props.preferredPostPrivacy,postType:this.state.postType,pursuitNames:this.props.pursuitNames,eventData:this.state.selectedEvent,textData:this.state.textData,closeModal:this.clearModal,disableCommenting:!0,returnModalStructure:this.props.returnModalStructure}),i.a.createElement("div",{className:""},t?i.a.createElement("button",{onClick:this.handleBackClick},"Back"):i.a.createElement("button",{onClick:this.props.onNewBackProjectClick},"New"),this.props.newProjectState?i.a.createElement("button",{id:"project-info-button",onClick:function(){return e.handleWindowSwitch("EDIT")}},"Next Step"):i.a.createElement(i.a.Fragment,null)),i.a.createElement("div",{className:""},this.props.newProjectState?i.a.createElement(Lt,{titleValue:this.state.title,descriptionValue:this.state.overview,onTextChange:this.handleInputChange}):i.a.createElement(i.a.Fragment,null),this.props.newProjectState?i.a.createElement("p",null,"Select the posts you want to include in this project!"):i.a.createElement(i.a.Fragment,null),this.props.feedIDList.length>0?i.a.createElement(At,{nextOpenPostIndex:this.props.nextOpenPostIndex,mediaType:this.props.newProjectState||this.state.projectSelected?"PROJECT_EVENT":this.props.mediaType,selectedPosts:this.state.selectedPosts,newProjectView:this.props.newProjectState,onProjectEventSelect:this.handleProjectEventSelect,onProjectClick:this.handleProjectClick,allPosts:this.state.projectSelected?this.state.projectSelected.post_ids:this.props.feedIDList,onEventClick:this.handleEventClick,loadedFeed:this.props.loadedFeed,updateFeedData:this.props.updateFeedData,targetProfileID:this.props.targetProfileID,shouldPull:this.props.shouldPull,hasMore:this.props.hasMore}):i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement("p",null,"You haven't made any projects yet. Feel free to make one!"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null))));case"EDIT":return i.a.createElement("div",null,i.a.createElement("div",{className:""},i.a.createElement("button",{onClick:function(){return e.handleWindowSwitch(Ut)}},"Return"),i.a.createElement("button",{onClick:function(){return e.handleWindowSwitch("REVIEW")}},"Finalize")),i.a.createElement("div",{id:"projectcontroller-sortable-list-container"},i.a.createElement(Vt,{mediaType:y,items:this.state.selectedPosts,onSortEnd:this.handleSortEnd,axis:"xy"})));case"REVIEW":var a,n=[],l=Object(W.a)(this.props.pursuitNames);try{for(l.s();!(a=l.n()).done;){var r=a.value;n.push(i.a.createElement("option",{key:r,value:r},r))}}catch(o){l.e(o)}finally{l.f()}return i.a.createElement("div",null,i.a.createElement("div",{className:""},i.a.createElement("button",{onClick:function(){return e.handleWindowSwitch(Ut)}},"Return"),i.a.createElement("button",{onClick:function(){return e.handlePost()}},"Post!")),i.a.createElement("div",{id:"projectcontroller-submit-container"},i.a.createElement(Se.a,{value:this.state.title,onChange:function(t){return e.handleInputChange("TITLE",t.target.value)}}),i.a.createElement(Se.a,{value:this.state.overview,onChange:function(t){return e.handleInputChange("OVERVIEW",t.target.value)}}),i.a.createElement("label",null,"Pursuit"),i.a.createElement("select",{name:"pursuit-category",value:this.state.pursuitCategory,onChange:function(t){return e.handleInputChange("PURSUIT",t.target.value)}},n),i.a.createElement("label",null,"Start Date"),i.a.createElement("input",{type:"date",value:this.state.startDate,onChange:function(t){return e.handleInputChange("START_DATE",t.target.value)}}),i.a.createElement("label",null,"End Date"),i.a.createElement("input",{type:"date",value:this.state.endDate,onChange:function(t){return e.handleInputChange("END_DATE",t.target.value)}}),i.a.createElement("label",null,"Total Minutes"),i.a.createElement("input",{type:"number",value:this.state.minDuration,onChange:function(t){return e.handleInputChange("MINUTES",t.target.value)}}),i.a.createElement("label",null,"Is Complete"),i.a.createElement("input",{type:"checkbox",onClick:function(){return e.handleInputChange("IS_COMPLETE",!e.state.isComplete)}}),i.a.createElement("label",null,"Cover Photo"),i.a.createElement("input",{type:"file",onChange:function(t){return e.handleInputChange("COVER_PHOTO",t.target.files[0])}}),i.a.createElement("button",{onClick:this.handlePost},"Submit")));default:throw new Error("No Window Options Matched in post-project-controller")}}}]),a}(i.a.Component),Ht=Object(u.f)(Wt),Gt=(a(735),function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={feedKey:0,selectedEvent:null,selectedPostIndex:null,isModalShowing:!1},n.handleEventClick=n.handleEventClick.bind(Object(m.a)(n)),n.handleCommentIDInjection=n.handleCommentIDInjection.bind(Object(m.a)(n)),n.clearModal=n.clearModal.bind(Object(m.a)(n)),n.setModal=n.setModal.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"setModal",value:function(e){this.props.history.replace(Object(X.returnPostURL)(e)),this.props.openMasterModal("POST_VIEWER_MODAL_STATE")}},{key:"clearModal",value:function(){var e=this;this.setState({selectedEvent:null},function(){e.props.history.replace(Object(X.returnUsernameURL)(e.props.targetUsername)),e.props.closeMasterModal()})}},{key:"handleCommentIDInjection",value:function(e,t,a){var n=this.props.loadedFeed,i=Math.floor(this.state.selectedPostIndex/4),l=this.state.selectedPostColumnIndex;n[i][l].props.eventData.comments=t,n[i][l].props.eventData.comment_count=n[i][l].props.eventData.comment_count+1,this.props.updateFeedData(n)}},{key:"handleEventClick",value:function(e,t,a){this.setState({selectedEvent:e,selectedPostIndex:t,selectedPostColumnIndex:a,textData:e.text_data,postType:e.post_format},this.setModal(e._id))}},{key:"renderModal",value:function(){if("POST_VIEWER_MODAL_STATE"===this.props.modalState)return i.a.createElement(Ft,{targetProfileID:this.props.targetProfileID,targetIndexUserID:this.props.targetIndexUserID,isOwnProfile:this.props.isOwnProfile,visitorUsername:this.props.visitorUsername,postIndex:this.state.selectedPostIndex,visitorDisplayPhoto:this.props.visitorDisplayPhoto,preferredPostPrivacy:this.props.preferredPostPrivacy,postType:this.state.postType,pursuitNames:this.props.pursuitNames,eventData:this.state.selectedEvent,textData:this.state.textData,closeModal:this.clearModal,onCommentIDInjection:this.handleCommentIDInjection,returnModalStructure:this.props.returnModalStructure})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.renderModal(),i.a.createElement(At,{mediaType:y,feedID:this.props.feedID,allPosts:this.props.feedIDList,targetProfileID:this.props.targetProfileID,loadedFeed:this.props.loadedFeed,onEventClick:this.handleEventClick,shouldPull:this.props.shouldPull,hasMore:this.props.hasMore,updateFeedData:this.props.updateFeedData,nextOpenPostIndex:this.props.nextOpenPostIndex}))}}]),a}(i.a.Component)),Kt=Object(u.f)(Gt),Yt=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={hasMore:!0,nextOpenPostIndex:0,loadedFeed:[[]],visitorUsername:null,targetProfileID:null,targetProfilePreviewID:null,targetUsername:n.props.match.params.username,isPrivate:!0,croppedDisplayPhoto:null,smallCroppedDisplayPhoto:null,coverPhoto:"",bio:"",pursuits:null,recentPosts:null,allPosts:null,allProjects:null,fail:!1,textData:null,userRelationID:null,followerStatus:null,feedID:null,feedIDList:null,mediaType:y,selectedPursuit:"ALL",selectedPursuitIndex:-1,preferredPostPrivacy:null,newProjectState:!1,isPostOnlyView:null},n.clearLoadedFeed=n.clearLoadedFeed.bind(Object(m.a)(n)),n.renderHeroContent=n.renderHeroContent.bind(Object(m.a)(n)),n.returnPublicPosts=n.returnPublicPosts.bind(Object(m.a)(n)),n.handleFollowClick=n.handleFollowClick.bind(Object(m.a)(n)),n.handleFollowerStatusChange=n.handleFollowerStatusChange.bind(Object(m.a)(n)),n.handleOptionsClick=n.handleOptionsClick.bind(Object(m.a)(n)),n.handleFeedSwitch=n.handleFeedSwitch.bind(Object(m.a)(n)),n.handleMediaTypeSwitch=n.handleMediaTypeSwitch.bind(Object(m.a)(n)),n.handleNewBackProjectClick=n.handleNewBackProjectClick.bind(Object(m.a)(n)),n.updateFeedData=n.updateFeedData.bind(Object(m.a)(n)),n.shouldPull=n.shouldPull.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,this._isMounted&&this.state.targetUsername)this.props.firebase.auth.onAuthStateChanged(function(t){if(t){var a=null;Z.returnUser(e.state.targetUsername).then(function(n){return a=n.data,t.displayName!==e.state.targetUsername?Z.returnFollowerStatus(t.displayName,a.user_relation_id):null}).then(function(n){e.handleResponseData(t,a,n||null)}).catch(function(e){return console.log(e)})}else Z.returnUser(e.state.targetUsername).then(function(a){return e.handleResponseData(t,a.data,null)}).catch(function(e){return console.log(e)})});else{if(!this._isMounted||!this.props.match.params.postID)throw new Error("No profile or post matched");this.props.firebase.auth.onAuthStateChanged(function(t){return t?Promise.all([Z.retrievePost(e.props.match.params.postID,!1),Z.returnUser(t.displayName)]).then(function(a){var n,i=[],l=Object(W.a)(a[1].data.pursuits);try{for(l.s();!(n=l.n()).done;){var r=n.value;i.push(r.name)}}catch(o){l.e(o)}finally{l.f()}e._isMounted&&e.setState({selectedEvent:a[0].data,isPostOnlyView:!0,postType:a[0].data.post_format,visitorUsername:t.displayName,targetUsername:a[0].data.username,pursuitNames:i})}):Z.retrievePost(e.props.match.params.postID,!1).then(function(t){e._isMounted&&e.setState({selectedEvent:t.data,isPostOnlyView:!0,postType:t.data.post_format,visitorUsername:null,targetUsername:t.data.username,pursuitNames:[]})})})}}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"clearLoadedFeed",value:function(){this.setState({loadedFeed:[[]],nextOpenPostIndex:0})}},{key:"shouldPull",value:function(e){this.setState({hasMore:e})}},{key:"handleMediaTypeSwitch",value:function(e){if(this.state.newProjectState){if(!window.confirm("Do you want to discard your new project?"))return;this.setState({newProjectState:!1})}-1===this.state.selectedPursuitIndex?this.setState(function(t){return{feedID:"ALL"+e,hasMore:!0,nextOpenPostIndex:0,loadedFeed:[[]],mediaType:e,feedIDList:e===y?t.allPosts:t.allProjects}}):this.setState(function(t){return{nextOpenPostIndex:0,hasMore:!0,feedID:t.pursuits[t.selectedPursuitIndex].name+e,mediaType:e,loadedFeed:[[]],feedIDList:e===y?t.pursuits[t.selectedPursuitIndex].posts:t.pursuits[t.selectedPursuitIndex].projects}})}},{key:"handleFeedSwitch",value:function(e){if(this.state.newProjectState){if(!window.confirm("Do you want to discard your new project?"))return;this.setState({newProjectState:!1})}else this.setState(function(t){return{hasMore:!0,nextOpenPostIndex:0,loadedFeed:[[]],selectedPursuitIndex:e,selectedPursuit:t.pursuits[e].name,feedID:t.pursuits[e].name+t.mediaType,feedIDList:t.mediaType===y?t.pursuits[e].posts:t.pursuits[e].projects}})}},{key:"handleFollowerStatusResponse",value:function(e){if(200===e.status){if(e.data.success){if("FOLLOWING"===e.data.success)return"FOLLOWING";if("FOLLOW_REQUESTED"===e.data.success)return"FOLLOW_REQUESTED";throw Error}if(e.data.error)return"NOT_A_FOLLOWER"===e.data.error||"UNFOLLOWED"===e.data.error?"NOT_A_FOLLOWER":"FOLLOW_REQUESTED"}}},{key:"returnPublicPosts",value:function(e){return e.reduce(function(e,t){return"PRIVATE"!==t.post_privacy_type&&e.push(t),e},[])}},{key:"handleResponseData",value:function(e,t,a){var n,i=t.pursuits[0].posts?t.pursuits[0].posts:[],l=[],r=[],o=e&&e.displayName===t.username?i:this.returnPublicPosts(i),s=a?this.handleFollowerStatusResponse(a):null,u=Object(W.a)(t.pursuits);try{for(u.s();!(n=u.n()).done;){var c=n.value;if(l.push(c.name),c.projects){var d,p=Object(W.a)(c.projects);try{for(p.s();!(d=p.n()).done;){var h=d.value;r.push(h)}}catch(m){p.e(m)}finally{p.f()}}}}catch(m){u.e(m)}finally{u.f()}this._isMounted&&this.setState({visitorUsername:e?e.displayName:null,targetUsername:t.username,targetProfileID:t._id,targetIndexUserID:t.index_user_id,targetProfilePreviewID:t.user_preview_id,isPrivate:t.private,coverPhoto:t.cover_photo_key,croppedDisplayPhoto:t.cropped_display_photo_key,smallCroppedDisplayPhoto:t.small_cropped_display_photo_key,bio:t.bio,pinned:t.pinned,pursuits:t.pursuits,pursuitNames:l,allPosts:o,allProjects:r,feedIDList:o,mediaType:y,feedID:"ALL"+y,userRelationID:t.user_relation_id,followerStatus:s,isPostOnlyView:!1})}},{key:"updateFeedData",value:function(e,t){this.setState({loadedFeed:e,nextOpenPostIndex:t})}},{key:"renderHeroContent",value:function(){return this.state.mediaType===y?i.a.createElement(Kt,{feedID:this.state.feedID,targetProfileID:this.state.targetProfileID,targetIndexUserID:this.state.targetIndexUserID,feedIDList:this.state.feedIDList,isOwnProfile:this.state.visitorUsername===this.state.targetUsername,visitorUsername:this.state.visitorUsername,targetUsername:this.state.targetUsername,postIndex:this.state.selectedPostIndex,visitorDisplayPhoto:this.state.smallCroppedDisplayPhoto,preferredPostPrivacy:this.state.preferredPostPrivacy,postType:this.state.postType,pursuitNames:this.state.pursuitNames,eventData:this.state.selectedEvent,textData:this.state.textData,hasMore:this.state.hasMore,nextOpenPostIndex:this.state.nextOpenPostIndex,shouldPull:this.shouldPull,loadedFeed:this.state.loadedFeed,updateFeedData:this.updateFeedData,returnModalStructure:this.props.returnModalStructure,modalState:this.props.modalState,openMasterModal:this.props.openMasterModal,closeMasterModal:this.props.closeMasterModal}):i.a.createElement(Ht,{username:this.state.targetUsername,displayPhoto:this.state.smallCroppedDisplayPhoto,targetProfileID:this.state.targetProfileID,targetIndexUserID:this.state.targetIndexUserID,mediaType:this.state.mediaType,newProjectState:this.state.newProjectState,feedID:this.state.feedID,feedIDList:this.state.feedIDList,onNewBackProjectClick:this.handleNewBackProjectClick,pursuitNames:this.state.pursuitNames,isOwnProfile:this.state.visitorUsername===this.state.targetUsername,clearLoadedFeed:this.clearLoadedFeed,hasMore:this.state.hasMore,shouldPull:this.shouldPull,nextOpenPostIndex:this.state.nextOpenPostIndex,loadedFeed:this.state.loadedFeed,updateFeedData:this.updateFeedData,returnModalStructure:this.props.returnModalStructure,modalState:this.props.modalState,openMasterModal:this.props.openMasterModal,closeMasterModal:this.props.closeMasterModal})}},{key:"handleNewBackProjectClick",value:function(){this.state.newProjectState?this.setState({newProjectState:!1},this.handleMediaTypeSwitch(this.state.mediaType)):this.setState(function(e){return{newProjectState:!e.newProjectState,feedID:"NEW PROJECT",feedIDList:e.allPosts.map(function(e){return e.post_id})}})}},{key:"handleFollowerStatusChange",value:function(e){var t=this;Z.setFollowerStatus(this.state.visitorUsername,this.state.userRelationID,this.state.targetProfilePreviewID,this.state.isPrivate,e).then(function(e){200===e.status&&(e.data.success?t.setState({followerStatus:e.data.success}):t.setState({followerStatus:e.data.error}))}).catch(function(e){console.log(e)})}},{key:"handleFollowClick",value:function(e){"FOLLOW"===e?this.handleFollowerStatusChange(e):window.confirm("Are you sure you want to unfollow?")&&this.handleFollowerStatusChange(e)}},{key:"handleOptionsClick",value:function(){}},{key:"render",value:function(){var e=this,t=null===this.state.visitorUsername&&this.state.isPrivate||this.state.visitorUsername!==this.state.targetUsername&&this.state.isPrivate&&"FOLLOWING"!==this.state.followerStatus&&"REQUEST_ACCEPTED"!==this.state.followerStatus,a=[];if(this.state.fail)return jt;if(this.state.pursuits){var n,l=0,r=Object(W.a)(this.state.pursuits);try{for(r.s();!(n=r.n()).done;){var o=n.value;a.push(i.a.createElement(xt,{isSelected:o.name===this.state.selectedPursuit,name:o.name,numEvents:o.num_posts,key:o.name,value:l++,onFeedSwitch:this.handleFeedSwitch}))}}catch(s){r.e(s)}finally{r.f()}}return this.state.isPostOnlyView?i.a.createElement(ze,{targetProfileID:this.state.targetProfileID,targetIndexUserID:this.state.targetIndexUserID,key:this.state.selectedEvent._id,isOwnProfile:this.state.visitorUsername===this.state.selectedEvent.username,visitorUsername:this.state.visitorUsername,largeViewMode:!0,isPostOnlyView:this.state.isPostOnlyView,visitorDisplayPhoto:this.state.smallCroppedDisplayPhoto,preferredPostPrivacy:this.state.preferredPostPrivacy,postType:this.state.postType,pursuitNames:this.state.pursuitNames,eventData:this.state.selectedEvent,textData:this.state.selectedEvent.text_data}):this.state.isPostOnlyView?new Error("State condition for postOnlyView was null"):i.a.createElement("div",null,i.a.createElement("div",{id:"profile-main-container"},i.a.createElement("div",{id:"profile-cover-photo-container"},this.state.coverPhoto?i.a.createElement("img",{alt:"cover photo",src:Object(X.returnUserImageURL)(this.state.coverPhoto)}):i.a.createElement("div",{id:"profile-temp-cover"})),i.a.createElement("div",{id:"profile-intro-container"},i.a.createElement("div",{id:"profile-display-photo-container"},i.a.createElement("img",{alt:"user profile photo",src:this.state.croppedDisplayPhoto?Object(X.returnUserImageURL)(this.state.croppedDisplayPhoto):X.TEMP_PROFILE_PHOTO_URL}),i.a.createElement("div",{id:"profile-name-container"},i.a.createElement("h4",null,this.state.targetUsername)),i.a.createElement("div",{id:"profile-follow-actions-container"},i.a.createElement(Mt,{isOwner:this.state.targetUsername===this.state.visitorUsername,followerStatus:this.state.followerStatus,onFollowClick:this.handleFollowClick,onOptionsClick:this.handleOptionsClick}))),i.a.createElement("div",{id:"profile-biography"},this.state.bio?i.a.createElement("p",null,this.state.bio):i.a.createElement("p",null)),i.a.createElement("div",{id:"profile-pursuits-container"},a)),i.a.createElement("div",{id:"profile-content-switch-container"},i.a.createElement("button",{disabled:this.state.mediaType===y,onClick:function(){return e.handleMediaTypeSwitch(y)}},"Posts"),i.a.createElement("button",{disabled:"PROJECT"===this.state.mediaType,onClick:function(){return e.handleMediaTypeSwitch("PROJECT")}},"Projects")),t?i.a.createElement("p",null,"This profile is private. To see these posts, please request access. "):this.renderHeroContent()))}}]),a}(i.a.Component),Jt=k(Yt),zt=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],l=t[1];return i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){return console.log("asdf"),q.a.get(Q.a.IMAGE_BASE_URL,{params:{imageKey:"images/content/fd3fd690-85bb-11eb-9d6d-c1928bb106f5"}}).then(function(e){return fetch(e.data.image)}).then(function(e){return e.blob()}).then(function(e){console.log(e);var t=new File([e],"Thumbnail.jpeg",{type:e.type});l(URL.createObjectURL(t))})}},"Return Data"),i.a.createElement("img",{id:"target",src:a}))},qt=(a(736),Xe(function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],l=t[1],r=Object(n.useRef)(null),c=function(e){console.log(e),r.current&&(r.current.style.display="block"),document.body.style.overflow="hidden",l(e)},d=function(){r.current.style.display="none",document.body.style.overflow="visible",l(null)},p=function(e,t){return i.a.createElement("div",null,i.a.createElement("div",{className:"overlay",onClick:t}),i.a.createElement("span",{className:"close",onClick:t},"X    "),e)};return i.a.createElement(s.a,null,i.a.createElement(Rt,{returnModalStructure:p,openMasterModal:c,closeMasterModal:d,modalState:a}),i.a.createElement(u.c,null,i.a.createElement(u.a,{exact:!0,path:"/",render:function(e){return i.a.createElement(ot,Object.assign({},e,{returnModalStructure:p,openMasterModal:c,closeMasterModal:d,modalState:a,keyProp:Math.random()}))}}),i.a.createElement(u.a,{exact:!0,path:"/account",component:dt}),i.a.createElement(u.a,{exact:!0,path:"/test",component:zt}),i.a.createElement(u.a,{exact:!0,path:"/u/:username",render:function(e){return i.a.createElement(Jt,Object.assign({},e,{returnModalStructure:p,openMasterModal:c,closeMasterModal:d,modalState:a}))}}),i.a.createElement(u.a,{exact:!0,path:"/p/:postID",render:function(e){return i.a.createElement(Jt,Object.assign({},e,{returnModalStructure:p,openMasterModal:c,closeMasterModal:d,modalState:a}))}})),i.a.createElement("div",{className:"modal",ref:r}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(T.Provider,{value:new M},i.a.createElement(qt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})},9:function(e,t){e.exports={COVER_PHOTO_FIELD:"coverPhoto",POST_ID_FIELD:"postID",USER_ID_FIELD:"userID",INDEX_USER_ID_FIELD:"indexUserID",OVERVIEW_FIELD:"overview",REMOVE_COVER_PHOTO:"removeCoverPhoto",DISPLAY_PHOTO_FIELD:"displayPhoto",DIFFICULTY_FIELD:"difficulty",START_DATE_FIELD:"startDate",END_DATE_FIELD:"endDate",USERNAME_FIELD:"username",IS_PAGINATED_FIELD:"isPaginated",LABELS_FIELD:"labels",PROGRESSION_FIELD:"progression",IS_COMPLETE_FIELD:"isComplete",TITLE_FIELD:"title",POST_PRIVACY_TYPE_FIELD:"postPrivacyType",POST_TYPE_FIELD:"postType",PURSUIT_ARRAY_FIELD:"pursuitArray",PURSUIT_FIELD:"pursuit",DATE_FIELD:"date",MIN_DURATION_FIELD:"minDuration",SELECTED_POSTS_FIELD:"selectedPosts",SUBTITLE_FIELD:"subtitle",IMAGE_KEY_FIELD:"imageKey",IMAGES_FIELD:"images",TEXT_DATA_FIELD:"textData",CROPPED_IMAGE_FIELD:"croppedImage",SMALL_CROPPED_IMAGE_FIELD:"smallCroppedImage",TINY_CROPPED_IMAGE_FIELD:"tinyCroppedImage",FIRST_NAME_FIELD:"firstName",LAST_NAME_FIELD:"lastName"}}},[[327,1,2]]]);
//# sourceMappingURL=main.f3f6c0cc.chunk.js.map